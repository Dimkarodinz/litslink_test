  [1m[35m (856.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "payment_race_test_test"[0m
  [1m[35m (542.3ms)[0m  [1m[35mCREATE DATABASE "payment_race_test_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "line_items" CASCADE[0m
  [1m[35m (70.0ms)[0m  [1m[35mCREATE TABLE "line_items" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "posts" CASCADE[0m
  [1m[35m (87.8ms)[0m  [1m[35mCREATE TABLE "posts" ("id" bigserial primary key, "line_items_id" bigint, "services_id" bigint, "uuid" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (64.4ms)[0m  [1m[35mCREATE  INDEX  "index_posts_on_line_items_id" ON "posts"  ("line_items_id")[0m
  [1m[35m (53.5ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_posts_on_services_id_and_line_items_id" ON "posts"  ("services_id", "line_items_id")[0m
  [1m[35m (53.4ms)[0m  [1m[35mCREATE  INDEX  "index_posts_on_services_id" ON "posts"  ("services_id")[0m
  [1m[35m (10.9ms)[0m  [1m[35mCOMMENT ON COLUMN "posts"."uuid" IS 'Example column for test'[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "services" CASCADE[0m
  [1m[35m (54.6ms)[0m  [1m[35mCREATE TABLE "services" ("id" bigserial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (9.9ms)[0m  [1m[35mALTER TABLE "posts" ADD CONSTRAINT "fk_rails_efd3ea3aee"
FOREIGN KEY ("line_items_id")
  REFERENCES "line_items" ("id")
[0m
  [1m[35m (10.6ms)[0m  [1m[35mALTER TABLE "posts" ADD CONSTRAINT "fk_rails_3c74594cd5"
FOREIGN KEY ("services_id")
  REFERENCES "services" ("id")
[0m
  [1m[35m (98.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (12.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20171123195145)[0m
  [1m[35m (10.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20171123165029),
(20171123165036);

[0m
  [1m[35m (128.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2017-11-23 21:34:33.738814"], ["updated_at", "2017-11-23 21:34:33.738814"]]
  [1m[35m (11.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:17:34.472877"], ["updated_at", "2017-11-23 22:17:34.472877"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:18:21.787520"], ["updated_at", "2017-11-23 22:18:21.787520"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:18:38.624614"], ["updated_at", "2017-11-23 22:18:38.624614"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:21:23.785993"], ["updated_at", "2017-11-23 22:21:23.785993"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:23:57.075413"], ["updated_at", "2017-11-23 22:23:57.075413"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:24:43.284150"], ["updated_at", "2017-11-23 22:24:43.284150"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:27:26.310651"], ["updated_at", "2017-11-23 22:27:26.310651"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:27:51.734277"], ["updated_at", "2017-11-23 22:27:51.734277"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:29:54.646065"], ["updated_at", "2017-11-23 22:29:54.646065"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:30:18.916345"], ["updated_at", "2017-11-23 22:30:18.916345"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:31:07.589020"], ["updated_at", "2017-11-23 22:31:07.589020"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-23 22:31:07.603714"], ["updated_at", "2017-11-23 22:31:07.603714"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:31:53.458239"], ["updated_at", "2017-11-23 22:31:53.458239"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-23 22:31:53.472846"], ["updated_at", "2017-11-23 22:31:53.472846"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:32:06.896278"], ["updated_at", "2017-11-23 22:32:06.896278"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 3], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 3], ["line_item_id", 1], ["created_at", "2017-11-23 22:32:06.910405"], ["updated_at", "2017-11-23 22:32:06.910405"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 3], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:32:23.930012"], ["updated_at", "2017-11-23 22:32:23.930012"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 4], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 4], ["line_item_id", 1], ["created_at", "2017-11-23 22:32:23.945118"], ["updated_at", "2017-11-23 22:32:23.945118"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 4], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:34:38.656464"], ["updated_at", "2017-11-23 22:34:38.656464"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 5], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 5], ["line_item_id", 1], ["created_at", "2017-11-23 22:34:38.671072"], ["updated_at", "2017-11-23 22:34:38.671072"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 5], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:34:38.687528"], ["updated_at", "2017-11-23 22:34:38.687528"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 6], ["line_item_id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:34:38.702602"], ["updated_at", "2017-11-23 22:34:38.702602"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 7], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:34:48.074532"], ["updated_at", "2017-11-23 22:34:48.074532"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 8], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 8], ["line_item_id", 1], ["created_at", "2017-11-23 22:34:48.093134"], ["updated_at", "2017-11-23 22:34:48.093134"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 8], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:34:48.109738"], ["updated_at", "2017-11-23 22:34:48.109738"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 9], ["line_item_id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:34:48.124446"], ["updated_at", "2017-11-23 22:34:48.124446"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 10], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:34:56.353657"], ["updated_at", "2017-11-23 22:34:56.353657"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 11], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 11], ["line_item_id", 1], ["created_at", "2017-11-23 22:34:56.368395"], ["updated_at", "2017-11-23 22:34:56.368395"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 11], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:34:56.383992"], ["updated_at", "2017-11-23 22:34:56.383992"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 12], ["line_item_id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:34:56.397794"], ["updated_at", "2017-11-23 22:34:56.397794"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 13], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:39:33.504797"], ["updated_at", "2017-11-23 22:39:33.504797"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 14], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 14], ["line_item_id", 1], ["created_at", "2017-11-23 22:39:33.520039"], ["updated_at", "2017-11-23 22:39:33.520039"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 14], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:39:33.535932"], ["updated_at", "2017-11-23 22:39:33.535932"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 15], ["line_item_id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:39:33.550819"], ["updated_at", "2017-11-23 22:39:33.550819"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 16], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:43:19.524475"], ["updated_at", "2017-11-23 22:43:19.524475"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 17], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 17], ["line_item_id", 1], ["created_at", "2017-11-23 22:43:19.545725"], ["updated_at", "2017-11-23 22:43:19.545725"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 17], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:43:19.563189"], ["updated_at", "2017-11-23 22:43:19.563189"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 18], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:43:43.984616"], ["updated_at", "2017-11-23 22:43:43.984616"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 19], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 19], ["line_item_id", 1], ["created_at", "2017-11-23 22:43:44.006618"], ["updated_at", "2017-11-23 22:43:44.006618"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 19], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:43:44.024221"], ["updated_at", "2017-11-23 22:43:44.024221"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 20], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 20], ["line_item_id", 1], ["created_at", "2017-11-23 22:43:44.027806"], ["updated_at", "2017-11-23 22:43:44.027806"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:43:44.030257"], ["updated_at", "2017-11-23 22:43:44.030257"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 21], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:45:59.474751"], ["updated_at", "2017-11-23 22:45:59.474751"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 22], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 22], ["line_item_id", 1], ["created_at", "2017-11-23 22:45:59.492986"], ["updated_at", "2017-11-23 22:45:59.492986"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:45:59.501137"], ["updated_at", "2017-11-23 22:45:59.501137"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 23], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 23], ["line_item_id", 1], ["created_at", "2017-11-23 22:45:59.504615"], ["updated_at", "2017-11-23 22:45:59.504615"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 23], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:45:59.520303"], ["updated_at", "2017-11-23 22:45:59.520303"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 24], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 24], ["line_item_id", 1], ["created_at", "2017-11-23 22:45:59.524230"], ["updated_at", "2017-11-23 22:45:59.524230"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:45:59.527871"], ["updated_at", "2017-11-23 22:45:59.527871"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 25], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:46:07.282947"], ["updated_at", "2017-11-23 22:46:07.282947"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 26], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 26], ["line_item_id", 1], ["created_at", "2017-11-23 22:46:07.296342"], ["updated_at", "2017-11-23 22:46:07.296342"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 26], ["line_item_id", 1], ["created_at", "2017-11-23 22:46:07.298358"], ["updated_at", "2017-11-23 22:46:07.298358"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:46:07.304236"], ["updated_at", "2017-11-23 22:46:07.304236"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 27], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 27], ["line_item_id", 1], ["created_at", "2017-11-23 22:46:07.307541"], ["updated_at", "2017-11-23 22:46:07.307541"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 27], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:46:07.322321"], ["updated_at", "2017-11-23 22:46:07.322321"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 28], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 28], ["line_item_id", 1], ["created_at", "2017-11-23 22:46:07.325577"], ["updated_at", "2017-11-23 22:46:07.325577"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:46:07.327496"], ["updated_at", "2017-11-23 22:46:07.327496"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 29], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:54:30.875049"], ["updated_at", "2017-11-23 22:54:30.875049"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 30], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 30], ["line_item_id", 1], ["created_at", "2017-11-23 22:54:30.883123"], ["updated_at", "2017-11-23 22:54:30.883123"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 30], ["line_item_id", 1], ["created_at", "2017-11-23 22:54:30.885748"], ["updated_at", "2017-11-23 22:54:30.885748"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:54:30.892314"], ["updated_at", "2017-11-23 22:54:30.892314"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 31], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 31], ["line_item_id", 1], ["created_at", "2017-11-23 22:54:30.895557"], ["updated_at", "2017-11-23 22:54:30.895557"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:54:30.897799"], ["updated_at", "2017-11-23 22:54:30.897799"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 32], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:54:30.957048"], ["updated_at", "2017-11-23 22:54:30.957048"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 33], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 33], ["line_item_id", 1], ["created_at", "2017-11-23 22:54:30.960361"], ["updated_at", "2017-11-23 22:54:30.960361"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 33], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:54:30.973619"], ["updated_at", "2017-11-23 22:54:30.973619"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 34], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 34], ["line_item_id", 1], ["created_at", "2017-11-23 22:54:30.976798"], ["updated_at", "2017-11-23 22:54:30.976798"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:54:30.978999"], ["updated_at", "2017-11-23 22:54:30.978999"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 35], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:54:51.893753"], ["updated_at", "2017-11-23 22:54:51.893753"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 36], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 36], ["line_item_id", 1], ["created_at", "2017-11-23 22:54:51.902143"], ["updated_at", "2017-11-23 22:54:51.902143"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 36], ["line_item_id", 1], ["created_at", "2017-11-23 22:54:51.904536"], ["updated_at", "2017-11-23 22:54:51.904536"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:54:51.911367"], ["updated_at", "2017-11-23 22:54:51.911367"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 37], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 37], ["line_item_id", 1], ["created_at", "2017-11-23 22:54:51.914931"], ["updated_at", "2017-11-23 22:54:51.914931"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:54:51.917050"], ["updated_at", "2017-11-23 22:54:51.917050"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 38], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:54:51.938418"], ["updated_at", "2017-11-23 22:54:51.938418"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 39], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 39], ["line_item_id", 1], ["created_at", "2017-11-23 22:54:51.941965"], ["updated_at", "2017-11-23 22:54:51.941965"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 39], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:54:51.955366"], ["updated_at", "2017-11-23 22:54:51.955366"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 40], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 40], ["line_item_id", 1], ["created_at", "2017-11-23 22:54:51.958503"], ["updated_at", "2017-11-23 22:54:51.958503"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:54:51.960277"], ["updated_at", "2017-11-23 22:54:51.960277"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 41], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:55:35.330461"], ["updated_at", "2017-11-23 22:55:35.330461"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 42], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 42], ["line_item_id", 1], ["created_at", "2017-11-23 22:55:35.338572"], ["updated_at", "2017-11-23 22:55:35.338572"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 42], ["line_item_id", 1], ["created_at", "2017-11-23 22:55:35.342325"], ["updated_at", "2017-11-23 22:55:35.342325"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:55:35.348241"], ["updated_at", "2017-11-23 22:55:35.348241"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 43], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 43], ["line_item_id", 1], ["created_at", "2017-11-23 22:55:35.351475"], ["updated_at", "2017-11-23 22:55:35.351475"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:55:35.353824"], ["updated_at", "2017-11-23 22:55:35.353824"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 44], ["line_item_id", 1], ["created_at", "2017-11-23 22:55:35.355655"], ["updated_at", "2017-11-23 22:55:35.355655"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:55:35.368533"], ["updated_at", "2017-11-23 22:55:35.368533"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 45], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 45], ["line_item_id", 1], ["created_at", "2017-11-23 22:55:35.372380"], ["updated_at", "2017-11-23 22:55:35.372380"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 45], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:55:35.390412"], ["updated_at", "2017-11-23 22:55:35.390412"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 46], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 46], ["line_item_id", 1], ["created_at", "2017-11-23 22:55:35.393841"], ["updated_at", "2017-11-23 22:55:35.393841"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:55:35.396048"], ["updated_at", "2017-11-23 22:55:35.396048"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 47], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:56:09.286284"], ["updated_at", "2017-11-23 22:56:09.286284"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-23 22:56:09.294400"], ["updated_at", "2017-11-23 22:56:09.294400"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-23 22:56:09.298175"], ["updated_at", "2017-11-23 22:56:09.298175"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:56:09.303511"], ["updated_at", "2017-11-23 22:56:09.303511"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-23 22:56:09.307382"], ["updated_at", "2017-11-23 22:56:09.307382"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:56:09.309384"], ["updated_at", "2017-11-23 22:56:09.309384"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 3], ["line_item_id", 1], ["created_at", "2017-11-23 22:56:09.311329"], ["updated_at", "2017-11-23 22:56:09.311329"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:56:09.324731"], ["updated_at", "2017-11-23 22:56:09.324731"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 4], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 4], ["line_item_id", 1], ["created_at", "2017-11-23 22:56:09.329196"], ["updated_at", "2017-11-23 22:56:09.329196"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 4], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:56:09.347656"], ["updated_at", "2017-11-23 22:56:09.347656"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 5], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 5], ["line_item_id", 1], ["created_at", "2017-11-23 22:56:09.350857"], ["updated_at", "2017-11-23 22:56:09.350857"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:56:09.352888"], ["updated_at", "2017-11-23 22:56:09.352888"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 6], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:58:25.455365"], ["updated_at", "2017-11-23 22:58:25.455365"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-23 22:58:25.463595"], ["updated_at", "2017-11-23 22:58:25.463595"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-23 22:58:25.467425"], ["updated_at", "2017-11-23 22:58:25.467425"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:58:25.473320"], ["updated_at", "2017-11-23 22:58:25.473320"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-23 22:58:25.476503"], ["updated_at", "2017-11-23 22:58:25.476503"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:58:25.478790"], ["updated_at", "2017-11-23 22:58:25.478790"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 3], ["line_item_id", 1], ["created_at", "2017-11-23 22:58:25.480910"], ["updated_at", "2017-11-23 22:58:25.480910"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:58:25.486660"], ["updated_at", "2017-11-23 22:58:25.486660"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 4], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 4], ["line_item_id", 1], ["created_at", "2017-11-23 22:58:25.489924"], ["updated_at", "2017-11-23 22:58:25.489924"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 4], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:58:25.509729"], ["updated_at", "2017-11-23 22:58:25.509729"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 5], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 5], ["line_item_id", 1], ["created_at", "2017-11-23 22:58:25.512967"], ["updated_at", "2017-11-23 22:58:25.512967"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 22:58:25.515397"], ["updated_at", "2017-11-23 22:58:25.515397"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 6], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:01:07.079974"], ["updated_at", "2017-11-23 23:01:07.079974"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 7], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 7], ["line_item_id", 1], ["created_at", "2017-11-23 23:01:07.088461"], ["updated_at", "2017-11-23 23:01:07.088461"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 7], ["line_item_id", 1], ["created_at", "2017-11-23 23:01:07.092254"], ["updated_at", "2017-11-23 23:01:07.092254"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:01:07.098292"], ["updated_at", "2017-11-23 23:01:07.098292"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 8], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 8], ["line_item_id", 1], ["created_at", "2017-11-23 23:01:07.101627"], ["updated_at", "2017-11-23 23:01:07.101627"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:01:07.103773"], ["updated_at", "2017-11-23 23:01:07.103773"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 9], ["line_item_id", 1], ["created_at", "2017-11-23 23:01:07.105634"], ["updated_at", "2017-11-23 23:01:07.105634"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:01:07.111313"], ["updated_at", "2017-11-23 23:01:07.111313"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 10], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 10], ["line_item_id", 1], ["created_at", "2017-11-23 23:01:07.114516"], ["updated_at", "2017-11-23 23:01:07.114516"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:01:07.116615"], ["updated_at", "2017-11-23 23:01:07.116615"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 11], ["created_at", "2017-11-23 23:01:07.118666"], ["updated_at", "2017-11-23 23:01:07.118666"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:01:07.129802"], ["updated_at", "2017-11-23 23:01:07.129802"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 12], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 12], ["line_item_id", 1], ["created_at", "2017-11-23 23:01:07.133964"], ["updated_at", "2017-11-23 23:01:07.133964"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 12], ["created_at", "2017-11-23 23:01:07.136198"], ["updated_at", "2017-11-23 23:01:07.136198"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:01:07.141785"], ["updated_at", "2017-11-23 23:01:07.141785"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 13], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 13], ["line_item_id", 1], ["created_at", "2017-11-23 23:01:07.144900"], ["updated_at", "2017-11-23 23:01:07.144900"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 13], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:01:07.167353"], ["updated_at", "2017-11-23 23:01:07.167353"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 14], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 14], ["line_item_id", 1], ["created_at", "2017-11-23 23:01:07.170831"], ["updated_at", "2017-11-23 23:01:07.170831"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:01:07.173022"], ["updated_at", "2017-11-23 23:01:07.173022"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 15], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:01:37.997936"], ["updated_at", "2017-11-23 23:01:37.997936"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 16], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 16], ["line_item_id", 1], ["created_at", "2017-11-23 23:01:38.006311"], ["updated_at", "2017-11-23 23:01:38.006311"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 16], ["line_item_id", 1], ["created_at", "2017-11-23 23:01:38.010295"], ["updated_at", "2017-11-23 23:01:38.010295"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:01:38.016453"], ["updated_at", "2017-11-23 23:01:38.016453"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 17], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 17], ["line_item_id", 1], ["created_at", "2017-11-23 23:01:38.019849"], ["updated_at", "2017-11-23 23:01:38.019849"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:01:38.022157"], ["updated_at", "2017-11-23 23:01:38.022157"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 18], ["line_item_id", 1], ["created_at", "2017-11-23 23:01:38.023995"], ["updated_at", "2017-11-23 23:01:38.023995"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:01:38.030228"], ["updated_at", "2017-11-23 23:01:38.030228"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 19], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 19], ["line_item_id", 1], ["created_at", "2017-11-23 23:01:38.033350"], ["updated_at", "2017-11-23 23:01:38.033350"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:01:38.035616"], ["updated_at", "2017-11-23 23:01:38.035616"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 20], ["created_at", "2017-11-23 23:01:38.037536"], ["updated_at", "2017-11-23 23:01:38.037536"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:01:38.048589"], ["updated_at", "2017-11-23 23:01:38.048589"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 21], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 21], ["line_item_id", 1], ["created_at", "2017-11-23 23:01:38.052578"], ["updated_at", "2017-11-23 23:01:38.052578"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 21], ["created_at", "2017-11-23 23:01:38.054955"], ["updated_at", "2017-11-23 23:01:38.054955"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:01:38.061043"], ["updated_at", "2017-11-23 23:01:38.061043"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 22], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 22], ["line_item_id", 1], ["created_at", "2017-11-23 23:01:38.064392"], ["updated_at", "2017-11-23 23:01:38.064392"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 22], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:01:38.087061"], ["updated_at", "2017-11-23 23:01:38.087061"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 23], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 23], ["line_item_id", 1], ["created_at", "2017-11-23 23:01:38.090645"], ["updated_at", "2017-11-23 23:01:38.090645"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:01:38.092720"], ["updated_at", "2017-11-23 23:01:38.092720"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 24], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:02:18.962791"], ["updated_at", "2017-11-23 23:02:18.962791"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 25], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 25], ["line_item_id", 1], ["created_at", "2017-11-23 23:02:18.971346"], ["updated_at", "2017-11-23 23:02:18.971346"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 25], ["line_item_id", 1], ["created_at", "2017-11-23 23:02:18.975397"], ["updated_at", "2017-11-23 23:02:18.975397"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:02:18.981396"], ["updated_at", "2017-11-23 23:02:18.981396"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 26], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 26], ["line_item_id", 1], ["created_at", "2017-11-23 23:02:18.984664"], ["updated_at", "2017-11-23 23:02:18.984664"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:02:18.987026"], ["updated_at", "2017-11-23 23:02:18.987026"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 27], ["line_item_id", 1], ["created_at", "2017-11-23 23:02:18.988821"], ["updated_at", "2017-11-23 23:02:18.988821"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:02:18.994333"], ["updated_at", "2017-11-23 23:02:18.994333"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 28], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 28], ["line_item_id", 1], ["created_at", "2017-11-23 23:02:18.997365"], ["updated_at", "2017-11-23 23:02:18.997365"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:02:18.999111"], ["updated_at", "2017-11-23 23:02:18.999111"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:02:19.004264"], ["updated_at", "2017-11-23 23:02:19.004264"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 30], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 30], ["line_item_id", 1], ["created_at", "2017-11-23 23:02:19.008437"], ["updated_at", "2017-11-23 23:02:19.008437"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:02:19.015280"], ["updated_at", "2017-11-23 23:02:19.015280"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 31], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 31], ["line_item_id", 1], ["created_at", "2017-11-23 23:02:19.018542"], ["updated_at", "2017-11-23 23:02:19.018542"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 31], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:02:19.033960"], ["updated_at", "2017-11-23 23:02:19.033960"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 32], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 32], ["line_item_id", 1], ["created_at", "2017-11-23 23:02:19.037196"], ["updated_at", "2017-11-23 23:02:19.037196"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:02:19.040430"], ["updated_at", "2017-11-23 23:02:19.040430"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 33], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:36:03.205346"], ["updated_at", "2017-11-23 23:36:03.205346"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 34], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 34], ["line_item_id", 1], ["created_at", "2017-11-23 23:36:03.213639"], ["updated_at", "2017-11-23 23:36:03.213639"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 34], ["line_item_id", 1], ["created_at", "2017-11-23 23:36:03.217320"], ["updated_at", "2017-11-23 23:36:03.217320"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:36:03.223780"], ["updated_at", "2017-11-23 23:36:03.223780"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 35], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 35], ["line_item_id", 1], ["created_at", "2017-11-23 23:36:03.227007"], ["updated_at", "2017-11-23 23:36:03.227007"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:36:03.229350"], ["updated_at", "2017-11-23 23:36:03.229350"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 36], ["line_item_id", 1], ["created_at", "2017-11-23 23:36:03.231916"], ["updated_at", "2017-11-23 23:36:03.231916"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:36:03.237828"], ["updated_at", "2017-11-23 23:36:03.237828"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 37], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 37], ["line_item_id", 1], ["created_at", "2017-11-23 23:36:03.241113"], ["updated_at", "2017-11-23 23:36:03.241113"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:36:03.243346"], ["updated_at", "2017-11-23 23:36:03.243346"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 38], ["created_at", "2017-11-23 23:36:03.245096"], ["updated_at", "2017-11-23 23:36:03.245096"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:36:03.252689"], ["updated_at", "2017-11-23 23:36:03.252689"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 39], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 39], ["line_item_id", 1], ["created_at", "2017-11-23 23:36:03.256437"], ["updated_at", "2017-11-23 23:36:03.256437"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 39], ["created_at", "2017-11-23 23:36:03.258542"], ["updated_at", "2017-11-23 23:36:03.258542"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:36:03.272187"], ["updated_at", "2017-11-23 23:36:03.272187"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 40], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 40], ["line_item_id", 1], ["created_at", "2017-11-23 23:36:03.275931"], ["updated_at", "2017-11-23 23:36:03.275931"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 40], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:36:03.294650"], ["updated_at", "2017-11-23 23:36:03.294650"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 41], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 41], ["line_item_id", 1], ["created_at", "2017-11-23 23:36:03.298109"], ["updated_at", "2017-11-23 23:36:03.298109"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:36:03.299997"], ["updated_at", "2017-11-23 23:36:03.299997"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 42], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:36:03.307185"], ["updated_at", "2017-11-23 23:36:03.307185"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:36:03.313552"], ["updated_at", "2017-11-23 23:36:03.313552"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 44], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 44], ["created_at", "2017-11-23 23:36:03.318025"], ["updated_at", "2017-11-23 23:36:03.318025"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:36:03.319852"], ["updated_at", "2017-11-23 23:36:03.319852"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:36:03.325152"], ["updated_at", "2017-11-23 23:36:03.325152"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 46], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 46], ["created_at", "2017-11-23 23:36:03.328157"], ["updated_at", "2017-11-23 23:36:03.328157"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:36:03.330263"], ["updated_at", "2017-11-23 23:36:03.330263"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:36:18.742487"], ["updated_at", "2017-11-23 23:36:18.742487"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (4.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 48], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 48], ["line_item_id", 1], ["created_at", "2017-11-23 23:36:18.754575"], ["updated_at", "2017-11-23 23:36:18.754575"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 48], ["line_item_id", 1], ["created_at", "2017-11-23 23:36:18.757264"], ["updated_at", "2017-11-23 23:36:18.757264"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:36:18.762490"], ["updated_at", "2017-11-23 23:36:18.762490"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 49], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 49], ["line_item_id", 1], ["created_at", "2017-11-23 23:36:18.765514"], ["updated_at", "2017-11-23 23:36:18.765514"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:36:18.767271"], ["updated_at", "2017-11-23 23:36:18.767271"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 50], ["line_item_id", 1], ["created_at", "2017-11-23 23:36:18.768713"], ["updated_at", "2017-11-23 23:36:18.768713"]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:36:18.774149"], ["updated_at", "2017-11-23 23:36:18.774149"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 51], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 51], ["line_item_id", 1], ["created_at", "2017-11-23 23:36:18.777160"], ["updated_at", "2017-11-23 23:36:18.777160"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:36:18.778958"], ["updated_at", "2017-11-23 23:36:18.778958"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 52], ["created_at", "2017-11-23 23:36:18.780337"], ["updated_at", "2017-11-23 23:36:18.780337"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:36:18.785671"], ["updated_at", "2017-11-23 23:36:18.785671"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 53], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 53], ["line_item_id", 1], ["created_at", "2017-11-23 23:36:18.790727"], ["updated_at", "2017-11-23 23:36:18.790727"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 53], ["created_at", "2017-11-23 23:36:18.792889"], ["updated_at", "2017-11-23 23:36:18.792889"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:36:18.798503"], ["updated_at", "2017-11-23 23:36:18.798503"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 54], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 54], ["line_item_id", 1], ["created_at", "2017-11-23 23:36:18.801647"], ["updated_at", "2017-11-23 23:36:18.801647"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 54], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:36:18.817052"], ["updated_at", "2017-11-23 23:36:18.817052"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 55], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 55], ["line_item_id", 1], ["created_at", "2017-11-23 23:36:18.822709"], ["updated_at", "2017-11-23 23:36:18.822709"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:36:18.824683"], ["updated_at", "2017-11-23 23:36:18.824683"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 56], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:36:18.831909"], ["updated_at", "2017-11-23 23:36:18.831909"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:36:18.836844"], ["updated_at", "2017-11-23 23:36:18.836844"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 58], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 58], ["created_at", "2017-11-23 23:36:18.839832"], ["updated_at", "2017-11-23 23:36:18.839832"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:36:18.841694"], ["updated_at", "2017-11-23 23:36:18.841694"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:36:18.846916"], ["updated_at", "2017-11-23 23:36:18.846916"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 60], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 60], ["created_at", "2017-11-23 23:36:18.850618"], ["updated_at", "2017-11-23 23:36:18.850618"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:36:18.853745"], ["updated_at", "2017-11-23 23:36:18.853745"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:42:04.585340"], ["updated_at", "2017-11-23 23:42:04.585340"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 62], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 62], ["line_item_id", 1], ["created_at", "2017-11-23 23:42:04.593575"], ["updated_at", "2017-11-23 23:42:04.593575"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 62], ["line_item_id", 1], ["created_at", "2017-11-23 23:42:04.597081"], ["updated_at", "2017-11-23 23:42:04.597081"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:42:04.603425"], ["updated_at", "2017-11-23 23:42:04.603425"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 63], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 63], ["line_item_id", 1], ["created_at", "2017-11-23 23:42:04.606966"], ["updated_at", "2017-11-23 23:42:04.606966"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:42:04.609125"], ["updated_at", "2017-11-23 23:42:04.609125"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 64], ["line_item_id", 1], ["created_at", "2017-11-23 23:42:04.611037"], ["updated_at", "2017-11-23 23:42:04.611037"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:42:04.616602"], ["updated_at", "2017-11-23 23:42:04.616602"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 65], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 65], ["line_item_id", 1], ["created_at", "2017-11-23 23:42:04.619827"], ["updated_at", "2017-11-23 23:42:04.619827"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:42:04.621951"], ["updated_at", "2017-11-23 23:42:04.621951"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 66], ["created_at", "2017-11-23 23:42:04.623670"], ["updated_at", "2017-11-23 23:42:04.623670"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:42:04.631468"], ["updated_at", "2017-11-23 23:42:04.631468"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 67], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 67], ["line_item_id", 1], ["created_at", "2017-11-23 23:42:04.634817"], ["updated_at", "2017-11-23 23:42:04.634817"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 67], ["created_at", "2017-11-23 23:42:04.636846"], ["updated_at", "2017-11-23 23:42:04.636846"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:42:04.643019"], ["updated_at", "2017-11-23 23:42:04.643019"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 68], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 68], ["line_item_id", 1], ["created_at", "2017-11-23 23:42:04.646101"], ["updated_at", "2017-11-23 23:42:04.646101"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 68], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 68], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:42:04.663980"], ["updated_at", "2017-11-23 23:42:04.663980"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 69], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 69], ["line_item_id", 1], ["created_at", "2017-11-23 23:42:04.667366"], ["updated_at", "2017-11-23 23:42:04.667366"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:42:04.673496"], ["updated_at", "2017-11-23 23:42:04.673496"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 70], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:42:04.680908"], ["updated_at", "2017-11-23 23:42:04.680908"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 71], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 71], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 71], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 71], ["line_item_id", 1], ["created_at", "2017-11-23 23:42:04.685883"], ["updated_at", "2017-11-23 23:42:04.685883"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:42:04.693382"], ["updated_at", "2017-11-23 23:42:04.693382"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 72], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 72], ["created_at", "2017-11-23 23:42:04.696684"], ["updated_at", "2017-11-23 23:42:04.696684"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:42:04.698522"], ["updated_at", "2017-11-23 23:42:04.698522"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 73], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 73], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 73], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:42:04.708203"], ["updated_at", "2017-11-23 23:42:04.708203"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 74], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 74], ["created_at", "2017-11-23 23:42:04.711325"], ["updated_at", "2017-11-23 23:42:04.711325"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:42:04.713020"], ["updated_at", "2017-11-23 23:42:04.713020"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 75], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 75], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 75], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 75], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 75], ["line_item_id", 100500], ["created_at", "2017-11-23 23:42:04.719932"], ["updated_at", "2017-11-23 23:42:04.719932"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 71], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:42:32.590399"], ["updated_at", "2017-11-23 23:42:32.590399"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 76], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 76], ["line_item_id", 1], ["created_at", "2017-11-23 23:42:32.598873"], ["updated_at", "2017-11-23 23:42:32.598873"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 76], ["line_item_id", 1], ["created_at", "2017-11-23 23:42:32.602679"], ["updated_at", "2017-11-23 23:42:32.602679"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:42:32.608945"], ["updated_at", "2017-11-23 23:42:32.608945"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 77], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 77], ["line_item_id", 1], ["created_at", "2017-11-23 23:42:32.612247"], ["updated_at", "2017-11-23 23:42:32.612247"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:42:32.614256"], ["updated_at", "2017-11-23 23:42:32.614256"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 78], ["line_item_id", 1], ["created_at", "2017-11-23 23:42:32.616211"], ["updated_at", "2017-11-23 23:42:32.616211"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:42:32.621901"], ["updated_at", "2017-11-23 23:42:32.621901"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 79], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 79], ["line_item_id", 1], ["created_at", "2017-11-23 23:42:32.624988"], ["updated_at", "2017-11-23 23:42:32.624988"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:42:32.627085"], ["updated_at", "2017-11-23 23:42:32.627085"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 80], ["created_at", "2017-11-23 23:42:32.628847"], ["updated_at", "2017-11-23 23:42:32.628847"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:42:32.636826"], ["updated_at", "2017-11-23 23:42:32.636826"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 81], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 81], ["line_item_id", 1], ["created_at", "2017-11-23 23:42:32.640272"], ["updated_at", "2017-11-23 23:42:32.640272"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 81], ["created_at", "2017-11-23 23:42:32.642567"], ["updated_at", "2017-11-23 23:42:32.642567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:42:32.648424"], ["updated_at", "2017-11-23 23:42:32.648424"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 82], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 82], ["line_item_id", 1], ["created_at", "2017-11-23 23:42:32.651558"], ["updated_at", "2017-11-23 23:42:32.651558"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 82], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 82], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:42:32.669204"], ["updated_at", "2017-11-23 23:42:32.669204"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 83], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 83], ["line_item_id", 1], ["created_at", "2017-11-23 23:42:32.672748"], ["updated_at", "2017-11-23 23:42:32.672748"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:42:32.675148"], ["updated_at", "2017-11-23 23:42:32.675148"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 84], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:42:32.682341"], ["updated_at", "2017-11-23 23:42:32.682341"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 85], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 85], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 85], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 85], ["line_item_id", 1], ["created_at", "2017-11-23 23:42:32.687476"], ["updated_at", "2017-11-23 23:42:32.687476"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 85], ["id", 83], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 83], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:42:32.705192"], ["updated_at", "2017-11-23 23:42:32.705192"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 86], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 86], ["created_at", "2017-11-23 23:42:32.708447"], ["updated_at", "2017-11-23 23:42:32.708447"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:42:32.710323"], ["updated_at", "2017-11-23 23:42:32.710323"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 87], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 87], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 87], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 87], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:42:32.723391"], ["updated_at", "2017-11-23 23:42:32.723391"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 88], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 88], ["created_at", "2017-11-23 23:42:32.726560"], ["updated_at", "2017-11-23 23:42:32.726560"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:42:32.729729"], ["updated_at", "2017-11-23 23:42:32.729729"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 89], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 89], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 89], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 89], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 89], ["line_item_id", 100500], ["created_at", "2017-11-23 23:42:32.737973"], ["updated_at", "2017-11-23 23:42:32.737973"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 85], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:43:00.117086"], ["updated_at", "2017-11-23 23:43:00.117086"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 90], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 90], ["line_item_id", 1], ["created_at", "2017-11-23 23:43:00.125188"], ["updated_at", "2017-11-23 23:43:00.125188"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 90], ["line_item_id", 1], ["created_at", "2017-11-23 23:43:00.129031"], ["updated_at", "2017-11-23 23:43:00.129031"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:43:00.135473"], ["updated_at", "2017-11-23 23:43:00.135473"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 91], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 91], ["line_item_id", 1], ["created_at", "2017-11-23 23:43:00.138738"], ["updated_at", "2017-11-23 23:43:00.138738"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:43:00.140781"], ["updated_at", "2017-11-23 23:43:00.140781"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 92], ["line_item_id", 1], ["created_at", "2017-11-23 23:43:00.142835"], ["updated_at", "2017-11-23 23:43:00.142835"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:43:00.148790"], ["updated_at", "2017-11-23 23:43:00.148790"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 93], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 93], ["line_item_id", 1], ["created_at", "2017-11-23 23:43:00.152100"], ["updated_at", "2017-11-23 23:43:00.152100"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:43:00.154675"], ["updated_at", "2017-11-23 23:43:00.154675"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 94], ["created_at", "2017-11-23 23:43:00.156349"], ["updated_at", "2017-11-23 23:43:00.156349"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:43:00.164159"], ["updated_at", "2017-11-23 23:43:00.164159"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 95], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 95], ["line_item_id", 1], ["created_at", "2017-11-23 23:43:00.167540"], ["updated_at", "2017-11-23 23:43:00.167540"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 95], ["created_at", "2017-11-23 23:43:00.169381"], ["updated_at", "2017-11-23 23:43:00.169381"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:43:00.174753"], ["updated_at", "2017-11-23 23:43:00.174753"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 96], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 96], ["line_item_id", 1], ["created_at", "2017-11-23 23:43:00.177933"], ["updated_at", "2017-11-23 23:43:00.177933"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 96], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 96], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:43:00.195274"], ["updated_at", "2017-11-23 23:43:00.195274"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 97], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 97], ["line_item_id", 1], ["created_at", "2017-11-23 23:43:00.198631"], ["updated_at", "2017-11-23 23:43:00.198631"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:43:00.200463"], ["updated_at", "2017-11-23 23:43:00.200463"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 98], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:43:00.207381"], ["updated_at", "2017-11-23 23:43:00.207381"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 99], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 99], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 99], ["line_item_id", 1], ["created_at", "2017-11-23 23:43:00.212183"], ["updated_at", "2017-11-23 23:43:00.212183"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 99], ["id", 97], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 97], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:43:00.228905"], ["updated_at", "2017-11-23 23:43:00.228905"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 100], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 100], ["created_at", "2017-11-23 23:43:00.232019"], ["updated_at", "2017-11-23 23:43:00.232019"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:43:00.233788"], ["updated_at", "2017-11-23 23:43:00.233788"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 101], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 101], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 101], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:43:00.247046"], ["updated_at", "2017-11-23 23:43:00.247046"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 102], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 102], ["created_at", "2017-11-23 23:43:00.250081"], ["updated_at", "2017-11-23 23:43:00.250081"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:43:00.251697"], ["updated_at", "2017-11-23 23:43:00.251697"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 103], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.4ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 103], ["LIMIT", 1]]
  [1m[36mPayment Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 103], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 103], ["line_item_id", 100500], ["created_at", "2017-11-23 23:43:00.261101"], ["updated_at", "2017-11-23 23:43:00.261101"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 99], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:43:23.711143"], ["updated_at", "2017-11-23 23:43:23.711143"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 104], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 104], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 104], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 104], ["line_item_id", 1], ["created_at", "2017-11-23 23:43:23.735455"], ["updated_at", "2017-11-23 23:43:23.735455"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 104], ["id", 101], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 101], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:43:23.753907"], ["updated_at", "2017-11-23 23:43:23.753907"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 105], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 105], ["created_at", "2017-11-23 23:43:23.757858"], ["updated_at", "2017-11-23 23:43:23.757858"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:43:23.759870"], ["updated_at", "2017-11-23 23:43:23.759870"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 106], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 106], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 106], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 106], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:43:23.777613"], ["updated_at", "2017-11-23 23:43:23.777613"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 107], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (22.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 107], ["created_at", "2017-11-23 23:43:23.781039"], ["updated_at", "2017-11-23 23:43:23.781039"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:43:23.805635"], ["updated_at", "2017-11-23 23:43:23.805635"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 108], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 108], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 108], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 108], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 108], ["line_item_id", 100500], ["created_at", "2017-11-23 23:43:23.813401"], ["updated_at", "2017-11-23 23:43:23.813401"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 103], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:44:59.821726"], ["updated_at", "2017-11-23 23:44:59.821726"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:44:59.834263"], ["updated_at", "2017-11-23 23:44:59.834263"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 110], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 110], ["created_at", "2017-11-23 23:44:59.846037"], ["updated_at", "2017-11-23 23:44:59.846037"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:44:59.848028"], ["updated_at", "2017-11-23 23:44:59.848028"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:44:59.852583"], ["updated_at", "2017-11-23 23:44:59.852583"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 112], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 112], ["created_at", "2017-11-23 23:44:59.855727"], ["updated_at", "2017-11-23 23:44:59.855727"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:44:59.857355"], ["updated_at", "2017-11-23 23:44:59.857355"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:45:12.199285"], ["updated_at", "2017-11-23 23:45:12.199285"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 114], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 114], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 114], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 114], ["line_item_id", 1], ["created_at", "2017-11-23 23:45:12.222672"], ["updated_at", "2017-11-23 23:45:12.222672"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 114], ["id", 107], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 107], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:45:12.237444"], ["updated_at", "2017-11-23 23:45:12.237444"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 115], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 115], ["created_at", "2017-11-23 23:45:12.240714"], ["updated_at", "2017-11-23 23:45:12.240714"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:45:12.242400"], ["updated_at", "2017-11-23 23:45:12.242400"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 116], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 116], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 116], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 116], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:45:12.260163"], ["updated_at", "2017-11-23 23:45:12.260163"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 117], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 117], ["created_at", "2017-11-23 23:45:12.263218"], ["updated_at", "2017-11-23 23:45:12.263218"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:45:12.264761"], ["updated_at", "2017-11-23 23:45:12.264761"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 118], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 118], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 118], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 118], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 118], ["line_item_id", 100500], ["created_at", "2017-11-23 23:45:12.271016"], ["updated_at", "2017-11-23 23:45:12.271016"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 109], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:46:10.548421"], ["updated_at", "2017-11-23 23:46:10.548421"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 119], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 119], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 119], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 119], ["line_item_id", 1], ["created_at", "2017-11-23 23:46:10.572231"], ["updated_at", "2017-11-23 23:46:10.572231"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 119], ["id", 111], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 111], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:49:13.871628"], ["updated_at", "2017-11-23 23:49:13.871628"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 120], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 120], ["line_item_id", 1], ["created_at", "2017-11-23 23:49:13.879649"], ["updated_at", "2017-11-23 23:49:13.879649"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 120], ["line_item_id", 1], ["created_at", "2017-11-23 23:49:13.883301"], ["updated_at", "2017-11-23 23:49:13.883301"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:49:13.889402"], ["updated_at", "2017-11-23 23:49:13.889402"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 121], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 121], ["line_item_id", 1], ["created_at", "2017-11-23 23:49:13.892902"], ["updated_at", "2017-11-23 23:49:13.892902"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:49:13.895318"], ["updated_at", "2017-11-23 23:49:13.895318"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 122], ["line_item_id", 1], ["created_at", "2017-11-23 23:49:13.897266"], ["updated_at", "2017-11-23 23:49:13.897266"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:49:13.903082"], ["updated_at", "2017-11-23 23:49:13.903082"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 123], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 123], ["line_item_id", 1], ["created_at", "2017-11-23 23:49:13.906025"], ["updated_at", "2017-11-23 23:49:13.906025"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:49:13.907911"], ["updated_at", "2017-11-23 23:49:13.907911"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 124], ["created_at", "2017-11-23 23:49:13.909576"], ["updated_at", "2017-11-23 23:49:13.909576"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:49:13.917009"], ["updated_at", "2017-11-23 23:49:13.917009"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 125], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 125], ["line_item_id", 1], ["created_at", "2017-11-23 23:49:13.920609"], ["updated_at", "2017-11-23 23:49:13.920609"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 125], ["created_at", "2017-11-23 23:49:13.922605"], ["updated_at", "2017-11-23 23:49:13.922605"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:49:13.928235"], ["updated_at", "2017-11-23 23:49:13.928235"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 126], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 126], ["line_item_id", 1], ["created_at", "2017-11-23 23:49:13.931393"], ["updated_at", "2017-11-23 23:49:13.931393"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 126], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 126], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:49:13.949610"], ["updated_at", "2017-11-23 23:49:13.949610"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 127], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 127], ["line_item_id", 1], ["created_at", "2017-11-23 23:49:13.953222"], ["updated_at", "2017-11-23 23:49:13.953222"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:49:13.955334"], ["updated_at", "2017-11-23 23:49:13.955334"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 128], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:49:13.962494"], ["updated_at", "2017-11-23 23:49:13.962494"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 129], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 129], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 129], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 129], ["line_item_id", 1], ["created_at", "2017-11-23 23:49:13.967375"], ["updated_at", "2017-11-23 23:49:13.967375"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 129], ["id", 122], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 122], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:49:13.994958"], ["updated_at", "2017-11-23 23:49:13.994958"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 130], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 130], ["created_at", "2017-11-23 23:49:13.998021"], ["updated_at", "2017-11-23 23:49:13.998021"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:49:13.999737"], ["updated_at", "2017-11-23 23:49:13.999737"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 131], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 131], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 131], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 131], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:49:14.020836"], ["updated_at", "2017-11-23 23:49:14.020836"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 132], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 132], ["created_at", "2017-11-23 23:49:14.023998"], ["updated_at", "2017-11-23 23:49:14.023998"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:49:14.025867"], ["updated_at", "2017-11-23 23:49:14.025867"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 133], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 133], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 133], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 133], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 133], ["line_item_id", 100500], ["created_at", "2017-11-23 23:49:14.032981"], ["updated_at", "2017-11-23 23:49:14.032981"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 124], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:49:29.422169"], ["updated_at", "2017-11-23 23:49:29.422169"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 134], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.5ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 134], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 134], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 134], ["line_item_id", 1], ["created_at", "2017-11-23 23:49:29.446702"], ["updated_at", "2017-11-23 23:49:29.446702"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 134], ["id", 126], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 126], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:49:29.455357"], ["updated_at", "2017-11-23 23:49:29.455357"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 135], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 135], ["created_at", "2017-11-23 23:49:29.458583"], ["updated_at", "2017-11-23 23:49:29.458583"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:49:29.460151"], ["updated_at", "2017-11-23 23:49:29.460151"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 136], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 136], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 136], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 136], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:49:29.487766"], ["updated_at", "2017-11-23 23:49:29.487766"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 137], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 137], ["created_at", "2017-11-23 23:49:29.490704"], ["updated_at", "2017-11-23 23:49:29.490704"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:49:29.492216"], ["updated_at", "2017-11-23 23:49:29.492216"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 138], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 138], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 138], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 138], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 138], ["line_item_id", 100500], ["created_at", "2017-11-23 23:49:29.498797"], ["updated_at", "2017-11-23 23:49:29.498797"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 128], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:50:07.418302"], ["updated_at", "2017-11-23 23:50:07.418302"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 139], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 139], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 139], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 139], ["line_item_id", 1], ["created_at", "2017-11-23 23:50:07.442189"], ["updated_at", "2017-11-23 23:50:07.442189"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 139], ["id", 130], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 130], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:50:07.452296"], ["updated_at", "2017-11-23 23:50:07.452296"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 140], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 140], ["created_at", "2017-11-23 23:50:07.455377"], ["updated_at", "2017-11-23 23:50:07.455377"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 140], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 140], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" IS NULL LIMIT $3[0m  [["service_id", 140], ["id", 131], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL AND ("payments"."id" != $1) LIMIT $2[0m  [["id", 131], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:50:07.468054"], ["updated_at", "2017-11-23 23:50:07.468054"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 141], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 141], ["created_at", "2017-11-23 23:50:07.471317"], ["updated_at", "2017-11-23 23:50:07.471317"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:50:07.473148"], ["updated_at", "2017-11-23 23:50:07.473148"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 142], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 142], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 142], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 142], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 142], ["line_item_id", 100500], ["created_at", "2017-11-23 23:50:07.483270"], ["updated_at", "2017-11-23 23:50:07.483270"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 132], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:56:39.137649"], ["updated_at", "2017-11-23 23:56:39.137649"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 143], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 143], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 143], ["line_item_id", 1], ["created_at", "2017-11-23 23:56:39.164786"], ["updated_at", "2017-11-23 23:56:39.164786"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 143], ["id", 134], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 134], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:56:39.176667"], ["updated_at", "2017-11-23 23:56:39.176667"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 144], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 144], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 144], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 144], ["line_item_id", 1], ["created_at", "2017-11-23 23:56:39.183773"], ["updated_at", "2017-11-23 23:56:39.183773"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 144], ["id", 135], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 135], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-23 23:56:39.187577"], ["id", 135]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:56:39.194320"], ["updated_at", "2017-11-23 23:56:39.194320"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 145], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 145], ["created_at", "2017-11-23 23:56:39.197420"], ["updated_at", "2017-11-23 23:56:39.197420"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:56:39.199180"], ["updated_at", "2017-11-23 23:56:39.199180"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 146], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 146], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 146], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 146], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 146], ["line_item_id", 100500], ["created_at", "2017-11-23 23:56:39.211563"], ["updated_at", "2017-11-23 23:56:39.211563"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:56:51.686783"], ["updated_at", "2017-11-23 23:56:51.686783"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 147], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 147], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 147], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 147], ["line_item_id", 1], ["created_at", "2017-11-23 23:56:51.706774"], ["updated_at", "2017-11-23 23:56:51.706774"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 147], ["id", 138], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 138], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:56:51.715725"], ["updated_at", "2017-11-23 23:56:51.715725"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 148], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 148], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 148], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 148], ["line_item_id", 1], ["created_at", "2017-11-23 23:56:51.720706"], ["updated_at", "2017-11-23 23:56:51.720706"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 148], ["id", 139], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 139], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-23 23:56:51.724809"], ["id", 139]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:56:51.732548"], ["updated_at", "2017-11-23 23:56:51.732548"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 149], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 149], ["created_at", "2017-11-23 23:56:51.735811"], ["updated_at", "2017-11-23 23:56:51.735811"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:56:51.737431"], ["updated_at", "2017-11-23 23:56:51.737431"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 150], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 150], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 150], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 150], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 150], ["line_item_id", 100500], ["created_at", "2017-11-23 23:56:51.748220"], ["updated_at", "2017-11-23 23:56:51.748220"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 140], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:57:36.977465"], ["updated_at", "2017-11-23 23:57:36.977465"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 151], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 151], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 151], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 151], ["line_item_id", 1], ["created_at", "2017-11-23 23:57:37.000304"], ["updated_at", "2017-11-23 23:57:37.000304"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 151], ["id", 142], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 142], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:57:37.011528"], ["updated_at", "2017-11-23 23:57:37.011528"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 152], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 152], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 152], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 152], ["line_item_id", 1], ["created_at", "2017-11-23 23:57:37.017491"], ["updated_at", "2017-11-23 23:57:37.017491"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 152], ["id", 143], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 143], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-23 23:57:37.023387"], ["id", 143]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:57:37.030972"], ["updated_at", "2017-11-23 23:57:37.030972"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 153], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 153], ["created_at", "2017-11-23 23:57:37.034402"], ["updated_at", "2017-11-23 23:57:37.034402"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:57:37.036178"], ["updated_at", "2017-11-23 23:57:37.036178"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 154], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 154], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 154], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 154], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 154], ["line_item_id", 100500], ["created_at", "2017-11-23 23:57:37.047217"], ["updated_at", "2017-11-23 23:57:37.047217"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 144], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:10.885430"], ["updated_at", "2017-11-23 23:58:10.885430"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 155], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 155], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:10.892857"], ["updated_at", "2017-11-23 23:58:10.892857"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 155], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:10.895717"], ["updated_at", "2017-11-23 23:58:10.895717"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:10.901307"], ["updated_at", "2017-11-23 23:58:10.901307"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 156], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 156], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:10.904379"], ["updated_at", "2017-11-23 23:58:10.904379"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:10.906337"], ["updated_at", "2017-11-23 23:58:10.906337"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 157], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:10.907806"], ["updated_at", "2017-11-23 23:58:10.907806"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:10.913377"], ["updated_at", "2017-11-23 23:58:10.913377"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 158], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 158], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:10.916670"], ["updated_at", "2017-11-23 23:58:10.916670"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:10.918507"], ["updated_at", "2017-11-23 23:58:10.918507"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 159], ["created_at", "2017-11-23 23:58:10.919912"], ["updated_at", "2017-11-23 23:58:10.919912"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:10.925543"], ["updated_at", "2017-11-23 23:58:10.925543"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 160], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 160], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:10.930139"], ["updated_at", "2017-11-23 23:58:10.930139"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 160], ["created_at", "2017-11-23 23:58:10.932173"], ["updated_at", "2017-11-23 23:58:10.932173"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:10.937418"], ["updated_at", "2017-11-23 23:58:10.937418"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 161], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 161], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:10.940557"], ["updated_at", "2017-11-23 23:58:10.940557"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 161], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 161], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:10.956309"], ["updated_at", "2017-11-23 23:58:10.956309"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 162], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 162], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:10.961104"], ["updated_at", "2017-11-23 23:58:10.961104"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:10.963186"], ["updated_at", "2017-11-23 23:58:10.963186"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 163], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:10.971768"], ["updated_at", "2017-11-23 23:58:10.971768"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 164], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 164], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 164], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 164], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:10.980506"], ["updated_at", "2017-11-23 23:58:10.980506"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 164], ["id", 156], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 156], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:10.988946"], ["updated_at", "2017-11-23 23:58:10.988946"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.6ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 165], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 165], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 165], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 165], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:10.995054"], ["updated_at", "2017-11-23 23:58:10.995054"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 165], ["id", 157], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 157], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-23 23:58:10.998099"], ["id", 157]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:11.003852"], ["updated_at", "2017-11-23 23:58:11.003852"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 166], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 166], ["created_at", "2017-11-23 23:58:11.007078"], ["updated_at", "2017-11-23 23:58:11.007078"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 166], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 166], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 166], ["id", 158], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 158], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-23 23:58:11.011677"], ["id", 158]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 158], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:21.142466"], ["updated_at", "2017-11-23 23:58:21.142466"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 167], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 167], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:21.150551"], ["updated_at", "2017-11-23 23:58:21.150551"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 167], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:21.154521"], ["updated_at", "2017-11-23 23:58:21.154521"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:21.159939"], ["updated_at", "2017-11-23 23:58:21.159939"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 168], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 168], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:21.163074"], ["updated_at", "2017-11-23 23:58:21.163074"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:21.165233"], ["updated_at", "2017-11-23 23:58:21.165233"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 169], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:21.167203"], ["updated_at", "2017-11-23 23:58:21.167203"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:21.172420"], ["updated_at", "2017-11-23 23:58:21.172420"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 170], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 170], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:21.175874"], ["updated_at", "2017-11-23 23:58:21.175874"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:21.178016"], ["updated_at", "2017-11-23 23:58:21.178016"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 171], ["created_at", "2017-11-23 23:58:21.179754"], ["updated_at", "2017-11-23 23:58:21.179754"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:21.185722"], ["updated_at", "2017-11-23 23:58:21.185722"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 172], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 172], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:21.189746"], ["updated_at", "2017-11-23 23:58:21.189746"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 172], ["created_at", "2017-11-23 23:58:21.191692"], ["updated_at", "2017-11-23 23:58:21.191692"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:21.196502"], ["updated_at", "2017-11-23 23:58:21.196502"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 173], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 173], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:21.199721"], ["updated_at", "2017-11-23 23:58:21.199721"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 173], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 173], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:21.215186"], ["updated_at", "2017-11-23 23:58:21.215186"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 174], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 174], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:21.219771"], ["updated_at", "2017-11-23 23:58:21.219771"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:21.221869"], ["updated_at", "2017-11-23 23:58:21.221869"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 175], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:21.229420"], ["updated_at", "2017-11-23 23:58:21.229420"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 176], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 176], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 176], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 176], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:21.234454"], ["updated_at", "2017-11-23 23:58:21.234454"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 176], ["id", 169], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 169], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:21.242672"], ["updated_at", "2017-11-23 23:58:21.242672"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 177], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 177], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 177], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 177], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:21.247929"], ["updated_at", "2017-11-23 23:58:21.247929"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 177], ["id", 170], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 170], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-23 23:58:21.252251"], ["id", 170]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:21.258061"], ["updated_at", "2017-11-23 23:58:21.258061"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 178], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 178], ["created_at", "2017-11-23 23:58:21.261028"], ["updated_at", "2017-11-23 23:58:21.261028"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 178], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 178], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 178], ["id", 171], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 171], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-23 23:58:21.265730"], ["id", 171]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:27.044140"], ["updated_at", "2017-11-23 23:58:27.044140"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 179], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 179], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:27.051575"], ["updated_at", "2017-11-23 23:58:27.051575"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 179], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:27.054448"], ["updated_at", "2017-11-23 23:58:27.054448"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:27.059467"], ["updated_at", "2017-11-23 23:58:27.059467"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 180], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 180], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:27.062543"], ["updated_at", "2017-11-23 23:58:27.062543"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:27.064300"], ["updated_at", "2017-11-23 23:58:27.064300"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 181], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:27.065782"], ["updated_at", "2017-11-23 23:58:27.065782"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:27.070757"], ["updated_at", "2017-11-23 23:58:27.070757"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 182], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 182], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:27.073778"], ["updated_at", "2017-11-23 23:58:27.073778"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:27.075555"], ["updated_at", "2017-11-23 23:58:27.075555"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 183], ["created_at", "2017-11-23 23:58:27.076918"], ["updated_at", "2017-11-23 23:58:27.076918"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:27.081766"], ["updated_at", "2017-11-23 23:58:27.081766"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 184], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 184], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:27.085119"], ["updated_at", "2017-11-23 23:58:27.085119"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 184], ["created_at", "2017-11-23 23:58:27.088444"], ["updated_at", "2017-11-23 23:58:27.088444"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:27.093523"], ["updated_at", "2017-11-23 23:58:27.093523"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 185], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 185], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:27.096584"], ["updated_at", "2017-11-23 23:58:27.096584"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 185], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 185], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:27.110772"], ["updated_at", "2017-11-23 23:58:27.110772"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 186], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 186], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:27.113818"], ["updated_at", "2017-11-23 23:58:27.113818"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:27.115657"], ["updated_at", "2017-11-23 23:58:27.115657"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 187], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:27.124692"], ["updated_at", "2017-11-23 23:58:27.124692"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 188], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 188], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 188], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 188], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:27.129525"], ["updated_at", "2017-11-23 23:58:27.129525"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 188], ["id", 182], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 182], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:27.137181"], ["updated_at", "2017-11-23 23:58:27.137181"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 189], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 189], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 189], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 189], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:27.141639"], ["updated_at", "2017-11-23 23:58:27.141639"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 189], ["id", 183], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 183], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-23 23:58:27.144409"], ["id", 183]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:27.151304"], ["updated_at", "2017-11-23 23:58:27.151304"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 190], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 190], ["created_at", "2017-11-23 23:58:27.154531"], ["updated_at", "2017-11-23 23:58:27.154531"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 190], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 190], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 190], ["id", 184], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 184], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-23 23:58:27.159133"], ["id", 184]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 184], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:42.758669"], ["updated_at", "2017-11-23 23:58:42.758669"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 191], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 191], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:42.766510"], ["updated_at", "2017-11-23 23:58:42.766510"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 191], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:42.769708"], ["updated_at", "2017-11-23 23:58:42.769708"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:42.775229"], ["updated_at", "2017-11-23 23:58:42.775229"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 192], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 192], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:42.778723"], ["updated_at", "2017-11-23 23:58:42.778723"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:42.780804"], ["updated_at", "2017-11-23 23:58:42.780804"]]
  [1m[35m (2.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 193], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:42.785831"], ["updated_at", "2017-11-23 23:58:42.785831"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:42.791200"], ["updated_at", "2017-11-23 23:58:42.791200"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 194], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 194], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:42.794621"], ["updated_at", "2017-11-23 23:58:42.794621"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:42.796538"], ["updated_at", "2017-11-23 23:58:42.796538"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 195], ["created_at", "2017-11-23 23:58:42.798119"], ["updated_at", "2017-11-23 23:58:42.798119"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:42.805553"], ["updated_at", "2017-11-23 23:58:42.805553"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 196], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 196], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:42.809441"], ["updated_at", "2017-11-23 23:58:42.809441"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 196], ["created_at", "2017-11-23 23:58:42.811585"], ["updated_at", "2017-11-23 23:58:42.811585"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:42.816298"], ["updated_at", "2017-11-23 23:58:42.816298"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 197], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 197], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:42.820624"], ["updated_at", "2017-11-23 23:58:42.820624"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 197], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 197], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:42.838479"], ["updated_at", "2017-11-23 23:58:42.838479"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 198], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 198], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:42.841546"], ["updated_at", "2017-11-23 23:58:42.841546"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:42.843261"], ["updated_at", "2017-11-23 23:58:42.843261"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 199], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:42.850538"], ["updated_at", "2017-11-23 23:58:42.850538"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 200], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 200], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 200], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 200], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:42.855437"], ["updated_at", "2017-11-23 23:58:42.855437"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 200], ["id", 195], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 195], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:42.863193"], ["updated_at", "2017-11-23 23:58:42.863193"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 201], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 201], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 201], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 201], ["line_item_id", 1], ["created_at", "2017-11-23 23:58:42.870190"], ["updated_at", "2017-11-23 23:58:42.870190"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 201], ["id", 196], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 196], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-23 23:58:42.873892"], ["id", 196]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-23 23:58:42.880600"], ["updated_at", "2017-11-23 23:58:42.880600"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 202], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 202], ["created_at", "2017-11-23 23:58:42.883740"], ["updated_at", "2017-11-23 23:58:42.883740"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 202], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 202], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 202], ["id", 197], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 197], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-23 23:58:42.888712"], ["id", 197]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 197], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:00:59.552291"], ["updated_at", "2017-11-24 00:00:59.552291"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 203], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 203], ["line_item_id", 1], ["created_at", "2017-11-24 00:00:59.559766"], ["updated_at", "2017-11-24 00:00:59.559766"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 203], ["line_item_id", 1], ["created_at", "2017-11-24 00:00:59.562598"], ["updated_at", "2017-11-24 00:00:59.562598"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:00:59.567848"], ["updated_at", "2017-11-24 00:00:59.567848"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 204], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 204], ["line_item_id", 1], ["created_at", "2017-11-24 00:00:59.570968"], ["updated_at", "2017-11-24 00:00:59.570968"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:00:59.572721"], ["updated_at", "2017-11-24 00:00:59.572721"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 205], ["line_item_id", 1], ["created_at", "2017-11-24 00:00:59.574241"], ["updated_at", "2017-11-24 00:00:59.574241"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:00:59.579604"], ["updated_at", "2017-11-24 00:00:59.579604"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 206], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 206], ["line_item_id", 1], ["created_at", "2017-11-24 00:00:59.582720"], ["updated_at", "2017-11-24 00:00:59.582720"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:00:59.584693"], ["updated_at", "2017-11-24 00:00:59.584693"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 207], ["created_at", "2017-11-24 00:00:59.586236"], ["updated_at", "2017-11-24 00:00:59.586236"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:00:59.591967"], ["updated_at", "2017-11-24 00:00:59.591967"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 208], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 208], ["line_item_id", 1], ["created_at", "2017-11-24 00:00:59.596467"], ["updated_at", "2017-11-24 00:00:59.596467"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 208], ["created_at", "2017-11-24 00:00:59.598529"], ["updated_at", "2017-11-24 00:00:59.598529"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:00:59.604115"], ["updated_at", "2017-11-24 00:00:59.604115"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 209], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 209], ["line_item_id", 1], ["created_at", "2017-11-24 00:00:59.607175"], ["updated_at", "2017-11-24 00:00:59.607175"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 209], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 209], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:00:59.625882"], ["updated_at", "2017-11-24 00:00:59.625882"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 210], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 210], ["line_item_id", 1], ["created_at", "2017-11-24 00:00:59.629906"], ["updated_at", "2017-11-24 00:00:59.629906"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:00:59.632009"], ["updated_at", "2017-11-24 00:00:59.632009"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 211], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:00:59.640646"], ["updated_at", "2017-11-24 00:00:59.640646"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 212], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 212], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 212], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 212], ["line_item_id", 1], ["created_at", "2017-11-24 00:00:59.645790"], ["updated_at", "2017-11-24 00:00:59.645790"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 212], ["id", 208], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 208], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:00:59.655583"], ["updated_at", "2017-11-24 00:00:59.655583"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 213], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 213], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 213], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 213], ["line_item_id", 1], ["created_at", "2017-11-24 00:00:59.662367"], ["updated_at", "2017-11-24 00:00:59.662367"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 213], ["id", 209], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 209], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 00:00:59.665210"], ["id", 209]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:00:59.671408"], ["updated_at", "2017-11-24 00:00:59.671408"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 214], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 214], ["created_at", "2017-11-24 00:00:59.674476"], ["updated_at", "2017-11-24 00:00:59.674476"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 214], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 214], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 214], ["id", 210], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 210], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 00:00:59.680060"], ["id", 210]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 210], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:37:44.074289"], ["updated_at", "2017-11-24 00:37:44.074289"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 215], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 215], ["created_at", "2017-11-24 00:37:44.085636"], ["updated_at", "2017-11-24 00:37:44.085636"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:39:14.110057"], ["updated_at", "2017-11-24 00:39:14.110057"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 216], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 216], ["created_at", "2017-11-24 00:39:14.123474"], ["updated_at", "2017-11-24 00:39:14.123474"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:39:30.875328"], ["updated_at", "2017-11-24 00:39:30.875328"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 217], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 217], ["created_at", "2017-11-24 00:39:30.888022"], ["updated_at", "2017-11-24 00:39:30.888022"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:40:11.536746"], ["updated_at", "2017-11-24 00:40:11.536746"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 218], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 218], ["created_at", "2017-11-24 00:40:11.550344"], ["updated_at", "2017-11-24 00:40:11.550344"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:40:21.041458"], ["updated_at", "2017-11-24 00:40:21.041458"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 219], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 219], ["line_item_id", 1], ["created_at", "2017-11-24 00:40:21.049611"], ["updated_at", "2017-11-24 00:40:21.049611"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 219], ["line_item_id", 1], ["created_at", "2017-11-24 00:40:21.053150"], ["updated_at", "2017-11-24 00:40:21.053150"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:40:21.058672"], ["updated_at", "2017-11-24 00:40:21.058672"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 220], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 220], ["line_item_id", 1], ["created_at", "2017-11-24 00:40:21.061923"], ["updated_at", "2017-11-24 00:40:21.061923"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:40:21.064051"], ["updated_at", "2017-11-24 00:40:21.064051"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 221], ["line_item_id", 1], ["created_at", "2017-11-24 00:40:21.065826"], ["updated_at", "2017-11-24 00:40:21.065826"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:40:21.071632"], ["updated_at", "2017-11-24 00:40:21.071632"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 222], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 222], ["line_item_id", 1], ["created_at", "2017-11-24 00:40:21.075008"], ["updated_at", "2017-11-24 00:40:21.075008"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:40:21.077482"], ["updated_at", "2017-11-24 00:40:21.077482"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 223], ["created_at", "2017-11-24 00:40:21.079321"], ["updated_at", "2017-11-24 00:40:21.079321"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:40:21.087341"], ["updated_at", "2017-11-24 00:40:21.087341"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 224], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 224], ["line_item_id", 1], ["created_at", "2017-11-24 00:40:21.091019"], ["updated_at", "2017-11-24 00:40:21.091019"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 224], ["created_at", "2017-11-24 00:40:21.093014"], ["updated_at", "2017-11-24 00:40:21.093014"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:40:21.098289"], ["updated_at", "2017-11-24 00:40:21.098289"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 225], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 225], ["line_item_id", 1], ["created_at", "2017-11-24 00:40:21.101356"], ["updated_at", "2017-11-24 00:40:21.101356"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 225], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 225], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:40:21.125078"], ["updated_at", "2017-11-24 00:40:21.125078"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 226], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 226], ["line_item_id", 1], ["created_at", "2017-11-24 00:40:21.129020"], ["updated_at", "2017-11-24 00:40:21.129020"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:40:21.131397"], ["updated_at", "2017-11-24 00:40:21.131397"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 227], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:40:21.139896"], ["updated_at", "2017-11-24 00:40:21.139896"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 228], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 228], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 228], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 228], ["line_item_id", 1], ["created_at", "2017-11-24 00:40:21.145349"], ["updated_at", "2017-11-24 00:40:21.145349"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 228], ["id", 225], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 225], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:40:21.155687"], ["updated_at", "2017-11-24 00:40:21.155687"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 229], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 229], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 229], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 229], ["line_item_id", 1], ["created_at", "2017-11-24 00:40:21.160378"], ["updated_at", "2017-11-24 00:40:21.160378"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 229], ["id", 226], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 226], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 00:40:21.163579"], ["id", 226]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:40:21.169646"], ["updated_at", "2017-11-24 00:40:21.169646"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 230], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 230], ["created_at", "2017-11-24 00:40:21.172697"], ["updated_at", "2017-11-24 00:40:21.172697"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 230], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 230], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 230], ["id", 227], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 227], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 00:40:21.178655"], ["id", 227]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 227], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:40:21.188620"], ["updated_at", "2017-11-24 00:40:21.188620"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 231], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 231], ["created_at", "2017-11-24 00:40:21.191843"], ["updated_at", "2017-11-24 00:40:21.191843"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:40:27.159623"], ["updated_at", "2017-11-24 00:40:27.159623"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 232], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 232], ["created_at", "2017-11-24 00:40:27.172820"], ["updated_at", "2017-11-24 00:40:27.172820"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:41:31.599715"], ["updated_at", "2017-11-24 00:41:31.599715"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 233], ["LIMIT", 1]]
  [1m[36mPayment Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 233], ["created_at", "2017-11-24 00:41:31.610989"], ["updated_at", "2017-11-24 00:41:31.610989"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:41:40.269235"], ["updated_at", "2017-11-24 00:41:40.269235"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 234], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 234], ["created_at", "2017-11-24 00:41:40.281646"], ["updated_at", "2017-11-24 00:41:40.281646"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 234], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 234], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 0], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 0], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 234], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 234], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:48:41.537032"], ["updated_at", "2017-11-24 00:48:41.537032"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 235], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 235], ["created_at", "2017-11-24 00:48:41.549198"], ["updated_at", "2017-11-24 00:48:41.549198"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 235], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 235], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 0], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 0], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 235], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 235], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 0], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 0], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (15.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (17.7ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.4ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (258.1ms)[0m  [1m[35mTRUNCATE TABLE "public"."services", "public"."payments", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:49:42.946288"], ["updated_at", "2017-11-24 00:49:42.946288"]]
  [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 00:49:42.965529"], ["updated_at", "2017-11-24 00:49:42.965529"]]
  [1m[35m (11.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 1], ["id", 1], ["line_item_id", 0], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 0], ["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 0], ["updated_at", "2017-11-24 00:49:43.020339"], ["id", 1]]
  [1m[35m (12.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (1.1ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 00:49:43.073610"], ["updated_at", "2017-11-24 00:49:43.073610"]]
  [1m[35m (4.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 1], ["id", 2], ["line_item_id", 2], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 2], ["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 2], ["updated_at", "2017-11-24 00:49:43.083375"], ["id", 2]]
  [1m[35m (5.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (51.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.1ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.2ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (262.2ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:51:04.873553"], ["updated_at", "2017-11-24 00:51:04.873553"]]
  [1m[35m (10.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 00:51:04.892940"], ["updated_at", "2017-11-24 00:51:04.892940"]]
  [1m[35m (13.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (49.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.0ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.0ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (262.3ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:51:15.909617"], ["updated_at", "2017-11-24 00:51:15.909617"]]
  [1m[35m (11.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 00:51:15.929912"], ["updated_at", "2017-11-24 00:51:15.929912"]]
  [1m[35m (13.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 1], ["id", 1], ["line_item_id", 0], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 0], ["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 0], ["updated_at", "2017-11-24 00:51:15.977373"], ["id", 1]]
  [1m[35m (10.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 00:51:16.027232"], ["updated_at", "2017-11-24 00:51:16.027232"]]
  [1m[35m (4.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 1], ["id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 1], ["updated_at", "2017-11-24 00:51:16.036858"], ["id", 2]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (41.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.1ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.2ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (262.1ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:53:22.286502"], ["updated_at", "2017-11-24 00:53:22.286502"]]
  [1m[35m (54.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 00:53:22.348604"], ["updated_at", "2017-11-24 00:53:22.348604"]]
  [1m[35m (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 1], ["id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 1], ["updated_at", "2017-11-24 00:53:22.391720"], ["id", 1]]
  [1m[35m (3.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 00:53:22.430825"], ["updated_at", "2017-11-24 00:53:22.430825"]]
  [1m[35m (9.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 1], ["id", 2], ["line_item_id", 0], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 0], ["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 0], ["updated_at", "2017-11-24 00:53:22.444888"], ["id", 2]]
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (50.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.0ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.1ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (251.8ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (7.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:54:20.471361"], ["updated_at", "2017-11-24 00:54:20.471361"]]
  [1m[35m (9.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 00:54:20.488420"], ["updated_at", "2017-11-24 00:54:20.488420"]]
  [1m[35m (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 1], ["id", 1], ["line_item_id", 0], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 0], ["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 0], ["updated_at", "2017-11-24 00:54:20.519821"], ["id", 1]]
  [1m[35m (4.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 00:54:20.548868"], ["updated_at", "2017-11-24 00:54:20.548868"]]
  [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 1], ["id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 1], ["updated_at", "2017-11-24 00:54:20.562104"], ["id", 2]]
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (22.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.0ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.1ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (262.7ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:58:48.299773"], ["updated_at", "2017-11-24 00:58:48.299773"]]
  [1m[35m (74.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 00:58:48.383655"], ["updated_at", "2017-11-24 00:58:48.383655"]]
  [1m[35m (12.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 1], ["id", 1], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 00:58:48.420681"], ["id", 1]]
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 00:58:48.456387"], ["updated_at", "2017-11-24 00:58:48.456387"]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 1], ["id", 2], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (68.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.8ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.0ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (224.6ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:59:51.374225"], ["updated_at", "2017-11-24 00:59:51.374225"]]
  [1m[35m (11.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 00:59:51.394103"], ["updated_at", "2017-11-24 00:59:51.394103"]]
  [1m[35m (13.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 00:59:51.411315"], ["updated_at", "2017-11-24 00:59:51.411315"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (16.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.1ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:59:51.700911"], ["updated_at", "2017-11-24 00:59:51.700911"]]
  [1m[35m (28.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 00:59:51.733740"], ["updated_at", "2017-11-24 00:59:51.733740"]]
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:59:51.742626"], ["updated_at", "2017-11-24 00:59:51.742626"]]
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 00:59:51.753509"], ["updated_at", "2017-11-24 00:59:51.753509"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.7ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:59:52.035182"], ["updated_at", "2017-11-24 00:59:52.035182"]]
  [1m[35m (9.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 00:59:52.054882"], ["updated_at", "2017-11-24 00:59:52.054882"]]
  [1m[35m (5.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:59:52.063751"], ["updated_at", "2017-11-24 00:59:52.063751"]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 2], ["created_at", "2017-11-24 00:59:52.074473"], ["updated_at", "2017-11-24 00:59:52.074473"]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (9.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (266.3ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:59:52.376214"], ["updated_at", "2017-11-24 00:59:52.376214"]]
  [1m[35m (28.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 00:59:52.409049"], ["updated_at", "2017-11-24 00:59:52.409049"]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 00:59:52.418126"], ["updated_at", "2017-11-24 00:59:52.418126"]]
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (9.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.2ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:59:52.708248"], ["updated_at", "2017-11-24 00:59:52.708248"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 00:59:52.719084"], ["updated_at", "2017-11-24 00:59:52.719084"]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mService Load (0.4ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (7.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (233.1ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:59:52.996481"], ["updated_at", "2017-11-24 00:59:52.996481"]]
  [1m[35m (27.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 00:59:53.029161"], ["updated_at", "2017-11-24 00:59:53.029161"]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:59:53.038205"], ["updated_at", "2017-11-24 00:59:53.038205"]]
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (288.3ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:59:53.363193"], ["updated_at", "2017-11-24 00:59:53.363193"]]
  [1m[35m (4.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 00:59:53.373848"], ["updated_at", "2017-11-24 00:59:53.373848"]]
  [1m[35m (5.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 1], ["id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.1ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (9.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:59:53.660399"], ["updated_at", "2017-11-24 00:59:53.660399"]]
  [1m[35m (28.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 00:59:53.694548"], ["updated_at", "2017-11-24 00:59:53.694548"]]
  [1m[35m (5.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 1], ["id", 1], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 00:59:53.703977"], ["id", 1]]
  [1m[35m (7.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.2ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:59:53.992597"], ["updated_at", "2017-11-24 00:59:53.992597"]]
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 00:59:54.003197"], ["updated_at", "2017-11-24 00:59:54.003197"]]
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 1], ["id", 1], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 00:59:54.015710"], ["id", 1]]
  [1m[35m (5.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (188.7ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 00:59:54.236381"], ["updated_at", "2017-11-24 00:59:54.236381"]]
  [1m[35m (28.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 00:59:54.268927"], ["updated_at", "2017-11-24 00:59:54.268927"]]
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 1], ["id", 1], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 00:59:54.298608"], ["id", 1]]
  [1m[35m (10.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 00:59:54.331009"], ["updated_at", "2017-11-24 00:59:54.331009"]]
  [1m[35m (10.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 1], ["id", 2], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:01:45.526519"], ["updated_at", "2017-11-24 01:01:45.526519"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 01:01:45.534962"], ["updated_at", "2017-11-24 01:01:45.534962"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 01:01:45.538895"], ["updated_at", "2017-11-24 01:01:45.538895"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:01:45.545009"], ["updated_at", "2017-11-24 01:01:45.545009"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 3], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 3], ["line_item_id", 1], ["created_at", "2017-11-24 01:01:45.548251"], ["updated_at", "2017-11-24 01:01:45.548251"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:01:45.550527"], ["updated_at", "2017-11-24 01:01:45.550527"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 4], ["line_item_id", 1], ["created_at", "2017-11-24 01:01:45.552492"], ["updated_at", "2017-11-24 01:01:45.552492"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:01:45.558116"], ["updated_at", "2017-11-24 01:01:45.558116"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 5], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 5], ["line_item_id", 1], ["created_at", "2017-11-24 01:01:45.561226"], ["updated_at", "2017-11-24 01:01:45.561226"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:01:45.563298"], ["updated_at", "2017-11-24 01:01:45.563298"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 6], ["created_at", "2017-11-24 01:01:45.564909"], ["updated_at", "2017-11-24 01:01:45.564909"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:01:45.573006"], ["updated_at", "2017-11-24 01:01:45.573006"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 7], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 7], ["line_item_id", 1], ["created_at", "2017-11-24 01:01:45.576995"], ["updated_at", "2017-11-24 01:01:45.576995"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 7], ["created_at", "2017-11-24 01:01:45.579453"], ["updated_at", "2017-11-24 01:01:45.579453"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:01:45.585193"], ["updated_at", "2017-11-24 01:01:45.585193"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 8], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 8], ["line_item_id", 1], ["created_at", "2017-11-24 01:01:45.588215"], ["updated_at", "2017-11-24 01:01:45.588215"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 8], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:01:45.606428"], ["updated_at", "2017-11-24 01:01:45.606428"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 9], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 9], ["line_item_id", 1], ["created_at", "2017-11-24 01:01:45.609779"], ["updated_at", "2017-11-24 01:01:45.609779"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:01:45.611739"], ["updated_at", "2017-11-24 01:01:45.611739"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 10], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:01:45.632124"], ["updated_at", "2017-11-24 01:01:45.632124"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 11], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 11], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 11], ["line_item_id", 1], ["created_at", "2017-11-24 01:01:45.638990"], ["updated_at", "2017-11-24 01:01:45.638990"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 11], ["id", 13], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:01:45.649367"], ["updated_at", "2017-11-24 01:01:45.649367"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 12], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:01:45.660255"], ["updated_at", "2017-11-24 01:01:45.660255"]]
  [1m[35m (12.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:03:26.115521"], ["updated_at", "2017-11-24 01:03:26.115521"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 14], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 14], ["line_item_id", 1], ["created_at", "2017-11-24 01:03:26.123165"], ["updated_at", "2017-11-24 01:03:26.123165"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 14], ["line_item_id", 1], ["created_at", "2017-11-24 01:03:26.125917"], ["updated_at", "2017-11-24 01:03:26.125917"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:03:26.131365"], ["updated_at", "2017-11-24 01:03:26.131365"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 15], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 15], ["line_item_id", 1], ["created_at", "2017-11-24 01:03:26.134494"], ["updated_at", "2017-11-24 01:03:26.134494"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:03:26.136302"], ["updated_at", "2017-11-24 01:03:26.136302"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 16], ["line_item_id", 1], ["created_at", "2017-11-24 01:03:26.137940"], ["updated_at", "2017-11-24 01:03:26.137940"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:03:26.144364"], ["updated_at", "2017-11-24 01:03:26.144364"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 17], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 17], ["line_item_id", 1], ["created_at", "2017-11-24 01:03:26.147767"], ["updated_at", "2017-11-24 01:03:26.147767"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:03:26.149917"], ["updated_at", "2017-11-24 01:03:26.149917"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 18], ["created_at", "2017-11-24 01:03:26.151537"], ["updated_at", "2017-11-24 01:03:26.151537"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:03:26.157935"], ["updated_at", "2017-11-24 01:03:26.157935"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 19], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 19], ["line_item_id", 1], ["created_at", "2017-11-24 01:03:26.162661"], ["updated_at", "2017-11-24 01:03:26.162661"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 19], ["created_at", "2017-11-24 01:03:26.164945"], ["updated_at", "2017-11-24 01:03:26.164945"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:03:26.171273"], ["updated_at", "2017-11-24 01:03:26.171273"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 20], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 20], ["line_item_id", 1], ["created_at", "2017-11-24 01:03:26.174474"], ["updated_at", "2017-11-24 01:03:26.174474"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 20], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:03:26.192528"], ["updated_at", "2017-11-24 01:03:26.192528"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 21], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 21], ["line_item_id", 1], ["created_at", "2017-11-24 01:03:26.196228"], ["updated_at", "2017-11-24 01:03:26.196228"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:03:26.198420"], ["updated_at", "2017-11-24 01:03:26.198420"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 22], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:03:26.218747"], ["updated_at", "2017-11-24 01:03:26.218747"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 23], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 23], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 23], ["line_item_id", 1], ["created_at", "2017-11-24 01:03:26.226186"], ["updated_at", "2017-11-24 01:03:26.226186"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 23], ["id", 24], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 24], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:03:26.236717"], ["updated_at", "2017-11-24 01:03:26.236717"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 24], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:03:26.244679"], ["updated_at", "2017-11-24 01:03:26.244679"]]
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 25], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:30.896696"], ["updated_at", "2017-11-24 01:06:30.896696"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 26], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 26], ["line_item_id", 1], ["created_at", "2017-11-24 01:06:30.905150"], ["updated_at", "2017-11-24 01:06:30.905150"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 26], ["line_item_id", 1], ["created_at", "2017-11-24 01:06:30.908807"], ["updated_at", "2017-11-24 01:06:30.908807"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:30.914748"], ["updated_at", "2017-11-24 01:06:30.914748"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 27], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 27], ["line_item_id", 1], ["created_at", "2017-11-24 01:06:30.917919"], ["updated_at", "2017-11-24 01:06:30.917919"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:30.919967"], ["updated_at", "2017-11-24 01:06:30.919967"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 28], ["line_item_id", 1], ["created_at", "2017-11-24 01:06:30.921744"], ["updated_at", "2017-11-24 01:06:30.921744"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:30.927988"], ["updated_at", "2017-11-24 01:06:30.927988"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 29], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 29], ["line_item_id", 1], ["created_at", "2017-11-24 01:06:30.931791"], ["updated_at", "2017-11-24 01:06:30.931791"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:30.934120"], ["updated_at", "2017-11-24 01:06:30.934120"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 30], ["created_at", "2017-11-24 01:06:30.935996"], ["updated_at", "2017-11-24 01:06:30.935996"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:30.943911"], ["updated_at", "2017-11-24 01:06:30.943911"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 31], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 31], ["line_item_id", 1], ["created_at", "2017-11-24 01:06:30.947271"], ["updated_at", "2017-11-24 01:06:30.947271"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 31], ["created_at", "2017-11-24 01:06:30.949216"], ["updated_at", "2017-11-24 01:06:30.949216"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:30.954756"], ["updated_at", "2017-11-24 01:06:30.954756"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 32], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 32], ["line_item_id", 1], ["created_at", "2017-11-24 01:06:30.957812"], ["updated_at", "2017-11-24 01:06:30.957812"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 32], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:30.976373"], ["updated_at", "2017-11-24 01:06:30.976373"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 33], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 33], ["line_item_id", 1], ["created_at", "2017-11-24 01:06:30.979596"], ["updated_at", "2017-11-24 01:06:30.979596"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:30.981534"], ["updated_at", "2017-11-24 01:06:30.981534"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 34], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:31.006554"], ["updated_at", "2017-11-24 01:06:31.006554"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 35], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 35], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 35], ["line_item_id", 1], ["created_at", "2017-11-24 01:06:31.011977"], ["updated_at", "2017-11-24 01:06:31.011977"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 35], ["id", 35], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 35], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:31.022206"], ["updated_at", "2017-11-24 01:06:31.022206"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 36], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:31.029953"], ["updated_at", "2017-11-24 01:06:31.029953"]]
  [1m[35m (4.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 37], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:42.845154"], ["updated_at", "2017-11-24 01:06:42.845154"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 38], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 38], ["line_item_id", 1], ["created_at", "2017-11-24 01:06:42.853886"], ["updated_at", "2017-11-24 01:06:42.853886"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 38], ["line_item_id", 1], ["created_at", "2017-11-24 01:06:42.857211"], ["updated_at", "2017-11-24 01:06:42.857211"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:42.865408"], ["updated_at", "2017-11-24 01:06:42.865408"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 39], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 39], ["line_item_id", 1], ["created_at", "2017-11-24 01:06:42.868907"], ["updated_at", "2017-11-24 01:06:42.868907"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:42.871418"], ["updated_at", "2017-11-24 01:06:42.871418"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 40], ["line_item_id", 1], ["created_at", "2017-11-24 01:06:42.873617"], ["updated_at", "2017-11-24 01:06:42.873617"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:42.879118"], ["updated_at", "2017-11-24 01:06:42.879118"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 41], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 41], ["line_item_id", 1], ["created_at", "2017-11-24 01:06:42.882238"], ["updated_at", "2017-11-24 01:06:42.882238"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:42.884529"], ["updated_at", "2017-11-24 01:06:42.884529"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 42], ["created_at", "2017-11-24 01:06:42.886227"], ["updated_at", "2017-11-24 01:06:42.886227"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:42.893363"], ["updated_at", "2017-11-24 01:06:42.893363"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 43], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 43], ["line_item_id", 1], ["created_at", "2017-11-24 01:06:42.896685"], ["updated_at", "2017-11-24 01:06:42.896685"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 43], ["created_at", "2017-11-24 01:06:42.898684"], ["updated_at", "2017-11-24 01:06:42.898684"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:42.903652"], ["updated_at", "2017-11-24 01:06:42.903652"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 44], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 44], ["line_item_id", 1], ["created_at", "2017-11-24 01:06:42.906794"], ["updated_at", "2017-11-24 01:06:42.906794"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 44], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:42.924992"], ["updated_at", "2017-11-24 01:06:42.924992"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 45], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 45], ["line_item_id", 1], ["created_at", "2017-11-24 01:06:42.932191"], ["updated_at", "2017-11-24 01:06:42.932191"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:42.934544"], ["updated_at", "2017-11-24 01:06:42.934544"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 46], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:42.953563"], ["updated_at", "2017-11-24 01:06:42.953563"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 47], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 47], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 47], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 47], ["line_item_id", 1], ["created_at", "2017-11-24 01:06:42.961024"], ["updated_at", "2017-11-24 01:06:42.961024"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 47], ["id", 46], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 46], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:42.971736"], ["updated_at", "2017-11-24 01:06:42.971736"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 48], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:42.980106"], ["updated_at", "2017-11-24 01:06:42.980106"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 49], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:47.163223"], ["updated_at", "2017-11-24 01:06:47.163223"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 50], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 50], ["line_item_id", 1], ["created_at", "2017-11-24 01:06:47.171611"], ["updated_at", "2017-11-24 01:06:47.171611"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 50], ["line_item_id", 1], ["created_at", "2017-11-24 01:06:47.174973"], ["updated_at", "2017-11-24 01:06:47.174973"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:47.180814"], ["updated_at", "2017-11-24 01:06:47.180814"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 51], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 51], ["line_item_id", 1], ["created_at", "2017-11-24 01:06:47.184164"], ["updated_at", "2017-11-24 01:06:47.184164"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:47.186240"], ["updated_at", "2017-11-24 01:06:47.186240"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 52], ["line_item_id", 1], ["created_at", "2017-11-24 01:06:47.187911"], ["updated_at", "2017-11-24 01:06:47.187911"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:47.193995"], ["updated_at", "2017-11-24 01:06:47.193995"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 53], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 53], ["line_item_id", 1], ["created_at", "2017-11-24 01:06:47.197180"], ["updated_at", "2017-11-24 01:06:47.197180"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:47.199468"], ["updated_at", "2017-11-24 01:06:47.199468"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 54], ["created_at", "2017-11-24 01:06:47.201173"], ["updated_at", "2017-11-24 01:06:47.201173"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:47.208958"], ["updated_at", "2017-11-24 01:06:47.208958"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 55], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 55], ["line_item_id", 1], ["created_at", "2017-11-24 01:06:47.212586"], ["updated_at", "2017-11-24 01:06:47.212586"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 55], ["created_at", "2017-11-24 01:06:47.214946"], ["updated_at", "2017-11-24 01:06:47.214946"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:47.220738"], ["updated_at", "2017-11-24 01:06:47.220738"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 56], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 56], ["line_item_id", 1], ["created_at", "2017-11-24 01:06:47.223931"], ["updated_at", "2017-11-24 01:06:47.223931"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 56], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:47.242039"], ["updated_at", "2017-11-24 01:06:47.242039"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 57], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 57], ["line_item_id", 1], ["created_at", "2017-11-24 01:06:47.245389"], ["updated_at", "2017-11-24 01:06:47.245389"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:47.247204"], ["updated_at", "2017-11-24 01:06:47.247204"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 58], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:47.265709"], ["updated_at", "2017-11-24 01:06:47.265709"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 59], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 59], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 59], ["line_item_id", 1], ["created_at", "2017-11-24 01:06:47.272873"], ["updated_at", "2017-11-24 01:06:47.272873"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 59], ["id", 57], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 57], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:47.284668"], ["updated_at", "2017-11-24 01:06:47.284668"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 60], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:06:47.293392"], ["updated_at", "2017-11-24 01:06:47.293392"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 61], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:07:19.208987"], ["updated_at", "2017-11-24 01:07:19.208987"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 62], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 62], ["line_item_id", 1], ["created_at", "2017-11-24 01:07:19.216686"], ["updated_at", "2017-11-24 01:07:19.216686"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 62], ["line_item_id", 1], ["created_at", "2017-11-24 01:07:19.219534"], ["updated_at", "2017-11-24 01:07:19.219534"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:07:19.225013"], ["updated_at", "2017-11-24 01:07:19.225013"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 63], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 63], ["line_item_id", 1], ["created_at", "2017-11-24 01:07:19.228082"], ["updated_at", "2017-11-24 01:07:19.228082"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:07:19.229918"], ["updated_at", "2017-11-24 01:07:19.229918"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 64], ["line_item_id", 1], ["created_at", "2017-11-24 01:07:19.231491"], ["updated_at", "2017-11-24 01:07:19.231491"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:07:19.237297"], ["updated_at", "2017-11-24 01:07:19.237297"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 65], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 65], ["line_item_id", 1], ["created_at", "2017-11-24 01:07:19.240424"], ["updated_at", "2017-11-24 01:07:19.240424"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:07:19.242270"], ["updated_at", "2017-11-24 01:07:19.242270"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 66], ["created_at", "2017-11-24 01:07:19.243742"], ["updated_at", "2017-11-24 01:07:19.243742"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:07:19.249364"], ["updated_at", "2017-11-24 01:07:19.249364"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 67], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 67], ["line_item_id", 1], ["created_at", "2017-11-24 01:07:19.254083"], ["updated_at", "2017-11-24 01:07:19.254083"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 67], ["created_at", "2017-11-24 01:07:19.256167"], ["updated_at", "2017-11-24 01:07:19.256167"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:07:19.261819"], ["updated_at", "2017-11-24 01:07:19.261819"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 68], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 68], ["line_item_id", 1], ["created_at", "2017-11-24 01:07:19.265004"], ["updated_at", "2017-11-24 01:07:19.265004"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 68], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 68], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:07:19.283666"], ["updated_at", "2017-11-24 01:07:19.283666"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 69], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 69], ["line_item_id", 1], ["created_at", "2017-11-24 01:07:19.291232"], ["updated_at", "2017-11-24 01:07:19.291232"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:07:19.293376"], ["updated_at", "2017-11-24 01:07:19.293376"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 70], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:07:19.311489"], ["updated_at", "2017-11-24 01:07:19.311489"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 71], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 71], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 71], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 71], ["line_item_id", 1], ["created_at", "2017-11-24 01:07:19.318498"], ["updated_at", "2017-11-24 01:07:19.318498"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 71], ["id", 68], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 68], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:07:19.328514"], ["updated_at", "2017-11-24 01:07:19.328514"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 72], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:07:19.336763"], ["updated_at", "2017-11-24 01:07:19.336763"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 73], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:07:33.224567"], ["updated_at", "2017-11-24 01:07:33.224567"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 74], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 74], ["line_item_id", 1], ["created_at", "2017-11-24 01:07:33.232895"], ["updated_at", "2017-11-24 01:07:33.232895"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 74], ["line_item_id", 1], ["created_at", "2017-11-24 01:07:33.236458"], ["updated_at", "2017-11-24 01:07:33.236458"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:07:33.242194"], ["updated_at", "2017-11-24 01:07:33.242194"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 75], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 75], ["line_item_id", 1], ["created_at", "2017-11-24 01:07:33.245387"], ["updated_at", "2017-11-24 01:07:33.245387"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:07:33.247526"], ["updated_at", "2017-11-24 01:07:33.247526"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 76], ["line_item_id", 1], ["created_at", "2017-11-24 01:07:33.249217"], ["updated_at", "2017-11-24 01:07:33.249217"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:07:33.255010"], ["updated_at", "2017-11-24 01:07:33.255010"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 77], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 77], ["line_item_id", 1], ["created_at", "2017-11-24 01:07:33.258117"], ["updated_at", "2017-11-24 01:07:33.258117"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:07:33.260181"], ["updated_at", "2017-11-24 01:07:33.260181"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 78], ["created_at", "2017-11-24 01:07:33.261832"], ["updated_at", "2017-11-24 01:07:33.261832"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:07:33.269202"], ["updated_at", "2017-11-24 01:07:33.269202"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 79], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 79], ["line_item_id", 1], ["created_at", "2017-11-24 01:07:33.273008"], ["updated_at", "2017-11-24 01:07:33.273008"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 79], ["created_at", "2017-11-24 01:07:33.275248"], ["updated_at", "2017-11-24 01:07:33.275248"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:07:33.281200"], ["updated_at", "2017-11-24 01:07:33.281200"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 80], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 80], ["line_item_id", 1], ["created_at", "2017-11-24 01:07:33.284496"], ["updated_at", "2017-11-24 01:07:33.284496"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 80], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:07:33.302958"], ["updated_at", "2017-11-24 01:07:33.302958"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 81], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 81], ["line_item_id", 1], ["created_at", "2017-11-24 01:07:33.306419"], ["updated_at", "2017-11-24 01:07:33.306419"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:07:33.308275"], ["updated_at", "2017-11-24 01:07:33.308275"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 82], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:07:33.331316"], ["updated_at", "2017-11-24 01:07:33.331316"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 83], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 83], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 83], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 83], ["line_item_id", 1], ["created_at", "2017-11-24 01:07:33.337548"], ["updated_at", "2017-11-24 01:07:33.337548"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 83], ["id", 79], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 79], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:07:33.346329"], ["updated_at", "2017-11-24 01:07:33.346329"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 84], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:07:33.354080"], ["updated_at", "2017-11-24 01:07:33.354080"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 85], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:07.928649"], ["updated_at", "2017-11-24 01:08:07.928649"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:07.936310"], ["updated_at", "2017-11-24 01:08:07.936310"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:07.939415"], ["updated_at", "2017-11-24 01:08:07.939415"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:07.945122"], ["updated_at", "2017-11-24 01:08:07.945122"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:07.948481"], ["updated_at", "2017-11-24 01:08:07.948481"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:07.950368"], ["updated_at", "2017-11-24 01:08:07.950368"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 3], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:07.952201"], ["updated_at", "2017-11-24 01:08:07.952201"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:07.958120"], ["updated_at", "2017-11-24 01:08:07.958120"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 4], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 4], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:07.961391"], ["updated_at", "2017-11-24 01:08:07.961391"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:07.963641"], ["updated_at", "2017-11-24 01:08:07.963641"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 5], ["created_at", "2017-11-24 01:08:07.965398"], ["updated_at", "2017-11-24 01:08:07.965398"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:07.973107"], ["updated_at", "2017-11-24 01:08:07.973107"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 6], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 6], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:07.976875"], ["updated_at", "2017-11-24 01:08:07.976875"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 6], ["created_at", "2017-11-24 01:08:07.978876"], ["updated_at", "2017-11-24 01:08:07.978876"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:07.984738"], ["updated_at", "2017-11-24 01:08:07.984738"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 7], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 7], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:07.987862"], ["updated_at", "2017-11-24 01:08:07.987862"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 7], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:08.006020"], ["updated_at", "2017-11-24 01:08:08.006020"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 8], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 8], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:08.009344"], ["updated_at", "2017-11-24 01:08:08.009344"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:08.011402"], ["updated_at", "2017-11-24 01:08:08.011402"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 9], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:08.019898"], ["updated_at", "2017-11-24 01:08:08.019898"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 10], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 10], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 10], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:08.024920"], ["updated_at", "2017-11-24 01:08:08.024920"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 10], ["id", 11], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 11], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:08.036068"], ["updated_at", "2017-11-24 01:08:08.036068"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 11], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 11], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 11], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:08.041458"], ["updated_at", "2017-11-24 01:08:08.041458"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 11], ["id", 12], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 01:08:08.044956"], ["id", 12]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:08.051616"], ["updated_at", "2017-11-24 01:08:08.051616"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 12], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 12], ["created_at", "2017-11-24 01:08:08.054683"], ["updated_at", "2017-11-24 01:08:08.054683"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 12], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 12], ["id", 13], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 01:08:08.059963"], ["id", 13]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:08.072887"], ["updated_at", "2017-11-24 01:08:08.072887"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 13], ["created_at", "2017-11-24 01:08:08.076055"], ["updated_at", "2017-11-24 01:08:08.076055"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:11.378110"], ["updated_at", "2017-11-24 01:08:11.378110"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 14], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 14], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:11.386408"], ["updated_at", "2017-11-24 01:08:11.386408"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 14], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:11.390325"], ["updated_at", "2017-11-24 01:08:11.390325"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:11.395702"], ["updated_at", "2017-11-24 01:08:11.395702"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 15], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 15], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:11.398928"], ["updated_at", "2017-11-24 01:08:11.398928"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:11.400931"], ["updated_at", "2017-11-24 01:08:11.400931"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 16], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:11.402731"], ["updated_at", "2017-11-24 01:08:11.402731"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:11.408241"], ["updated_at", "2017-11-24 01:08:11.408241"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 17], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 17], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:11.411273"], ["updated_at", "2017-11-24 01:08:11.411273"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:11.413409"], ["updated_at", "2017-11-24 01:08:11.413409"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 18], ["created_at", "2017-11-24 01:08:11.415003"], ["updated_at", "2017-11-24 01:08:11.415003"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:11.420434"], ["updated_at", "2017-11-24 01:08:11.420434"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 19], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 19], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:11.425133"], ["updated_at", "2017-11-24 01:08:11.425133"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 19], ["created_at", "2017-11-24 01:08:11.427268"], ["updated_at", "2017-11-24 01:08:11.427268"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:11.432235"], ["updated_at", "2017-11-24 01:08:11.432235"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 20], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 20], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:11.435252"], ["updated_at", "2017-11-24 01:08:11.435252"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 20], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:11.452325"], ["updated_at", "2017-11-24 01:08:11.452325"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 21], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 21], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:11.457240"], ["updated_at", "2017-11-24 01:08:11.457240"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:11.459647"], ["updated_at", "2017-11-24 01:08:11.459647"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 22], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:11.468401"], ["updated_at", "2017-11-24 01:08:11.468401"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 23], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 23], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 23], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:11.473522"], ["updated_at", "2017-11-24 01:08:11.473522"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 23], ["id", 25], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 25], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:11.482893"], ["updated_at", "2017-11-24 01:08:11.482893"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 24], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 24], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 24], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:11.489626"], ["updated_at", "2017-11-24 01:08:11.489626"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 24], ["id", 26], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 26], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 01:08:11.492751"], ["id", 26]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:11.498756"], ["updated_at", "2017-11-24 01:08:11.498756"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 25], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 25], ["created_at", "2017-11-24 01:08:11.501691"], ["updated_at", "2017-11-24 01:08:11.501691"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 25], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 25], ["id", 27], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 27], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 01:08:11.506441"], ["id", 27]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:11.513244"], ["updated_at", "2017-11-24 01:08:11.513244"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 26], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 26], ["created_at", "2017-11-24 01:08:11.516823"], ["updated_at", "2017-11-24 01:08:11.516823"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 26], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 26], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:14.136357"], ["updated_at", "2017-11-24 01:08:14.136357"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 27], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 27], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:14.144416"], ["updated_at", "2017-11-24 01:08:14.144416"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 27], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:14.148128"], ["updated_at", "2017-11-24 01:08:14.148128"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:14.153845"], ["updated_at", "2017-11-24 01:08:14.153845"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 28], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 28], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:14.156872"], ["updated_at", "2017-11-24 01:08:14.156872"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:14.159252"], ["updated_at", "2017-11-24 01:08:14.159252"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 29], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:14.160923"], ["updated_at", "2017-11-24 01:08:14.160923"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:14.166377"], ["updated_at", "2017-11-24 01:08:14.166377"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 30], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 30], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:14.169533"], ["updated_at", "2017-11-24 01:08:14.169533"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:14.171696"], ["updated_at", "2017-11-24 01:08:14.171696"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 31], ["created_at", "2017-11-24 01:08:14.173522"], ["updated_at", "2017-11-24 01:08:14.173522"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:14.179653"], ["updated_at", "2017-11-24 01:08:14.179653"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 32], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 32], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:14.183803"], ["updated_at", "2017-11-24 01:08:14.183803"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 32], ["created_at", "2017-11-24 01:08:14.186015"], ["updated_at", "2017-11-24 01:08:14.186015"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:14.191610"], ["updated_at", "2017-11-24 01:08:14.191610"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 33], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 33], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:14.194782"], ["updated_at", "2017-11-24 01:08:14.194782"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 33], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:14.212629"], ["updated_at", "2017-11-24 01:08:14.212629"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 34], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 34], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:14.216602"], ["updated_at", "2017-11-24 01:08:14.216602"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:14.218912"], ["updated_at", "2017-11-24 01:08:14.218912"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 35], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:14.227841"], ["updated_at", "2017-11-24 01:08:14.227841"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 36], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 36], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 36], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:14.233069"], ["updated_at", "2017-11-24 01:08:14.233069"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 36], ["id", 39], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 39], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:14.243664"], ["updated_at", "2017-11-24 01:08:14.243664"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 37], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 37], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 37], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:14.252983"], ["updated_at", "2017-11-24 01:08:14.252983"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 37], ["id", 40], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 40], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 01:08:14.256422"], ["id", 40]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:14.262892"], ["updated_at", "2017-11-24 01:08:14.262892"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 38], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 38], ["created_at", "2017-11-24 01:08:14.266296"], ["updated_at", "2017-11-24 01:08:14.266296"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 38], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 38], ["id", 41], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 41], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 01:08:14.271668"], ["id", 41]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:14.280411"], ["updated_at", "2017-11-24 01:08:14.280411"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 39], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 39], ["created_at", "2017-11-24 01:08:14.283479"], ["updated_at", "2017-11-24 01:08:14.283479"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 39], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 39], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:39.728173"], ["updated_at", "2017-11-24 01:08:39.728173"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 40], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 40], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:39.736663"], ["updated_at", "2017-11-24 01:08:39.736663"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 40], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:39.740259"], ["updated_at", "2017-11-24 01:08:39.740259"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:39.746392"], ["updated_at", "2017-11-24 01:08:39.746392"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 41], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 41], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:39.749892"], ["updated_at", "2017-11-24 01:08:39.749892"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:39.752134"], ["updated_at", "2017-11-24 01:08:39.752134"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 42], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:39.754129"], ["updated_at", "2017-11-24 01:08:39.754129"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:39.759853"], ["updated_at", "2017-11-24 01:08:39.759853"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 43], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 43], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:39.763073"], ["updated_at", "2017-11-24 01:08:39.763073"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:39.765198"], ["updated_at", "2017-11-24 01:08:39.765198"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 44], ["created_at", "2017-11-24 01:08:39.766942"], ["updated_at", "2017-11-24 01:08:39.766942"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:39.774108"], ["updated_at", "2017-11-24 01:08:39.774108"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 45], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 45], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:39.777561"], ["updated_at", "2017-11-24 01:08:39.777561"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 45], ["created_at", "2017-11-24 01:08:39.779488"], ["updated_at", "2017-11-24 01:08:39.779488"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:39.785096"], ["updated_at", "2017-11-24 01:08:39.785096"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 46], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 46], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:39.788260"], ["updated_at", "2017-11-24 01:08:39.788260"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 46], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:39.808408"], ["updated_at", "2017-11-24 01:08:39.808408"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 47], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 47], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:39.811631"], ["updated_at", "2017-11-24 01:08:39.811631"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:39.813762"], ["updated_at", "2017-11-24 01:08:39.813762"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 48], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:39.822398"], ["updated_at", "2017-11-24 01:08:39.822398"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 49], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 49], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 49], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:39.827332"], ["updated_at", "2017-11-24 01:08:39.827332"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 49], ["id", 53], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 53], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:39.837739"], ["updated_at", "2017-11-24 01:08:39.837739"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 50], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 50], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 50], ["line_item_id", 1], ["created_at", "2017-11-24 01:08:39.842595"], ["updated_at", "2017-11-24 01:08:39.842595"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 50], ["id", 54], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 54], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 01:08:39.845896"], ["id", 54]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:39.851867"], ["updated_at", "2017-11-24 01:08:39.851867"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 51], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 51], ["created_at", "2017-11-24 01:08:39.855159"], ["updated_at", "2017-11-24 01:08:39.855159"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 51], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 51], ["id", 55], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 55], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 01:08:39.860489"], ["id", 55]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:08:39.870144"], ["updated_at", "2017-11-24 01:08:39.870144"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 52], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 52], ["created_at", "2017-11-24 01:08:39.873408"], ["updated_at", "2017-11-24 01:08:39.873408"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 52], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 52], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (65.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.2ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.2ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (262.1ms)[0m  [1m[35mTRUNCATE TABLE "public"."services", "public"."payments", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:10:14.982842"], ["updated_at", "2017-11-24 01:10:14.982842"]]
  [1m[35m (10.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 01:10:15.002379"], ["updated_at", "2017-11-24 01:10:15.002379"]]
  [1m[35m (13.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 01:10:15.019429"], ["updated_at", "2017-11-24 01:10:15.019429"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (17.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (266.3ms)[0m  [1m[35mTRUNCATE TABLE "public"."services", "public"."payments", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:10:15.319851"], ["updated_at", "2017-11-24 01:10:15.319851"]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 01:10:15.330197"], ["updated_at", "2017-11-24 01:10:15.330197"]]
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:10:15.339549"], ["updated_at", "2017-11-24 01:10:15.339549"]]
  [1m[35m (8.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 01:10:15.350281"], ["updated_at", "2017-11-24 01:10:15.350281"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (7.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.2ms)[0m  [1m[35mTRUNCATE TABLE "public"."services", "public"."payments", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:10:15.629837"], ["updated_at", "2017-11-24 01:10:15.629837"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 01:10:15.640787"], ["updated_at", "2017-11-24 01:10:15.640787"]]
  [1m[35m (5.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:10:15.649645"], ["updated_at", "2017-11-24 01:10:15.649645"]]
  [1m[35m (8.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 2], ["created_at", "2017-11-24 01:10:15.660380"], ["updated_at", "2017-11-24 01:10:15.660380"]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (9.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (299.5ms)[0m  [1m[35mTRUNCATE TABLE "public"."services", "public"."payments", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:10:15.995526"], ["updated_at", "2017-11-24 01:10:15.995526"]]
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 01:10:16.006091"], ["updated_at", "2017-11-24 01:10:16.006091"]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 01:10:16.015196"], ["updated_at", "2017-11-24 01:10:16.015196"]]
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (9.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (321.6ms)[0m  [1m[35mTRUNCATE TABLE "public"."services", "public"."payments", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (4.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:10:16.372003"], ["updated_at", "2017-11-24 01:10:16.372003"]]
  [1m[35m (5.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 01:10:16.382030"], ["updated_at", "2017-11-24 01:10:16.382030"]]
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (9.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.2ms)[0m  [1m[35mTRUNCATE TABLE "public"."services", "public"."payments", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:10:16.681783"], ["updated_at", "2017-11-24 01:10:16.681783"]]
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 01:10:16.692220"], ["updated_at", "2017-11-24 01:10:16.692220"]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:10:16.701597"], ["updated_at", "2017-11-24 01:10:16.701597"]]
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.2ms)[0m  [1m[35mTRUNCATE TABLE "public"."services", "public"."payments", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:10:16.992990"], ["updated_at", "2017-11-24 01:10:16.992990"]]
  [1m[35m (4.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 01:10:17.004102"], ["updated_at", "2017-11-24 01:10:17.004102"]]
  [1m[35m (5.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 1], ["id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (222.1ms)[0m  [1m[35mTRUNCATE TABLE "public"."services", "public"."payments", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:10:17.257377"], ["updated_at", "2017-11-24 01:10:17.257377"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 01:10:17.270886"], ["updated_at", "2017-11-24 01:10:17.270886"]]
  [1m[35m (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 1], ["id", 1], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 01:10:17.278794"], ["id", 1]]
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (8.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (277.3ms)[0m  [1m[35mTRUNCATE TABLE "public"."services", "public"."payments", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:10:17.589511"], ["updated_at", "2017-11-24 01:10:17.589511"]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 01:10:17.599818"], ["updated_at", "2017-11-24 01:10:17.599818"]]
  [1m[35m (7.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 1], ["id", 1], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 01:10:17.612554"], ["id", 1]]
  [1m[35m (5.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (8.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (299.5ms)[0m  [1m[35mTRUNCATE TABLE "public"."services", "public"."payments", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:10:17.944113"], ["updated_at", "2017-11-24 01:10:17.944113"]]
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 01:10:17.954838"], ["updated_at", "2017-11-24 01:10:17.954838"]]
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 1], ["id", 1], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 01:10:17.985057"], ["id", 1]]
  [1m[35m (8.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 01:10:18.017318"], ["updated_at", "2017-11-24 01:10:18.017318"]]
  [1m[35m (9.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 1], ["id", 2], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (4.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.1ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.1ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (240.0ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:12:18.400547"], ["updated_at", "2017-11-24 01:12:18.400547"]]
  [1m[35m (48.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 01:12:18.457754"], ["updated_at", "2017-11-24 01:12:18.457754"]]
  [1m[35m (68.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 01:12:18.530155"], ["updated_at", "2017-11-24 01:12:18.530155"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (5.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.2ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.1ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (284.4ms)[0m  [1m[35mTRUNCATE TABLE "public"."services", "public"."payments", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:12:18.841729"], ["updated_at", "2017-11-24 01:12:18.841729"]]
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 01:12:18.852207"], ["updated_at", "2017-11-24 01:12:18.852207"]]
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:12:18.861459"], ["updated_at", "2017-11-24 01:12:18.861459"]]
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 01:12:18.872209"], ["updated_at", "2017-11-24 01:12:18.872209"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (332.7ms)[0m  [1m[35mTRUNCATE TABLE "public"."services", "public"."payments", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:12:19.229267"], ["updated_at", "2017-11-24 01:12:19.229267"]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 01:12:19.239470"], ["updated_at", "2017-11-24 01:12:19.239470"]]
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:12:19.248805"], ["updated_at", "2017-11-24 01:12:19.248805"]]
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 2], ["created_at", "2017-11-24 01:12:19.259567"], ["updated_at", "2017-11-24 01:12:19.259567"]]
  [1m[35m (9.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (9.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (244.1ms)[0m  [1m[35mTRUNCATE TABLE "public"."services", "public"."payments", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:12:19.539205"], ["updated_at", "2017-11-24 01:12:19.539205"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 01:12:19.549442"], ["updated_at", "2017-11-24 01:12:19.549442"]]
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 01:12:19.558860"], ["updated_at", "2017-11-24 01:12:19.558860"]]
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (9.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.2ms)[0m  [1m[35mTRUNCATE TABLE "public"."services", "public"."payments", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:12:19.849114"], ["updated_at", "2017-11-24 01:12:19.849114"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 01:12:19.859587"], ["updated_at", "2017-11-24 01:12:19.859587"]]
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (8.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (288.5ms)[0m  [1m[35mTRUNCATE TABLE "public"."services", "public"."payments", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:12:20.192709"], ["updated_at", "2017-11-24 01:12:20.192709"]]
  [1m[35m (5.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 01:12:20.203005"], ["updated_at", "2017-11-24 01:12:20.203005"]]
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:12:20.215207"], ["updated_at", "2017-11-24 01:12:20.215207"]]
  [1m[35m (5.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (7.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (244.1ms)[0m  [1m[35mTRUNCATE TABLE "public"."services", "public"."payments", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:12:20.492719"], ["updated_at", "2017-11-24 01:12:20.492719"]]
  [1m[35m (4.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 01:12:20.503710"], ["updated_at", "2017-11-24 01:12:20.503710"]]
  [1m[35m (5.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 1], ["id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (5.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (288.6ms)[0m  [1m[35mTRUNCATE TABLE "public"."services", "public"."payments", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:12:20.823546"], ["updated_at", "2017-11-24 01:12:20.823546"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.6ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 01:12:20.836751"], ["updated_at", "2017-11-24 01:12:20.836751"]]
  [1m[35m (3.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 1], ["id", 1], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 01:12:20.845468"], ["id", 1]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (8.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (277.4ms)[0m  [1m[35mTRUNCATE TABLE "public"."services", "public"."payments", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:12:21.155695"], ["updated_at", "2017-11-24 01:12:21.155695"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 01:12:21.166773"], ["updated_at", "2017-11-24 01:12:21.166773"]]
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 1], ["id", 1], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 01:12:21.180382"], ["id", 1]]
  [1m[35m (13.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.1ms)[0m  [1m[35mTRUNCATE TABLE "public"."services", "public"."payments", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:12:21.477078"], ["updated_at", "2017-11-24 01:12:21.477078"]]
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 01:12:21.487926"], ["updated_at", "2017-11-24 01:12:21.487926"]]
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 1], ["id", 1], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 01:12:21.518782"], ["id", 1]]
  [1m[35m (8.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 01:12:21.546944"], ["updated_at", "2017-11-24 01:12:21.546944"]]
  [1m[35m (13.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 1], ["id", 2], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (9.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.0ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.1ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (251.3ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:03.627580"], ["updated_at", "2017-11-24 01:13:03.627580"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 01:13:03.636185"], ["updated_at", "2017-11-24 01:13:03.636185"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 01:13:03.640145"], ["updated_at", "2017-11-24 01:13:03.640145"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:03.646439"], ["updated_at", "2017-11-24 01:13:03.646439"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 01:13:03.650172"], ["updated_at", "2017-11-24 01:13:03.650172"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:03.652291"], ["updated_at", "2017-11-24 01:13:03.652291"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 3], ["line_item_id", 1], ["created_at", "2017-11-24 01:13:03.654156"], ["updated_at", "2017-11-24 01:13:03.654156"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:03.659896"], ["updated_at", "2017-11-24 01:13:03.659896"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 4], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 4], ["line_item_id", 1], ["created_at", "2017-11-24 01:13:03.663034"], ["updated_at", "2017-11-24 01:13:03.663034"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:03.664867"], ["updated_at", "2017-11-24 01:13:03.664867"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 5], ["created_at", "2017-11-24 01:13:03.666769"], ["updated_at", "2017-11-24 01:13:03.666769"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:03.674330"], ["updated_at", "2017-11-24 01:13:03.674330"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 6], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 6], ["line_item_id", 1], ["created_at", "2017-11-24 01:13:03.678186"], ["updated_at", "2017-11-24 01:13:03.678186"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 6], ["created_at", "2017-11-24 01:13:03.680532"], ["updated_at", "2017-11-24 01:13:03.680532"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:03.686337"], ["updated_at", "2017-11-24 01:13:03.686337"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 7], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 7], ["line_item_id", 1], ["created_at", "2017-11-24 01:13:03.689439"], ["updated_at", "2017-11-24 01:13:03.689439"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 7], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:03.707531"], ["updated_at", "2017-11-24 01:13:03.707531"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 8], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 8], ["line_item_id", 1], ["created_at", "2017-11-24 01:13:03.710992"], ["updated_at", "2017-11-24 01:13:03.710992"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:03.712899"], ["updated_at", "2017-11-24 01:13:03.712899"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 9], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:03.721588"], ["updated_at", "2017-11-24 01:13:03.721588"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 10], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 10], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 10], ["line_item_id", 1], ["created_at", "2017-11-24 01:13:03.726722"], ["updated_at", "2017-11-24 01:13:03.726722"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 10], ["id", 11], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 11], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:03.737317"], ["updated_at", "2017-11-24 01:13:03.737317"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 11], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 11], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 11], ["line_item_id", 1], ["created_at", "2017-11-24 01:13:03.742581"], ["updated_at", "2017-11-24 01:13:03.742581"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 11], ["id", 12], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 01:13:03.745814"], ["id", 12]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:03.752319"], ["updated_at", "2017-11-24 01:13:03.752319"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 12], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 12], ["created_at", "2017-11-24 01:13:03.755293"], ["updated_at", "2017-11-24 01:13:03.755293"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 12], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 12], ["id", 13], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 01:13:03.760462"], ["id", 13]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:03.769364"], ["updated_at", "2017-11-24 01:13:03.769364"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 13], ["created_at", "2017-11-24 01:13:03.772550"], ["updated_at", "2017-11-24 01:13:03.772550"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:20.507910"], ["updated_at", "2017-11-24 01:13:20.507910"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 14], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 14], ["line_item_id", 1], ["created_at", "2017-11-24 01:13:20.516114"], ["updated_at", "2017-11-24 01:13:20.516114"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 14], ["line_item_id", 1], ["created_at", "2017-11-24 01:13:20.519680"], ["updated_at", "2017-11-24 01:13:20.519680"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:20.525092"], ["updated_at", "2017-11-24 01:13:20.525092"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 15], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 15], ["line_item_id", 1], ["created_at", "2017-11-24 01:13:20.528378"], ["updated_at", "2017-11-24 01:13:20.528378"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:20.530592"], ["updated_at", "2017-11-24 01:13:20.530592"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 16], ["line_item_id", 1], ["created_at", "2017-11-24 01:13:20.532351"], ["updated_at", "2017-11-24 01:13:20.532351"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:20.537858"], ["updated_at", "2017-11-24 01:13:20.537858"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 17], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 17], ["line_item_id", 1], ["created_at", "2017-11-24 01:13:20.540899"], ["updated_at", "2017-11-24 01:13:20.540899"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:20.542786"], ["updated_at", "2017-11-24 01:13:20.542786"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 18], ["created_at", "2017-11-24 01:13:20.544364"], ["updated_at", "2017-11-24 01:13:20.544364"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:20.551988"], ["updated_at", "2017-11-24 01:13:20.551988"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 19], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 19], ["line_item_id", 1], ["created_at", "2017-11-24 01:13:20.555853"], ["updated_at", "2017-11-24 01:13:20.555853"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 19], ["created_at", "2017-11-24 01:13:20.557926"], ["updated_at", "2017-11-24 01:13:20.557926"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:20.563491"], ["updated_at", "2017-11-24 01:13:20.563491"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 20], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 20], ["line_item_id", 1], ["created_at", "2017-11-24 01:13:20.566618"], ["updated_at", "2017-11-24 01:13:20.566618"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 20], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:20.589553"], ["updated_at", "2017-11-24 01:13:20.589553"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 21], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 21], ["line_item_id", 1], ["created_at", "2017-11-24 01:13:20.592994"], ["updated_at", "2017-11-24 01:13:20.592994"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:20.594956"], ["updated_at", "2017-11-24 01:13:20.594956"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 22], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:20.603317"], ["updated_at", "2017-11-24 01:13:20.603317"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 23], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 23], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 23], ["line_item_id", 1], ["created_at", "2017-11-24 01:13:20.608173"], ["updated_at", "2017-11-24 01:13:20.608173"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 23], ["id", 25], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 25], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:20.618787"], ["updated_at", "2017-11-24 01:13:20.618787"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 24], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 24], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 24], ["line_item_id", 1], ["created_at", "2017-11-24 01:13:20.623925"], ["updated_at", "2017-11-24 01:13:20.623925"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 24], ["id", 26], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 26], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 01:13:20.627496"], ["id", 26]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:20.634303"], ["updated_at", "2017-11-24 01:13:20.634303"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 25], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 25], ["created_at", "2017-11-24 01:13:20.637594"], ["updated_at", "2017-11-24 01:13:20.637594"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 25], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 25], ["id", 27], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 27], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 01:13:20.642966"], ["id", 27]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:20.651969"], ["updated_at", "2017-11-24 01:13:20.651969"]]
  [1m[35m (11.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 26], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 26], ["created_at", "2017-11-24 01:13:20.667872"], ["updated_at", "2017-11-24 01:13:20.667872"]]
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 26], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 26], ["id", 28], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 28], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 01:13:20.697420"], ["id", 28]]
  [1m[35m (10.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 26], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 26], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 26], ["created_at", "2017-11-24 01:13:20.726613"], ["updated_at", "2017-11-24 01:13:20.726613"]]
  [1m[35m (3.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 26], ["id", 29], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 29], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:24.818732"], ["updated_at", "2017-11-24 01:13:24.818732"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 27], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 27], ["line_item_id", 1], ["created_at", "2017-11-24 01:13:24.826863"], ["updated_at", "2017-11-24 01:13:24.826863"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 27], ["line_item_id", 1], ["created_at", "2017-11-24 01:13:24.830217"], ["updated_at", "2017-11-24 01:13:24.830217"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:24.836074"], ["updated_at", "2017-11-24 01:13:24.836074"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 28], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 28], ["line_item_id", 1], ["created_at", "2017-11-24 01:13:24.839308"], ["updated_at", "2017-11-24 01:13:24.839308"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:24.841507"], ["updated_at", "2017-11-24 01:13:24.841507"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 29], ["line_item_id", 1], ["created_at", "2017-11-24 01:13:24.843761"], ["updated_at", "2017-11-24 01:13:24.843761"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:24.849387"], ["updated_at", "2017-11-24 01:13:24.849387"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 30], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 30], ["line_item_id", 1], ["created_at", "2017-11-24 01:13:24.852670"], ["updated_at", "2017-11-24 01:13:24.852670"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:24.855125"], ["updated_at", "2017-11-24 01:13:24.855125"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 31], ["created_at", "2017-11-24 01:13:24.856889"], ["updated_at", "2017-11-24 01:13:24.856889"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:24.864606"], ["updated_at", "2017-11-24 01:13:24.864606"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 32], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 32], ["line_item_id", 1], ["created_at", "2017-11-24 01:13:24.867938"], ["updated_at", "2017-11-24 01:13:24.867938"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 32], ["created_at", "2017-11-24 01:13:24.870045"], ["updated_at", "2017-11-24 01:13:24.870045"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:24.875606"], ["updated_at", "2017-11-24 01:13:24.875606"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 33], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 33], ["line_item_id", 1], ["created_at", "2017-11-24 01:13:24.878930"], ["updated_at", "2017-11-24 01:13:24.878930"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 33], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:24.897862"], ["updated_at", "2017-11-24 01:13:24.897862"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 34], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 34], ["line_item_id", 1], ["created_at", "2017-11-24 01:13:24.901039"], ["updated_at", "2017-11-24 01:13:24.901039"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:24.903275"], ["updated_at", "2017-11-24 01:13:24.903275"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 35], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:24.923765"], ["updated_at", "2017-11-24 01:13:24.923765"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 36], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 36], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 36], ["line_item_id", 1], ["created_at", "2017-11-24 01:13:24.929826"], ["updated_at", "2017-11-24 01:13:24.929826"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 36], ["id", 40], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 40], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:24.939512"], ["updated_at", "2017-11-24 01:13:24.939512"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 37], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:13:24.947486"], ["updated_at", "2017-11-24 01:13:24.947486"]]
  [1m[35m (45.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 38], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:15:59.426996"], ["updated_at", "2017-11-24 01:15:59.426996"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 01:15:59.435253"], ["updated_at", "2017-11-24 01:15:59.435253"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 01:15:59.439177"], ["updated_at", "2017-11-24 01:15:59.439177"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:15:59.445817"], ["updated_at", "2017-11-24 01:15:59.445817"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 01:15:59.449317"], ["updated_at", "2017-11-24 01:15:59.449317"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:15:59.451605"], ["updated_at", "2017-11-24 01:15:59.451605"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 3], ["line_item_id", 1], ["created_at", "2017-11-24 01:15:59.453809"], ["updated_at", "2017-11-24 01:15:59.453809"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:15:59.459591"], ["updated_at", "2017-11-24 01:15:59.459591"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 4], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 4], ["line_item_id", 1], ["created_at", "2017-11-24 01:15:59.462911"], ["updated_at", "2017-11-24 01:15:59.462911"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:15:59.465146"], ["updated_at", "2017-11-24 01:15:59.465146"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 5], ["created_at", "2017-11-24 01:15:59.467125"], ["updated_at", "2017-11-24 01:15:59.467125"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:15:59.474964"], ["updated_at", "2017-11-24 01:15:59.474964"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 6], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 6], ["line_item_id", 1], ["created_at", "2017-11-24 01:15:59.478384"], ["updated_at", "2017-11-24 01:15:59.478384"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 6], ["created_at", "2017-11-24 01:15:59.480457"], ["updated_at", "2017-11-24 01:15:59.480457"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:15:59.486355"], ["updated_at", "2017-11-24 01:15:59.486355"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 7], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 7], ["line_item_id", 1], ["created_at", "2017-11-24 01:15:59.489527"], ["updated_at", "2017-11-24 01:15:59.489527"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 7], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:15:59.508038"], ["updated_at", "2017-11-24 01:15:59.508038"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 8], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 8], ["line_item_id", 1], ["created_at", "2017-11-24 01:15:59.511379"], ["updated_at", "2017-11-24 01:15:59.511379"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:15:59.513628"], ["updated_at", "2017-11-24 01:15:59.513628"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 9], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:15:59.522736"], ["updated_at", "2017-11-24 01:15:59.522736"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 10], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 10], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 10], ["line_item_id", 1], ["created_at", "2017-11-24 01:15:59.527831"], ["updated_at", "2017-11-24 01:15:59.527831"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 10], ["id", 11], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 11], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:15:59.538472"], ["updated_at", "2017-11-24 01:15:59.538472"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 11], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 11], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 11], ["line_item_id", 1], ["created_at", "2017-11-24 01:15:59.543555"], ["updated_at", "2017-11-24 01:15:59.543555"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 11], ["id", 12], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 01:15:59.546844"], ["id", 12]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:15:59.553712"], ["updated_at", "2017-11-24 01:15:59.553712"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 12], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 12], ["created_at", "2017-11-24 01:15:59.556957"], ["updated_at", "2017-11-24 01:15:59.556957"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 12], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 12], ["id", 13], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (3.9ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 01:15:59.566391"], ["id", 13]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:15:59.575959"], ["updated_at", "2017-11-24 01:15:59.575959"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 13], ["created_at", "2017-11-24 01:15:59.579286"], ["updated_at", "2017-11-24 01:15:59.579286"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:02.984637"], ["updated_at", "2017-11-24 01:16:02.984637"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 14], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 14], ["line_item_id", 1], ["created_at", "2017-11-24 01:16:02.992285"], ["updated_at", "2017-11-24 01:16:02.992285"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 14], ["line_item_id", 1], ["created_at", "2017-11-24 01:16:02.995081"], ["updated_at", "2017-11-24 01:16:02.995081"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:03.000376"], ["updated_at", "2017-11-24 01:16:03.000376"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 15], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 15], ["line_item_id", 1], ["created_at", "2017-11-24 01:16:03.003369"], ["updated_at", "2017-11-24 01:16:03.003369"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:03.005168"], ["updated_at", "2017-11-24 01:16:03.005168"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 16], ["line_item_id", 1], ["created_at", "2017-11-24 01:16:03.006712"], ["updated_at", "2017-11-24 01:16:03.006712"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:03.012146"], ["updated_at", "2017-11-24 01:16:03.012146"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 17], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 17], ["line_item_id", 1], ["created_at", "2017-11-24 01:16:03.015341"], ["updated_at", "2017-11-24 01:16:03.015341"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:03.017718"], ["updated_at", "2017-11-24 01:16:03.017718"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 18], ["created_at", "2017-11-24 01:16:03.019517"], ["updated_at", "2017-11-24 01:16:03.019517"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:03.027048"], ["updated_at", "2017-11-24 01:16:03.027048"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 19], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 19], ["line_item_id", 1], ["created_at", "2017-11-24 01:16:03.030794"], ["updated_at", "2017-11-24 01:16:03.030794"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 19], ["created_at", "2017-11-24 01:16:03.032975"], ["updated_at", "2017-11-24 01:16:03.032975"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:03.039020"], ["updated_at", "2017-11-24 01:16:03.039020"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 20], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 20], ["line_item_id", 1], ["created_at", "2017-11-24 01:16:03.042293"], ["updated_at", "2017-11-24 01:16:03.042293"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 20], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:03.060517"], ["updated_at", "2017-11-24 01:16:03.060517"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 21], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 21], ["line_item_id", 1], ["created_at", "2017-11-24 01:16:03.063793"], ["updated_at", "2017-11-24 01:16:03.063793"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:03.065990"], ["updated_at", "2017-11-24 01:16:03.065990"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 22], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:03.074651"], ["updated_at", "2017-11-24 01:16:03.074651"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 23], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 23], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 23], ["line_item_id", 1], ["created_at", "2017-11-24 01:16:03.079742"], ["updated_at", "2017-11-24 01:16:03.079742"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 23], ["id", 25], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 25], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:03.090247"], ["updated_at", "2017-11-24 01:16:03.090247"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 24], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 24], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 24], ["line_item_id", 1], ["created_at", "2017-11-24 01:16:03.095828"], ["updated_at", "2017-11-24 01:16:03.095828"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 24], ["id", 26], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 26], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 01:16:03.099171"], ["id", 26]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:03.105622"], ["updated_at", "2017-11-24 01:16:03.105622"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 25], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 25], ["created_at", "2017-11-24 01:16:03.108789"], ["updated_at", "2017-11-24 01:16:03.108789"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 25], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 25], ["id", 27], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (3.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 27], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 01:16:03.117325"], ["id", 27]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:03.126871"], ["updated_at", "2017-11-24 01:16:03.126871"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 26], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 26], ["created_at", "2017-11-24 01:16:03.130265"], ["updated_at", "2017-11-24 01:16:03.130265"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 26], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 26], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" IS NULL AND "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 100500], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:31.955602"], ["updated_at", "2017-11-24 01:16:31.955602"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 27], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 27], ["line_item_id", 1], ["created_at", "2017-11-24 01:16:31.963931"], ["updated_at", "2017-11-24 01:16:31.963931"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 27], ["line_item_id", 1], ["created_at", "2017-11-24 01:16:31.967383"], ["updated_at", "2017-11-24 01:16:31.967383"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:31.973269"], ["updated_at", "2017-11-24 01:16:31.973269"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 28], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 28], ["line_item_id", 1], ["created_at", "2017-11-24 01:16:31.976525"], ["updated_at", "2017-11-24 01:16:31.976525"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:31.978607"], ["updated_at", "2017-11-24 01:16:31.978607"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 29], ["line_item_id", 1], ["created_at", "2017-11-24 01:16:31.980375"], ["updated_at", "2017-11-24 01:16:31.980375"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:31.986410"], ["updated_at", "2017-11-24 01:16:31.986410"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 30], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 30], ["line_item_id", 1], ["created_at", "2017-11-24 01:16:31.989566"], ["updated_at", "2017-11-24 01:16:31.989566"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:31.991634"], ["updated_at", "2017-11-24 01:16:31.991634"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 31], ["created_at", "2017-11-24 01:16:31.993488"], ["updated_at", "2017-11-24 01:16:31.993488"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:32.000907"], ["updated_at", "2017-11-24 01:16:32.000907"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 32], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 32], ["line_item_id", 1], ["created_at", "2017-11-24 01:16:32.004418"], ["updated_at", "2017-11-24 01:16:32.004418"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 32], ["created_at", "2017-11-24 01:16:32.006656"], ["updated_at", "2017-11-24 01:16:32.006656"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:32.012429"], ["updated_at", "2017-11-24 01:16:32.012429"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 33], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 33], ["line_item_id", 1], ["created_at", "2017-11-24 01:16:32.015695"], ["updated_at", "2017-11-24 01:16:32.015695"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 33], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:32.033849"], ["updated_at", "2017-11-24 01:16:32.033849"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 34], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 34], ["line_item_id", 1], ["created_at", "2017-11-24 01:16:32.041006"], ["updated_at", "2017-11-24 01:16:32.041006"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:32.043132"], ["updated_at", "2017-11-24 01:16:32.043132"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 35], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:32.051365"], ["updated_at", "2017-11-24 01:16:32.051365"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 36], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 36], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 36], ["line_item_id", 1], ["created_at", "2017-11-24 01:16:32.056623"], ["updated_at", "2017-11-24 01:16:32.056623"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 36], ["id", 39], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 39], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.9ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:32.067846"], ["updated_at", "2017-11-24 01:16:32.067846"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 37], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 37], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 37], ["line_item_id", 1], ["created_at", "2017-11-24 01:16:32.072927"], ["updated_at", "2017-11-24 01:16:32.072927"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 37], ["id", 40], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 40], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 01:16:32.076204"], ["id", 40]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:32.082767"], ["updated_at", "2017-11-24 01:16:32.082767"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 38], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 38], ["created_at", "2017-11-24 01:16:32.086111"], ["updated_at", "2017-11-24 01:16:32.086111"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 38], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 38], ["id", 41], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 41], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 01:16:32.091962"], ["id", 41]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:32.116285"], ["updated_at", "2017-11-24 01:16:32.116285"]]
  [1m[35m (8.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 39], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 39], ["created_at", "2017-11-24 01:16:32.133326"], ["updated_at", "2017-11-24 01:16:32.133326"]]
  [1m[35m (13.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 39], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 39], ["id", 42], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 42], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 01:16:32.169512"], ["id", 42]]
  [1m[35m (9.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 39], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 39], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 39], ["created_at", "2017-11-24 01:16:32.199083"], ["updated_at", "2017-11-24 01:16:32.199083"]]
  [1m[35m (13.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 39], ["id", 43], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 43], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.1ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.0ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (262.8ms)[0m  [1m[35mTRUNCATE TABLE "public"."services", "public"."payments", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (7.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:36.002824"], ["updated_at", "2017-11-24 01:16:36.002824"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 01:16:36.010687"], ["updated_at", "2017-11-24 01:16:36.010687"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 01:16:36.013655"], ["updated_at", "2017-11-24 01:16:36.013655"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:36.018833"], ["updated_at", "2017-11-24 01:16:36.018833"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 01:16:36.022103"], ["updated_at", "2017-11-24 01:16:36.022103"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:36.023917"], ["updated_at", "2017-11-24 01:16:36.023917"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 3], ["line_item_id", 1], ["created_at", "2017-11-24 01:16:36.025492"], ["updated_at", "2017-11-24 01:16:36.025492"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:36.030492"], ["updated_at", "2017-11-24 01:16:36.030492"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 4], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 4], ["line_item_id", 1], ["created_at", "2017-11-24 01:16:36.033779"], ["updated_at", "2017-11-24 01:16:36.033779"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:36.035530"], ["updated_at", "2017-11-24 01:16:36.035530"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 5], ["created_at", "2017-11-24 01:16:36.036939"], ["updated_at", "2017-11-24 01:16:36.036939"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:36.041790"], ["updated_at", "2017-11-24 01:16:36.041790"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 6], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 6], ["line_item_id", 1], ["created_at", "2017-11-24 01:16:36.046465"], ["updated_at", "2017-11-24 01:16:36.046465"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 6], ["created_at", "2017-11-24 01:16:36.048645"], ["updated_at", "2017-11-24 01:16:36.048645"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:36.053673"], ["updated_at", "2017-11-24 01:16:36.053673"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 7], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 7], ["line_item_id", 1], ["created_at", "2017-11-24 01:16:36.056627"], ["updated_at", "2017-11-24 01:16:36.056627"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 7], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:36.071737"], ["updated_at", "2017-11-24 01:16:36.071737"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 8], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 8], ["line_item_id", 1], ["created_at", "2017-11-24 01:16:36.080039"], ["updated_at", "2017-11-24 01:16:36.080039"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:36.081973"], ["updated_at", "2017-11-24 01:16:36.081973"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 9], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:36.089566"], ["updated_at", "2017-11-24 01:16:36.089566"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 10], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 10], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 10], ["line_item_id", 1], ["created_at", "2017-11-24 01:16:36.094372"], ["updated_at", "2017-11-24 01:16:36.094372"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 10], ["id", 11], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 11], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:36.102329"], ["updated_at", "2017-11-24 01:16:36.102329"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 11], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 11], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 11], ["line_item_id", 1], ["created_at", "2017-11-24 01:16:36.107052"], ["updated_at", "2017-11-24 01:16:36.107052"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 11], ["id", 12], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 01:16:36.111816"], ["id", 12]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:36.117998"], ["updated_at", "2017-11-24 01:16:36.117998"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 12], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 12], ["created_at", "2017-11-24 01:16:36.121059"], ["updated_at", "2017-11-24 01:16:36.121059"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 12], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 12], ["id", 13], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 01:16:36.126726"], ["id", 13]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:16:36.150035"], ["updated_at", "2017-11-24 01:16:36.150035"]]
  [1m[35m (4.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 13], ["created_at", "2017-11-24 01:16:36.158007"], ["updated_at", "2017-11-24 01:16:36.158007"]]
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 13], ["id", 14], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 14], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 01:16:36.190099"], ["id", 14]]
  [1m[35m (7.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 13], ["created_at", "2017-11-24 01:16:36.219861"], ["updated_at", "2017-11-24 01:16:36.219861"]]
  [1m[35m (11.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 13], ["id", 15], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 15], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (9.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.0ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.2ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (329.3ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:31:44.283800"], ["updated_at", "2017-11-24 01:31:44.283800"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 01:31:44.292348"], ["updated_at", "2017-11-24 01:31:44.292348"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 01:31:44.296311"], ["updated_at", "2017-11-24 01:31:44.296311"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:31:44.302440"], ["updated_at", "2017-11-24 01:31:44.302440"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 01:31:44.305835"], ["updated_at", "2017-11-24 01:31:44.305835"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:31:44.308053"], ["updated_at", "2017-11-24 01:31:44.308053"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 3], ["line_item_id", 1], ["created_at", "2017-11-24 01:31:44.310353"], ["updated_at", "2017-11-24 01:31:44.310353"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:31:44.316122"], ["updated_at", "2017-11-24 01:31:44.316122"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 4], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 4], ["line_item_id", 1], ["created_at", "2017-11-24 01:31:44.319413"], ["updated_at", "2017-11-24 01:31:44.319413"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:31:44.321419"], ["updated_at", "2017-11-24 01:31:44.321419"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 5], ["created_at", "2017-11-24 01:31:44.322909"], ["updated_at", "2017-11-24 01:31:44.322909"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:31:44.330524"], ["updated_at", "2017-11-24 01:31:44.330524"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 6], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 6], ["line_item_id", 1], ["created_at", "2017-11-24 01:31:44.333846"], ["updated_at", "2017-11-24 01:31:44.333846"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 6], ["created_at", "2017-11-24 01:31:44.335935"], ["updated_at", "2017-11-24 01:31:44.335935"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:31:44.341262"], ["updated_at", "2017-11-24 01:31:44.341262"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 7], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 7], ["line_item_id", 1], ["created_at", "2017-11-24 01:31:44.344412"], ["updated_at", "2017-11-24 01:31:44.344412"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 7], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:31:44.363949"], ["updated_at", "2017-11-24 01:31:44.363949"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 8], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 8], ["line_item_id", 1], ["created_at", "2017-11-24 01:31:44.371680"], ["updated_at", "2017-11-24 01:31:44.371680"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:31:44.374021"], ["updated_at", "2017-11-24 01:31:44.374021"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 9], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:31:44.382838"], ["updated_at", "2017-11-24 01:31:44.382838"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 10], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 10], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 10], ["line_item_id", 1], ["created_at", "2017-11-24 01:31:44.388500"], ["updated_at", "2017-11-24 01:31:44.388500"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 10], ["id", 11], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 11], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:31:44.400017"], ["updated_at", "2017-11-24 01:31:44.400017"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 11], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 11], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 11], ["line_item_id", 1], ["created_at", "2017-11-24 01:31:44.405062"], ["updated_at", "2017-11-24 01:31:44.405062"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 11], ["id", 12], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 01:31:44.408365"], ["id", 12]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:31:44.414581"], ["updated_at", "2017-11-24 01:31:44.414581"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 12], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 12], ["created_at", "2017-11-24 01:31:44.417478"], ["updated_at", "2017-11-24 01:31:44.417478"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 12], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 12], ["id", 13], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 01:31:44.424507"], ["id", 13]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 01:31:44.446620"], ["updated_at", "2017-11-24 01:31:44.446620"]]
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 13], ["created_at", "2017-11-24 01:31:44.461501"], ["updated_at", "2017-11-24 01:31:44.461501"]]
  [1m[35m (4.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 13], ["id", 14], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 14], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 01:31:44.487835"], ["id", 14]]
  [1m[35m (10.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 13], ["created_at", "2017-11-24 01:31:44.521559"], ["updated_at", "2017-11-24 01:31:44.521559"]]
  [1m[35m (10.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 13], ["id", 15], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 15], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (10.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.6ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (0.9ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (285.6ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:46:29.919679"], ["updated_at", "2017-11-24 03:46:29.919679"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 03:46:29.928143"], ["updated_at", "2017-11-24 03:46:29.928143"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 03:46:29.931765"], ["updated_at", "2017-11-24 03:46:29.931765"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:46:29.937470"], ["updated_at", "2017-11-24 03:46:29.937470"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 03:46:29.941050"], ["updated_at", "2017-11-24 03:46:29.941050"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:46:29.943712"], ["updated_at", "2017-11-24 03:46:29.943712"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 3], ["line_item_id", 1], ["created_at", "2017-11-24 03:46:29.945702"], ["updated_at", "2017-11-24 03:46:29.945702"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:46:29.951877"], ["updated_at", "2017-11-24 03:46:29.951877"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 4], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 4], ["line_item_id", 1], ["created_at", "2017-11-24 03:46:29.955089"], ["updated_at", "2017-11-24 03:46:29.955089"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:46:29.957119"], ["updated_at", "2017-11-24 03:46:29.957119"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 5], ["created_at", "2017-11-24 03:46:29.958763"], ["updated_at", "2017-11-24 03:46:29.958763"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:46:29.967019"], ["updated_at", "2017-11-24 03:46:29.967019"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 6], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 6], ["line_item_id", 1], ["created_at", "2017-11-24 03:46:29.970801"], ["updated_at", "2017-11-24 03:46:29.970801"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 6], ["created_at", "2017-11-24 03:46:29.973347"], ["updated_at", "2017-11-24 03:46:29.973347"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:46:29.978885"], ["updated_at", "2017-11-24 03:46:29.978885"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 7], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 7], ["line_item_id", 1], ["created_at", "2017-11-24 03:46:29.982132"], ["updated_at", "2017-11-24 03:46:29.982132"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 7], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:46:30.001723"], ["updated_at", "2017-11-24 03:46:30.001723"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 8], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 8], ["line_item_id", 1], ["created_at", "2017-11-24 03:46:30.004923"], ["updated_at", "2017-11-24 03:46:30.004923"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:46:30.007172"], ["updated_at", "2017-11-24 03:46:30.007172"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 9], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:46:30.015979"], ["updated_at", "2017-11-24 03:46:30.015979"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 10], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 10], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 10], ["line_item_id", 1], ["created_at", "2017-11-24 03:46:30.021404"], ["updated_at", "2017-11-24 03:46:30.021404"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:46:30.029913"], ["updated_at", "2017-11-24 03:46:30.029913"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 11], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 11], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 11], ["line_item_id", 1], ["created_at", "2017-11-24 03:46:30.035676"], ["updated_at", "2017-11-24 03:46:30.035676"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:46:30.050337"], ["updated_at", "2017-11-24 03:46:30.050337"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 12], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 12], ["created_at", "2017-11-24 03:46:30.054785"], ["updated_at", "2017-11-24 03:46:30.054785"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 12], ["LIMIT", 1]]
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:46:30.084003"], ["updated_at", "2017-11-24 03:46:30.084003"]]
  [1m[35m (7.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 13], ["created_at", "2017-11-24 03:46:30.097180"], ["updated_at", "2017-11-24 03:46:30.097180"]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:40.446003"], ["updated_at", "2017-11-24 03:47:40.446003"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 14], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 14], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:40.454260"], ["updated_at", "2017-11-24 03:47:40.454260"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 14], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:40.457948"], ["updated_at", "2017-11-24 03:47:40.457948"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:40.463308"], ["updated_at", "2017-11-24 03:47:40.463308"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 15], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 15], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:40.466521"], ["updated_at", "2017-11-24 03:47:40.466521"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:40.468920"], ["updated_at", "2017-11-24 03:47:40.468920"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 16], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:40.470740"], ["updated_at", "2017-11-24 03:47:40.470740"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:40.476120"], ["updated_at", "2017-11-24 03:47:40.476120"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 17], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 17], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:40.479136"], ["updated_at", "2017-11-24 03:47:40.479136"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:40.481359"], ["updated_at", "2017-11-24 03:47:40.481359"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 18], ["created_at", "2017-11-24 03:47:40.482967"], ["updated_at", "2017-11-24 03:47:40.482967"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:40.489013"], ["updated_at", "2017-11-24 03:47:40.489013"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 19], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 19], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:40.493232"], ["updated_at", "2017-11-24 03:47:40.493232"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 19], ["created_at", "2017-11-24 03:47:40.495548"], ["updated_at", "2017-11-24 03:47:40.495548"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:40.500885"], ["updated_at", "2017-11-24 03:47:40.500885"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 20], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 20], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:40.504025"], ["updated_at", "2017-11-24 03:47:40.504025"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 20], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:40.519850"], ["updated_at", "2017-11-24 03:47:40.519850"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 21], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 21], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:40.524846"], ["updated_at", "2017-11-24 03:47:40.524846"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:40.527216"], ["updated_at", "2017-11-24 03:47:40.527216"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 22], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:40.547503"], ["updated_at", "2017-11-24 03:47:40.547503"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 23], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 23], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 23], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:40.555531"], ["updated_at", "2017-11-24 03:47:40.555531"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 23], ["id", 25], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 25], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 03:47:40.559498"], ["id", 25]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:40.566560"], ["updated_at", "2017-11-24 03:47:40.566560"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 24], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:40.596391"], ["updated_at", "2017-11-24 03:47:40.596391"]]
  [1m[35m (11.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 25], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (4.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.5ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (0.7ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (295.4ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:45.327714"], ["updated_at", "2017-11-24 03:47:45.327714"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:45.336119"], ["updated_at", "2017-11-24 03:47:45.336119"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:45.340226"], ["updated_at", "2017-11-24 03:47:45.340226"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:45.346339"], ["updated_at", "2017-11-24 03:47:45.346339"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:45.349845"], ["updated_at", "2017-11-24 03:47:45.349845"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:45.351918"], ["updated_at", "2017-11-24 03:47:45.351918"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 3], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:45.353800"], ["updated_at", "2017-11-24 03:47:45.353800"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:45.359544"], ["updated_at", "2017-11-24 03:47:45.359544"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 4], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 4], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:45.362840"], ["updated_at", "2017-11-24 03:47:45.362840"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:45.364869"], ["updated_at", "2017-11-24 03:47:45.364869"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 5], ["created_at", "2017-11-24 03:47:45.366340"], ["updated_at", "2017-11-24 03:47:45.366340"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:45.373172"], ["updated_at", "2017-11-24 03:47:45.373172"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 6], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 6], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:45.376291"], ["updated_at", "2017-11-24 03:47:45.376291"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 6], ["created_at", "2017-11-24 03:47:45.378115"], ["updated_at", "2017-11-24 03:47:45.378115"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:45.383928"], ["updated_at", "2017-11-24 03:47:45.383928"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 7], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 7], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:45.387495"], ["updated_at", "2017-11-24 03:47:45.387495"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 7], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:45.404365"], ["updated_at", "2017-11-24 03:47:45.404365"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 8], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 8], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:45.408137"], ["updated_at", "2017-11-24 03:47:45.408137"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:45.410121"], ["updated_at", "2017-11-24 03:47:45.410121"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 9], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:45.420593"], ["updated_at", "2017-11-24 03:47:45.420593"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 10], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 10], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 10], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:45.425931"], ["updated_at", "2017-11-24 03:47:45.425931"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 10], ["id", 11], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 11], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:45.437717"], ["updated_at", "2017-11-24 03:47:45.437717"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 11], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 11], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 11], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:45.447027"], ["updated_at", "2017-11-24 03:47:45.447027"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 11], ["id", 12], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 03:47:45.450712"], ["id", 12]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:45.456913"], ["updated_at", "2017-11-24 03:47:45.456913"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 12], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 12], ["created_at", "2017-11-24 03:47:45.460231"], ["updated_at", "2017-11-24 03:47:45.460231"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 12], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 12], ["id", 13], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 03:47:45.466204"], ["id", 13]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:45.490664"], ["updated_at", "2017-11-24 03:47:45.490664"]]
  [1m[35m (10.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 13], ["created_at", "2017-11-24 03:47:45.508133"], ["updated_at", "2017-11-24 03:47:45.508133"]]
  [1m[35m (4.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 13], ["id", 14], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 14], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 03:47:45.535281"], ["id", 14]]
  [1m[35m (9.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 13], ["created_at", "2017-11-24 03:47:45.565867"], ["updated_at", "2017-11-24 03:47:45.565867"]]
  [1m[35m (12.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 13], ["id", 15], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 15], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (9.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.9ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (0.9ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (262.8ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:50.039812"], ["updated_at", "2017-11-24 03:47:50.039812"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:50.048395"], ["updated_at", "2017-11-24 03:47:50.048395"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:50.052527"], ["updated_at", "2017-11-24 03:47:50.052527"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:50.058186"], ["updated_at", "2017-11-24 03:47:50.058186"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:50.061566"], ["updated_at", "2017-11-24 03:47:50.061566"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:50.063993"], ["updated_at", "2017-11-24 03:47:50.063993"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 3], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:50.065895"], ["updated_at", "2017-11-24 03:47:50.065895"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:50.071649"], ["updated_at", "2017-11-24 03:47:50.071649"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 4], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 4], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:50.074839"], ["updated_at", "2017-11-24 03:47:50.074839"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:50.076738"], ["updated_at", "2017-11-24 03:47:50.076738"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 5], ["created_at", "2017-11-24 03:47:50.078279"], ["updated_at", "2017-11-24 03:47:50.078279"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:50.084886"], ["updated_at", "2017-11-24 03:47:50.084886"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 6], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 6], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:50.089806"], ["updated_at", "2017-11-24 03:47:50.089806"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 6], ["created_at", "2017-11-24 03:47:50.091992"], ["updated_at", "2017-11-24 03:47:50.091992"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:50.097776"], ["updated_at", "2017-11-24 03:47:50.097776"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 7], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 7], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:50.101225"], ["updated_at", "2017-11-24 03:47:50.101225"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 7], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:50.119968"], ["updated_at", "2017-11-24 03:47:50.119968"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 8], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 8], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:50.123525"], ["updated_at", "2017-11-24 03:47:50.123525"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:50.125499"], ["updated_at", "2017-11-24 03:47:50.125499"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 9], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:50.134398"], ["updated_at", "2017-11-24 03:47:50.134398"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 10], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 10], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 10], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:50.139669"], ["updated_at", "2017-11-24 03:47:50.139669"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 10], ["id", 11], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 11], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:50.150987"], ["updated_at", "2017-11-24 03:47:50.150987"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 11], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 11], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 11], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:50.156175"], ["updated_at", "2017-11-24 03:47:50.156175"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 11], ["id", 12], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 03:47:50.159186"], ["id", 12]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:50.166011"], ["updated_at", "2017-11-24 03:47:50.166011"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 12], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 12], ["created_at", "2017-11-24 03:47:50.169180"], ["updated_at", "2017-11-24 03:47:50.169180"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 12], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 12], ["id", 13], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 03:47:50.174743"], ["id", 13]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:50.203124"], ["updated_at", "2017-11-24 03:47:50.203124"]]
  [1m[35m (3.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 13], ["created_at", "2017-11-24 03:47:50.211261"], ["updated_at", "2017-11-24 03:47:50.211261"]]
  [1m[35m (3.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 13], ["id", 14], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 14], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 03:47:50.240771"], ["id", 14]]
  [1m[35m (9.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 13], ["created_at", "2017-11-24 03:47:50.273137"], ["updated_at", "2017-11-24 03:47:50.273137"]]
  [1m[35m (10.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 13], ["id", 15], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 15], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (12.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.0ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.2ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (251.1ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:52.887314"], ["updated_at", "2017-11-24 03:47:52.887314"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:52.895138"], ["updated_at", "2017-11-24 03:47:52.895138"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:52.898050"], ["updated_at", "2017-11-24 03:47:52.898050"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:52.903408"], ["updated_at", "2017-11-24 03:47:52.903408"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:52.906606"], ["updated_at", "2017-11-24 03:47:52.906606"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:52.908413"], ["updated_at", "2017-11-24 03:47:52.908413"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 3], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:52.910005"], ["updated_at", "2017-11-24 03:47:52.910005"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:52.915065"], ["updated_at", "2017-11-24 03:47:52.915065"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 4], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 4], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:52.918167"], ["updated_at", "2017-11-24 03:47:52.918167"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:52.919920"], ["updated_at", "2017-11-24 03:47:52.919920"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 5], ["created_at", "2017-11-24 03:47:52.921381"], ["updated_at", "2017-11-24 03:47:52.921381"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:52.926079"], ["updated_at", "2017-11-24 03:47:52.926079"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 6], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 6], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:52.931031"], ["updated_at", "2017-11-24 03:47:52.931031"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 6], ["created_at", "2017-11-24 03:47:52.933065"], ["updated_at", "2017-11-24 03:47:52.933065"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:52.937895"], ["updated_at", "2017-11-24 03:47:52.937895"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 7], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 7], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:52.941162"], ["updated_at", "2017-11-24 03:47:52.941162"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 7], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:52.956712"], ["updated_at", "2017-11-24 03:47:52.956712"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 8], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 8], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:52.965032"], ["updated_at", "2017-11-24 03:47:52.965032"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:52.967005"], ["updated_at", "2017-11-24 03:47:52.967005"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 9], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:52.974460"], ["updated_at", "2017-11-24 03:47:52.974460"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 10], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 10], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 10], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:52.979311"], ["updated_at", "2017-11-24 03:47:52.979311"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 10], ["id", 11], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 11], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:52.987138"], ["updated_at", "2017-11-24 03:47:52.987138"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 11], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 11], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 11], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:52.993403"], ["updated_at", "2017-11-24 03:47:52.993403"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 11], ["id", 12], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 03:47:52.996572"], ["id", 12]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:53.002429"], ["updated_at", "2017-11-24 03:47:53.002429"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 12], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 12], ["created_at", "2017-11-24 03:47:53.005363"], ["updated_at", "2017-11-24 03:47:53.005363"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 12], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 12], ["id", 13], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 03:47:53.010124"], ["id", 13]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:53.031887"], ["updated_at", "2017-11-24 03:47:53.031887"]]
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 13], ["created_at", "2017-11-24 03:47:53.044168"], ["updated_at", "2017-11-24 03:47:53.044168"]]
  [1m[35m (7.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 13], ["id", 14], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 14], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 03:47:53.079254"], ["id", 14]]
  [1m[35m (4.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 13], ["created_at", "2017-11-24 03:47:53.103535"], ["updated_at", "2017-11-24 03:47:53.103535"]]
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 13], ["id", 15], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 15], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (7.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.1ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.3ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (284.0ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:57.149732"], ["updated_at", "2017-11-24 03:47:57.149732"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:57.157265"], ["updated_at", "2017-11-24 03:47:57.157265"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:57.160214"], ["updated_at", "2017-11-24 03:47:57.160214"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:57.165876"], ["updated_at", "2017-11-24 03:47:57.165876"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:57.169005"], ["updated_at", "2017-11-24 03:47:57.169005"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:57.170929"], ["updated_at", "2017-11-24 03:47:57.170929"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 3], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:57.172478"], ["updated_at", "2017-11-24 03:47:57.172478"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:57.178382"], ["updated_at", "2017-11-24 03:47:57.178382"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 4], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 4], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:57.181608"], ["updated_at", "2017-11-24 03:47:57.181608"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:57.183494"], ["updated_at", "2017-11-24 03:47:57.183494"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 5], ["created_at", "2017-11-24 03:47:57.184928"], ["updated_at", "2017-11-24 03:47:57.184928"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:57.190868"], ["updated_at", "2017-11-24 03:47:57.190868"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 6], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 6], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:57.195414"], ["updated_at", "2017-11-24 03:47:57.195414"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 6], ["created_at", "2017-11-24 03:47:57.197365"], ["updated_at", "2017-11-24 03:47:57.197365"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:57.202517"], ["updated_at", "2017-11-24 03:47:57.202517"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 7], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 7], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:57.205598"], ["updated_at", "2017-11-24 03:47:57.205598"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 7], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:57.222396"], ["updated_at", "2017-11-24 03:47:57.222396"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 8], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 8], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:57.226662"], ["updated_at", "2017-11-24 03:47:57.226662"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:57.228524"], ["updated_at", "2017-11-24 03:47:57.228524"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 9], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:57.236653"], ["updated_at", "2017-11-24 03:47:57.236653"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 10], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 10], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 10], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:57.241568"], ["updated_at", "2017-11-24 03:47:57.241568"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 10], ["id", 11], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 11], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:57.249842"], ["updated_at", "2017-11-24 03:47:57.249842"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 11], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.8ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 11], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 11], ["line_item_id", 1], ["created_at", "2017-11-24 03:47:57.256527"], ["updated_at", "2017-11-24 03:47:57.256527"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 11], ["id", 12], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 03:47:57.259857"], ["id", 12]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:57.266001"], ["updated_at", "2017-11-24 03:47:57.266001"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 12], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 12], ["created_at", "2017-11-24 03:47:57.269017"], ["updated_at", "2017-11-24 03:47:57.269017"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 12], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 12], ["id", 13], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 03:47:57.277004"], ["id", 13]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 03:47:57.301144"], ["updated_at", "2017-11-24 03:47:57.301144"]]
  [1m[35m (12.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 13], ["created_at", "2017-11-24 03:47:57.318420"], ["updated_at", "2017-11-24 03:47:57.318420"]]
  [1m[35m (3.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 13], ["id", 14], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 14], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 03:47:57.345581"], ["id", 14]]
  [1m[35m (11.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 13], ["created_at", "2017-11-24 03:47:57.376936"], ["updated_at", "2017-11-24 03:47:57.376936"]]
  [1m[35m (13.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 13], ["id", 15], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 15], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (11.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.1ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.5ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (272.9ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:29:04.141197"], ["updated_at", "2017-11-24 08:29:04.141197"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 08:29:04.150110"], ["updated_at", "2017-11-24 08:29:04.150110"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 08:29:04.153973"], ["updated_at", "2017-11-24 08:29:04.153973"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:29:04.159551"], ["updated_at", "2017-11-24 08:29:04.159551"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 08:29:04.162853"], ["updated_at", "2017-11-24 08:29:04.162853"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:29:04.165278"], ["updated_at", "2017-11-24 08:29:04.165278"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 3], ["line_item_id", 1], ["created_at", "2017-11-24 08:29:04.167191"], ["updated_at", "2017-11-24 08:29:04.167191"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:29:04.172982"], ["updated_at", "2017-11-24 08:29:04.172982"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 4], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 4], ["line_item_id", 1], ["created_at", "2017-11-24 08:29:04.176130"], ["updated_at", "2017-11-24 08:29:04.176130"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:29:04.178386"], ["updated_at", "2017-11-24 08:29:04.178386"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 5], ["created_at", "2017-11-24 08:29:04.180147"], ["updated_at", "2017-11-24 08:29:04.180147"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:29:04.187922"], ["updated_at", "2017-11-24 08:29:04.187922"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 6], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 6], ["line_item_id", 1], ["created_at", "2017-11-24 08:29:04.191694"], ["updated_at", "2017-11-24 08:29:04.191694"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 6], ["created_at", "2017-11-24 08:29:04.193940"], ["updated_at", "2017-11-24 08:29:04.193940"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:29:04.199669"], ["updated_at", "2017-11-24 08:29:04.199669"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 7], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 7], ["line_item_id", 1], ["created_at", "2017-11-24 08:29:04.202788"], ["updated_at", "2017-11-24 08:29:04.202788"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 7], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:29:04.221695"], ["updated_at", "2017-11-24 08:29:04.221695"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 8], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 8], ["line_item_id", 1], ["created_at", "2017-11-24 08:29:04.225431"], ["updated_at", "2017-11-24 08:29:04.225431"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:29:04.227676"], ["updated_at", "2017-11-24 08:29:04.227676"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 9], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:29:04.236615"], ["updated_at", "2017-11-24 08:29:04.236615"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 10], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 10], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 10], ["line_item_id", 1], ["created_at", "2017-11-24 08:29:04.241761"], ["updated_at", "2017-11-24 08:29:04.241761"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:29:04.250670"], ["updated_at", "2017-11-24 08:29:04.250670"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 11], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 11], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 11], ["line_item_id", 1], ["created_at", "2017-11-24 08:29:04.256000"], ["updated_at", "2017-11-24 08:29:04.256000"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:29:04.270136"], ["updated_at", "2017-11-24 08:29:04.270136"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 12], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 12], ["created_at", "2017-11-24 08:29:04.273507"], ["updated_at", "2017-11-24 08:29:04.273507"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 12], ["LIMIT", 1]]
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:29:04.301932"], ["updated_at", "2017-11-24 08:29:04.301932"]]
  [1m[35m (7.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 13], ["created_at", "2017-11-24 08:29:04.316696"], ["updated_at", "2017-11-24 08:29:04.316696"]]
  [1m[35m (3.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:40:25.144686"], ["updated_at", "2017-11-24 08:40:25.144686"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 14], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 14], ["line_item_id", 1], ["created_at", "2017-11-24 08:40:25.152906"], ["updated_at", "2017-11-24 08:40:25.152906"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 14], ["line_item_id", 1], ["created_at", "2017-11-24 08:40:25.156595"], ["updated_at", "2017-11-24 08:40:25.156595"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:40:25.162262"], ["updated_at", "2017-11-24 08:40:25.162262"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 15], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 15], ["line_item_id", 1], ["created_at", "2017-11-24 08:40:25.165289"], ["updated_at", "2017-11-24 08:40:25.165289"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:40:25.167501"], ["updated_at", "2017-11-24 08:40:25.167501"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 16], ["line_item_id", 1], ["created_at", "2017-11-24 08:40:25.169056"], ["updated_at", "2017-11-24 08:40:25.169056"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:40:25.174770"], ["updated_at", "2017-11-24 08:40:25.174770"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 17], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 17], ["line_item_id", 1], ["created_at", "2017-11-24 08:40:25.178182"], ["updated_at", "2017-11-24 08:40:25.178182"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:40:25.180492"], ["updated_at", "2017-11-24 08:40:25.180492"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 18], ["created_at", "2017-11-24 08:40:25.182305"], ["updated_at", "2017-11-24 08:40:25.182305"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:40:25.189940"], ["updated_at", "2017-11-24 08:40:25.189940"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 19], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 19], ["line_item_id", 1], ["created_at", "2017-11-24 08:40:25.193407"], ["updated_at", "2017-11-24 08:40:25.193407"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 19], ["created_at", "2017-11-24 08:40:25.195665"], ["updated_at", "2017-11-24 08:40:25.195665"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:40:25.201816"], ["updated_at", "2017-11-24 08:40:25.201816"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 20], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 20], ["line_item_id", 1], ["created_at", "2017-11-24 08:40:25.205027"], ["updated_at", "2017-11-24 08:40:25.205027"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 20], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:40:25.224190"], ["updated_at", "2017-11-24 08:40:25.224190"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 21], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 21], ["line_item_id", 1], ["created_at", "2017-11-24 08:40:25.227682"], ["updated_at", "2017-11-24 08:40:25.227682"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:40:25.229679"], ["updated_at", "2017-11-24 08:40:25.229679"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 22], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:40:25.255159"], ["updated_at", "2017-11-24 08:40:25.255159"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 23], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 23], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 23], ["line_item_id", 1], ["created_at", "2017-11-24 08:40:25.260632"], ["updated_at", "2017-11-24 08:40:25.260632"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:40:25.269228"], ["updated_at", "2017-11-24 08:40:25.269228"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 24], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:40:25.295136"], ["updated_at", "2017-11-24 08:40:25.295136"]]
  [1m[35m (58.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 25], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (4.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.0ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.1ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (275.4ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:41:16.931812"], ["updated_at", "2017-11-24 08:41:16.931812"]]
  [1m[35m (41.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 08:41:16.981893"], ["updated_at", "2017-11-24 08:41:16.981893"]]
  [1m[35m (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 08:41:16.988191"], ["updated_at", "2017-11-24 08:41:16.988191"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (17.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.9ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (0.9ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (251.7ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:41:17.277461"], ["updated_at", "2017-11-24 08:41:17.277461"]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 08:41:17.288499"], ["updated_at", "2017-11-24 08:41:17.288499"]]
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:41:17.297645"], ["updated_at", "2017-11-24 08:41:17.297645"]]
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 08:41:17.308340"], ["updated_at", "2017-11-24 08:41:17.308340"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (244.2ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:41:17.576465"], ["updated_at", "2017-11-24 08:41:17.576465"]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 08:41:17.587562"], ["updated_at", "2017-11-24 08:41:17.587562"]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:41:17.596592"], ["updated_at", "2017-11-24 08:41:17.596592"]]
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 2], ["created_at", "2017-11-24 08:41:17.607417"], ["updated_at", "2017-11-24 08:41:17.607417"]]
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (8.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (311.1ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (7.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:41:17.953945"], ["updated_at", "2017-11-24 08:41:17.953945"]]
  [1m[35m (4.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 08:41:17.964549"], ["updated_at", "2017-11-24 08:41:17.964549"]]
  [1m[35m (5.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 08:41:17.972953"], ["updated_at", "2017-11-24 08:41:17.972953"]]
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (9.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.2ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (9.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:41:18.263035"], ["updated_at", "2017-11-24 08:41:18.263035"]]
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 08:41:18.273665"], ["updated_at", "2017-11-24 08:41:18.273665"]]
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.3ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:41:18.572887"], ["updated_at", "2017-11-24 08:41:18.572887"]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 08:41:18.584281"], ["updated_at", "2017-11-24 08:41:18.584281"]]
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:41:18.593126"], ["updated_at", "2017-11-24 08:41:18.593126"]]
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (5.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.5ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:41:18.884585"], ["updated_at", "2017-11-24 08:41:18.884585"]]
  [1m[35m (4.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 08:41:18.895308"], ["updated_at", "2017-11-24 08:41:18.895308"]]
  [1m[35m (5.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (7.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.5ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:41:19.181878"], ["updated_at", "2017-11-24 08:41:19.181878"]]
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.6ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 08:41:19.194961"], ["updated_at", "2017-11-24 08:41:19.194961"]]
  [1m[35m (4.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (5.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (278.3ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:41:19.515688"], ["updated_at", "2017-11-24 08:41:19.515688"]]
  [1m[35m (4.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 08:41:19.526588"], ["updated_at", "2017-11-24 08:41:19.526588"]]
  [1m[35m (4.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (4.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (277.4ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:41:19.835526"], ["updated_at", "2017-11-24 08:41:19.835526"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 08:41:19.846400"], ["updated_at", "2017-11-24 08:41:19.846400"]]
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:43:55.194748"], ["updated_at", "2017-11-24 08:43:55.194748"]]
  [1m[35m (36.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 08:43:55.239088"], ["updated_at", "2017-11-24 08:43:55.239088"]]
  [1m[35m (13.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 08:43:55.256461"], ["updated_at", "2017-11-24 08:43:55.256461"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (5.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.9ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (0.9ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (274.6ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (7.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:43:55.559107"], ["updated_at", "2017-11-24 08:43:55.559107"]]
  [1m[35m (3.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 08:43:55.568990"], ["updated_at", "2017-11-24 08:43:55.568990"]]
  [1m[35m (4.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:43:55.577222"], ["updated_at", "2017-11-24 08:43:55.577222"]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 08:43:55.587993"], ["updated_at", "2017-11-24 08:43:55.587993"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (266.2ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (9.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:43:55.878061"], ["updated_at", "2017-11-24 08:43:55.878061"]]
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 08:43:55.888648"], ["updated_at", "2017-11-24 08:43:55.888648"]]
  [1m[35m (7.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:43:55.898237"], ["updated_at", "2017-11-24 08:43:55.898237"]]
  [1m[35m (8.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 2], ["created_at", "2017-11-24 08:43:55.908984"], ["updated_at", "2017-11-24 08:43:55.908984"]]
  [1m[35m (8.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (9.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.2ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (9.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:43:56.199477"], ["updated_at", "2017-11-24 08:43:56.199477"]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 08:43:56.210180"], ["updated_at", "2017-11-24 08:43:56.210180"]]
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 08:43:56.219324"], ["updated_at", "2017-11-24 08:43:56.219324"]]
  [1m[35m (8.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (9.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.3ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:43:56.509204"], ["updated_at", "2017-11-24 08:43:56.509204"]]
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 08:43:56.520077"], ["updated_at", "2017-11-24 08:43:56.520077"]]
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.1ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:43:56.819344"], ["updated_at", "2017-11-24 08:43:56.819344"]]
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 08:43:56.829869"], ["updated_at", "2017-11-24 08:43:56.829869"]]
  [1m[35m (7.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:43:56.839445"], ["updated_at", "2017-11-24 08:43:56.839445"]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (7.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (199.9ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:43:57.075452"], ["updated_at", "2017-11-24 08:43:57.075452"]]
  [1m[35m (5.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 08:43:57.087458"], ["updated_at", "2017-11-24 08:43:57.087458"]]
  [1m[35m (3.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (7.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (277.4ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:43:57.395113"], ["updated_at", "2017-11-24 08:43:57.395113"]]
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.6ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.4ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 08:43:57.408834"], ["updated_at", "2017-11-24 08:43:57.408834"]]
  [1m[35m (3.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (7.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.2ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:43:57.705087"], ["updated_at", "2017-11-24 08:43:57.705087"]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 08:43:57.715698"], ["updated_at", "2017-11-24 08:43:57.715698"]]
  [1m[35m (7.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.8ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:43:58.006341"], ["updated_at", "2017-11-24 08:43:58.006341"]]
  [1m[35m (3.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 08:43:58.015333"], ["updated_at", "2017-11-24 08:43:58.015333"]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:54:29.401684"], ["updated_at", "2017-11-24 08:54:29.401684"]]
  [1m[35m (13.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 08:54:29.423896"], ["updated_at", "2017-11-24 08:54:29.423896"]]
  [1m[35m (13.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 08:54:29.440875"], ["updated_at", "2017-11-24 08:54:29.440875"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.7ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (0.8ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (263.7ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:54:29.731060"], ["updated_at", "2017-11-24 08:54:29.731060"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 08:54:29.741348"], ["updated_at", "2017-11-24 08:54:29.741348"]]
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:54:29.750859"], ["updated_at", "2017-11-24 08:54:29.750859"]]
  [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 08:54:29.761694"], ["updated_at", "2017-11-24 08:54:29.761694"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (7.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.4ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:54:30.040925"], ["updated_at", "2017-11-24 08:54:30.040925"]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 08:54:30.052114"], ["updated_at", "2017-11-24 08:54:30.052114"]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:54:30.061189"], ["updated_at", "2017-11-24 08:54:30.061189"]]
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 2], ["created_at", "2017-11-24 08:54:30.071845"], ["updated_at", "2017-11-24 08:54:30.071845"]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (8.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (266.4ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:54:30.373449"], ["updated_at", "2017-11-24 08:54:30.373449"]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 08:54:30.384293"], ["updated_at", "2017-11-24 08:54:30.384293"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 08:54:30.393634"], ["updated_at", "2017-11-24 08:54:30.393634"]]
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (9.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (244.2ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (9.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:54:30.672605"], ["updated_at", "2017-11-24 08:54:30.672605"]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 08:54:30.687096"], ["updated_at", "2017-11-24 08:54:30.687096"]]
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.4ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:54:30.982808"], ["updated_at", "2017-11-24 08:54:30.982808"]]
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 08:54:30.994032"], ["updated_at", "2017-11-24 08:54:30.994032"]]
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:54:31.003724"], ["updated_at", "2017-11-24 08:54:31.003724"]]
  [1m[35m (7.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (233.2ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:54:31.272222"], ["updated_at", "2017-11-24 08:54:31.272222"]]
  [1m[35m (5.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 08:54:31.283784"], ["updated_at", "2017-11-24 08:54:31.283784"]]
  [1m[35m (4.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (7.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (211.1ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (9.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:54:31.525406"], ["updated_at", "2017-11-24 08:54:31.525406"]]
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.7ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 08:54:31.538469"], ["updated_at", "2017-11-24 08:54:31.538469"]]
  [1m[35m (4.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (9.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.3ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:54:31.835604"], ["updated_at", "2017-11-24 08:54:31.835604"]]
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 08:54:31.846757"], ["updated_at", "2017-11-24 08:54:31.846757"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (5.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (266.5ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:54:32.146091"], ["updated_at", "2017-11-24 08:54:32.146091"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 08:54:32.156632"], ["updated_at", "2017-11-24 08:54:32.156632"]]
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:58:34.014138"], ["updated_at", "2017-11-24 08:58:34.014138"]]
  [1m[35m (10.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 08:58:34.033382"], ["updated_at", "2017-11-24 08:58:34.033382"]]
  [1m[35m (13.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 08:58:34.050565"], ["updated_at", "2017-11-24 08:58:34.050565"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (16.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.1ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.1ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (251.1ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:58:34.339919"], ["updated_at", "2017-11-24 08:58:34.339919"]]
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 08:58:34.350609"], ["updated_at", "2017-11-24 08:58:34.350609"]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:58:34.359901"], ["updated_at", "2017-11-24 08:58:34.359901"]]
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 08:58:34.370658"], ["updated_at", "2017-11-24 08:58:34.370658"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.3ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:58:34.649883"], ["updated_at", "2017-11-24 08:58:34.649883"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 08:58:34.661017"], ["updated_at", "2017-11-24 08:58:34.661017"]]
  [1m[35m (5.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:58:34.669943"], ["updated_at", "2017-11-24 08:58:34.669943"]]
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 2], ["created_at", "2017-11-24 08:58:34.680619"], ["updated_at", "2017-11-24 08:58:34.680619"]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (8.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.2ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:58:34.970671"], ["updated_at", "2017-11-24 08:58:34.970671"]]
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 08:58:34.982031"], ["updated_at", "2017-11-24 08:58:34.982031"]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 08:58:34.991061"], ["updated_at", "2017-11-24 08:58:34.991061"]]
  [1m[35m (8.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.2ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:58:35.281215"], ["updated_at", "2017-11-24 08:58:35.281215"]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 08:58:35.295650"], ["updated_at", "2017-11-24 08:58:35.295650"]]
  [1m[35m (13.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (9.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (244.1ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:58:35.591126"], ["updated_at", "2017-11-24 08:58:35.591126"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 08:58:35.602018"], ["updated_at", "2017-11-24 08:58:35.602018"]]
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:58:35.611072"], ["updated_at", "2017-11-24 08:58:35.611072"]]
  [1m[35m (7.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (299.6ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:58:35.947159"], ["updated_at", "2017-11-24 08:58:35.947159"]]
  [1m[35m (4.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 08:58:35.958645"], ["updated_at", "2017-11-24 08:58:35.958645"]]
  [1m[35m (4.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (244.1ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:58:36.233325"], ["updated_at", "2017-11-24 08:58:36.233325"]]
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.6ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 08:58:36.246675"], ["updated_at", "2017-11-24 08:58:36.246675"]]
  [1m[35m (4.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (9.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.2ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:58:36.543569"], ["updated_at", "2017-11-24 08:58:36.543569"]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 08:58:36.554512"], ["updated_at", "2017-11-24 08:58:36.554512"]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (5.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (321.7ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 08:58:36.908896"], ["updated_at", "2017-11-24 08:58:36.908896"]]
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 08:58:36.919631"], ["updated_at", "2017-11-24 08:58:36.919631"]]
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:02:30.516954"], ["updated_at", "2017-11-24 09:02:30.516954"]]
  [1m[35m (34.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 09:02:30.559602"], ["updated_at", "2017-11-24 09:02:30.559602"]]
  [1m[35m (13.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 09:02:30.576840"], ["updated_at", "2017-11-24 09:02:30.576840"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (16.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.1ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.0ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (251.3ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:02:30.865960"], ["updated_at", "2017-11-24 09:02:30.865960"]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:02:30.877254"], ["updated_at", "2017-11-24 09:02:30.877254"]]
  [1m[35m (5.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:02:30.886116"], ["updated_at", "2017-11-24 09:02:30.886116"]]
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 09:02:30.896893"], ["updated_at", "2017-11-24 09:02:30.896893"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.2ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:02:31.176036"], ["updated_at", "2017-11-24 09:02:31.176036"]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:02:31.186880"], ["updated_at", "2017-11-24 09:02:31.186880"]]
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:02:31.195989"], ["updated_at", "2017-11-24 09:02:31.195989"]]
  [1m[35m (8.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 2], ["created_at", "2017-11-24 09:02:31.206830"], ["updated_at", "2017-11-24 09:02:31.206830"]]
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (9.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (244.2ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:02:31.486198"], ["updated_at", "2017-11-24 09:02:31.486198"]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:02:31.496810"], ["updated_at", "2017-11-24 09:02:31.496810"]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 09:02:31.506148"], ["updated_at", "2017-11-24 09:02:31.506148"]]
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.1ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:02:31.796170"], ["updated_at", "2017-11-24 09:02:31.796170"]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:02:31.807249"], ["updated_at", "2017-11-24 09:02:31.807249"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (8.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.2ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:02:32.105931"], ["updated_at", "2017-11-24 09:02:32.105931"]]
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:02:32.116659"], ["updated_at", "2017-11-24 09:02:32.116659"]]
  [1m[35m (7.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:02:32.126247"], ["updated_at", "2017-11-24 09:02:32.126247"]]
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (7.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.2ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (9.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:02:32.417484"], ["updated_at", "2017-11-24 09:02:32.417484"]]
  [1m[35m (5.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:02:32.428583"], ["updated_at", "2017-11-24 09:02:32.428583"]]
  [1m[35m (5.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (7.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.9ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:02:32.717676"], ["updated_at", "2017-11-24 09:02:32.717676"]]
  [1m[35m (13.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.7ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.4ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:02:32.742435"], ["updated_at", "2017-11-24 09:02:32.742435"]]
  [1m[35m (11.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.6ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.2ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:02:33.047347"], ["updated_at", "2017-11-24 09:02:33.047347"]]
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 09:02:33.058631"], ["updated_at", "2017-11-24 09:02:33.058631"]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.2ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:02:33.346303"], ["updated_at", "2017-11-24 09:02:33.346303"]]
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 09:02:33.357289"], ["updated_at", "2017-11-24 09:02:33.357289"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:08:23.128425"], ["updated_at", "2017-11-24 09:08:23.128425"]]
  [1m[35m (12.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 09:08:23.149220"], ["updated_at", "2017-11-24 09:08:23.149220"]]
  [1m[35m (13.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 09:08:23.166637"], ["updated_at", "2017-11-24 09:08:23.166637"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (16.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.1ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.2ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (273.7ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:08:23.478403"], ["updated_at", "2017-11-24 09:08:23.478403"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:08:23.489862"], ["updated_at", "2017-11-24 09:08:23.489862"]]
  [1m[35m (5.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:08:23.498401"], ["updated_at", "2017-11-24 09:08:23.498401"]]
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 09:08:23.509089"], ["updated_at", "2017-11-24 09:08:23.509089"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.5ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:08:23.788377"], ["updated_at", "2017-11-24 09:08:23.788377"]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:08:23.799214"], ["updated_at", "2017-11-24 09:08:23.799214"]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:08:23.808444"], ["updated_at", "2017-11-24 09:08:23.808444"]]
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 2], ["created_at", "2017-11-24 09:08:23.819197"], ["updated_at", "2017-11-24 09:08:23.819197"]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (8.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.2ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:08:24.109384"], ["updated_at", "2017-11-24 09:08:24.109384"]]
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:08:24.119950"], ["updated_at", "2017-11-24 09:08:24.119950"]]
  [1m[35m (7.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 09:08:24.129492"], ["updated_at", "2017-11-24 09:08:24.129492"]]
  [1m[35m (8.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (9.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (210.9ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:08:24.375313"], ["updated_at", "2017-11-24 09:08:24.375313"]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:08:24.386115"], ["updated_at", "2017-11-24 09:08:24.386115"]]
  [1m[35m (13.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (9.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.2ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:08:24.696531"], ["updated_at", "2017-11-24 09:08:24.696531"]]
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:08:24.707204"], ["updated_at", "2017-11-24 09:08:24.707204"]]
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:08:24.716323"], ["updated_at", "2017-11-24 09:08:24.716323"]]
  [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (7.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.3ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:08:25.007407"], ["updated_at", "2017-11-24 09:08:25.007407"]]
  [1m[35m (5.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:08:25.019247"], ["updated_at", "2017-11-24 09:08:25.019247"]]
  [1m[35m (4.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.2ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:08:25.304871"], ["updated_at", "2017-11-24 09:08:25.304871"]]
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:08:25.318211"], ["updated_at", "2017-11-24 09:08:25.318211"]]
  [1m[35m (4.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (9.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (210.9ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:08:25.570953"], ["updated_at", "2017-11-24 09:08:25.570953"]]
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 09:08:25.582016"], ["updated_at", "2017-11-24 09:08:25.582016"]]
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (277.4ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:08:25.892082"], ["updated_at", "2017-11-24 09:08:25.892082"]]
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 09:08:25.903028"], ["updated_at", "2017-11-24 09:08:25.903028"]]
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:09:48.764021"], ["updated_at", "2017-11-24 09:09:48.764021"]]
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 09:09:48.778414"], ["updated_at", "2017-11-24 09:09:48.778414"]]
  [1m[35m (3.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 09:09:48.784986"], ["updated_at", "2017-11-24 09:09:48.784986"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (17.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.7ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (0.7ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (274.5ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (9.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:09:49.096683"], ["updated_at", "2017-11-24 09:09:49.096683"]]
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:09:49.107844"], ["updated_at", "2017-11-24 09:09:49.107844"]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:09:49.116968"], ["updated_at", "2017-11-24 09:09:49.116968"]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 09:09:49.127845"], ["updated_at", "2017-11-24 09:09:49.127845"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (266.5ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:09:49.418127"], ["updated_at", "2017-11-24 09:09:49.418127"]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:09:49.429070"], ["updated_at", "2017-11-24 09:09:49.429070"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:09:49.438187"], ["updated_at", "2017-11-24 09:09:49.438187"]]
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 2], ["created_at", "2017-11-24 09:09:49.448915"], ["updated_at", "2017-11-24 09:09:49.448915"]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (8.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (277.2ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:09:49.761263"], ["updated_at", "2017-11-24 09:09:49.761263"]]
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:09:49.772215"], ["updated_at", "2017-11-24 09:09:49.772215"]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 09:09:49.781332"], ["updated_at", "2017-11-24 09:09:49.781332"]]
  [1m[35m (8.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (9.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.3ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:09:50.071674"], ["updated_at", "2017-11-24 09:09:50.071674"]]
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:09:50.082352"], ["updated_at", "2017-11-24 09:09:50.082352"]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mService Load (0.4ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (7.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (244.3ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:09:50.370570"], ["updated_at", "2017-11-24 09:09:50.370570"]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:09:50.381520"], ["updated_at", "2017-11-24 09:09:50.381520"]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:09:50.390524"], ["updated_at", "2017-11-24 09:09:50.390524"]]
  [1m[35m (8.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (3.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (244.0ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:09:50.670862"], ["updated_at", "2017-11-24 09:09:50.670862"]]
  [1m[35m (4.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:09:50.682029"], ["updated_at", "2017-11-24 09:09:50.682029"]]
  [1m[35m (4.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (7.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (310.6ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:09:51.023588"], ["updated_at", "2017-11-24 09:09:51.023588"]]
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:09:51.036843"], ["updated_at", "2017-11-24 09:09:51.036843"]]
  [1m[35m (4.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (8.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.1ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:09:51.333517"], ["updated_at", "2017-11-24 09:09:51.333517"]]
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 09:09:51.344579"], ["updated_at", "2017-11-24 09:09:51.344579"]]
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.1ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:09:51.632840"], ["updated_at", "2017-11-24 09:09:51.632840"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 09:09:51.643308"], ["updated_at", "2017-11-24 09:09:51.643308"]]
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:12:13.423504"], ["updated_at", "2017-11-24 09:12:13.423504"]]
  [1m[35m (10.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 09:12:13.455935"], ["updated_at", "2017-11-24 09:12:13.455935"]]
  [1m[35m (12.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (9.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.0ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.1ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (251.7ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (7.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:13:01.643456"], ["updated_at", "2017-11-24 09:13:01.643456"]]
  [1m[35m (21.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:13:01.688650"], ["updated_at", "2017-11-24 09:13:01.688650"]]
  [1m[35m (9.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (9.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.1ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.2ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (251.2ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:13:22.703723"], ["updated_at", "2017-11-24 09:13:22.703723"]]
  [1m[35m (116.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 09:13:22.832141"], ["updated_at", "2017-11-24 09:13:22.832141"]]
  [1m[35m (9.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (9.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.8ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (0.7ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (252.1ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:14:21.627778"], ["updated_at", "2017-11-24 09:14:21.627778"]]
  [1m[35m (39.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 09:14:21.675085"], ["updated_at", "2017-11-24 09:14:21.675085"]]
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (9.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.9ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (0.7ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (208.0ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:14:26.245765"], ["updated_at", "2017-11-24 09:14:26.245765"]]
  [1m[35m (48.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:14:26.318829"], ["updated_at", "2017-11-24 09:14:26.318829"]]
  [1m[35m (9.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (10.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.8ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (0.7ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (252.1ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:16:20.819531"], ["updated_at", "2017-11-24 09:16:20.819531"]]
  [1m[35m (48.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.8ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (1.0ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:16:36.416970"], ["updated_at", "2017-11-24 09:16:36.416970"]]
  [1m[35m (44.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:18:22.233757"], ["updated_at", "2017-11-24 09:18:22.233757"]]
  [1m[35m (39.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (1.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 2], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.6ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:19:23.817357"], ["updated_at", "2017-11-24 09:19:23.817357"]]
  [1m[35m (38.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.8ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 3], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.6ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 3], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:19:44.777107"], ["updated_at", "2017-11-24 09:19:44.777107"]]
  [1m[35m (46.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.7ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 4], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.6ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 4], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:20:15.907364"], ["updated_at", "2017-11-24 09:20:15.907364"]]
  [1m[35m (45.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (1.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 5], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.6ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 5], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:24:55.468548"], ["updated_at", "2017-11-24 09:24:55.468548"]]
  [1m[35m (11.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (1.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 6], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (1.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 6], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:26:35.909642"], ["updated_at", "2017-11-24 09:26:35.909642"]]
  [1m[35m (43.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.7ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 7], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (2.1ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 7], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:27:17.088179"], ["updated_at", "2017-11-24 09:27:17.088179"]]
  [1m[35m (35.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (1.5ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 8], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (1.6ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 8], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:29:12.169893"], ["updated_at", "2017-11-24 09:29:12.169893"]]
  [1m[35m (39.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.6ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 9], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.5ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 9], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:29:34.989210"], ["updated_at", "2017-11-24 09:29:34.989210"]]
  [1m[35m (33.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (1.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 10], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.6ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 10], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:29:59.590391"], ["updated_at", "2017-11-24 09:29:59.590391"]]
  [1m[35m (36.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (1.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.5ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:30:01.383724"], ["updated_at", "2017-11-24 09:30:01.383724"]]
  [1m[35m (10.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (1.5ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (57.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.9ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.6ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (194.1ms)[0m  [1m[35mTRUNCATE TABLE "public"."services", "public"."payments", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:32:01.327013"], ["updated_at", "2017-11-24 09:32:01.327013"]]
  [1m[35m (38.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:32:01.373768"], ["updated_at", "2017-11-24 09:32:01.373768"]]
  [1m[35m (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:32:01.380906"], ["updated_at", "2017-11-24 09:32:01.380906"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (16.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.1ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.1ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (263.1ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:32:01.682540"], ["updated_at", "2017-11-24 09:32:01.682540"]]
  [1m[35m (4.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:32:01.691583"], ["updated_at", "2017-11-24 09:32:01.691583"]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:32:01.701017"], ["updated_at", "2017-11-24 09:32:01.701017"]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 09:32:01.711636"], ["updated_at", "2017-11-24 09:32:01.711636"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (7.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (244.1ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:32:01.979603"], ["updated_at", "2017-11-24 09:32:01.979603"]]
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:32:01.990764"], ["updated_at", "2017-11-24 09:32:01.990764"]]
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:32:01.999994"], ["updated_at", "2017-11-24 09:32:01.999994"]]
  [1m[35m (8.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 2], ["created_at", "2017-11-24 09:32:02.010721"], ["updated_at", "2017-11-24 09:32:02.010721"]]
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (221.9ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:32:02.267786"], ["updated_at", "2017-11-24 09:32:02.267786"]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:32:02.278051"], ["updated_at", "2017-11-24 09:32:02.278051"]]
  [1m[35m (7.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 09:32:02.287947"], ["updated_at", "2017-11-24 09:32:02.287947"]]
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.2ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:32:02.578060"], ["updated_at", "2017-11-24 09:32:02.578060"]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:32:02.588259"], ["updated_at", "2017-11-24 09:32:02.588259"]]
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (289.1ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (51.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:32:02.966874"], ["updated_at", "2017-11-24 09:32:02.966874"]]
  [1m[35m (95.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:32:03.069615"], ["updated_at", "2017-11-24 09:32:03.069615"]]
  [1m[35m (35.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:32:03.107779"], ["updated_at", "2017-11-24 09:32:03.107779"]]
  [1m[35m (18.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (7.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (244.1ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:32:03.409886"], ["updated_at", "2017-11-24 09:32:03.409886"]]
  [1m[35m (4.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (1.7ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (2.4ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:32:08.443481"], ["updated_at", "2017-11-24 09:32:08.443481"]]
  [1m[35m (58.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (57.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.9ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:32:15.886031"], ["updated_at", "2017-11-24 09:32:15.886031"]]
  [1m[35m (4.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (1.1ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.6ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 09:32:22.022977"], ["updated_at", "2017-11-24 09:32:22.022977"]]
  [1m[35m (71.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (21.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.3ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:32:22.393982"], ["updated_at", "2017-11-24 09:32:22.393982"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 09:32:22.404319"], ["updated_at", "2017-11-24 09:32:22.404319"]]
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (62.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (342.8ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 09:32:24.431211"], ["updated_at", "2017-11-24 09:32:24.431211"]]
  [1m[35m (28.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 09:32:24.463423"], ["updated_at", "2017-11-24 09:32:24.463423"]]
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:12:59.888629"], ["updated_at", "2017-11-24 10:12:59.888629"]]
  [1m[35m (14.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 10:12:59.910605"], ["updated_at", "2017-11-24 10:12:59.910605"]]
  [1m[35m (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 10:12:59.917442"], ["updated_at", "2017-11-24 10:12:59.917442"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (16.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.2ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.2ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (306.6ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:13:00.262632"], ["updated_at", "2017-11-24 10:13:00.262632"]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 10:13:00.272505"], ["updated_at", "2017-11-24 10:13:00.272505"]]
  [1m[35m (7.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:13:00.282310"], ["updated_at", "2017-11-24 10:13:00.282310"]]
  [1m[35m (9.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 10:13:00.293485"], ["updated_at", "2017-11-24 10:13:00.293485"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (7.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (277.4ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (9.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:13:00.594224"], ["updated_at", "2017-11-24 10:13:00.594224"]]
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 10:13:00.604670"], ["updated_at", "2017-11-24 10:13:00.604670"]]
  [1m[35m (7.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:13:00.614514"], ["updated_at", "2017-11-24 10:13:00.614514"]]
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 2], ["created_at", "2017-11-24 10:13:00.625139"], ["updated_at", "2017-11-24 10:13:00.625139"]]
  [1m[35m (9.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (9.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.2ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:13:00.915536"], ["updated_at", "2017-11-24 10:13:00.915536"]]
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 10:13:00.925875"], ["updated_at", "2017-11-24 10:13:00.925875"]]
  [1m[35m (7.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 10:13:00.935699"], ["updated_at", "2017-11-24 10:13:00.935699"]]
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (9.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (255.4ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:13:01.225960"], ["updated_at", "2017-11-24 10:13:01.225960"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (2.0ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 10:13:01.238673"], ["updated_at", "2017-11-24 10:13:01.238673"]]
  [1m[35m (4.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (7.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (266.2ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:13:01.547090"], ["updated_at", "2017-11-24 10:13:01.547090"]]
  [1m[35m (13.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 10:13:01.568298"], ["updated_at", "2017-11-24 10:13:01.568298"]]
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:13:01.578030"], ["updated_at", "2017-11-24 10:13:01.578030"]]
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (11.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (277.5ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:13:01.902539"], ["updated_at", "2017-11-24 10:13:01.902539"]]
  [1m[35m (4.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:38:21.377833"], ["updated_at", "2017-11-24 10:38:21.377833"]]
  [1m[35m (47.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 10:38:21.443752"], ["updated_at", "2017-11-24 10:38:21.443752"]]
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.8ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (0.8ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (285.5ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:38:38.664474"], ["updated_at", "2017-11-24 10:38:38.664474"]]
  [1m[35m (38.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 10:38:38.727042"], ["updated_at", "2017-11-24 10:38:38.727042"]]
  [1m[35m (12.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (9.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.1ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.0ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (296.2ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:40:06.585001"], ["updated_at", "2017-11-24 10:40:06.585001"]]
  [1m[35m (39.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 10:40:06.633956"], ["updated_at", "2017-11-24 10:40:06.633956"]]
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.1ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.0ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (262.8ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:42:31.612963"], ["updated_at", "2017-11-24 10:42:31.612963"]]
  [1m[35m (26.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 10:42:31.647550"], ["updated_at", "2017-11-24 10:42:31.647550"]]
  [1m[35m (24.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (12.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.1ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (0.8ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (252.9ms)[0m  [1m[35mTRUNCATE TABLE "public"."services", "public"."payments", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (4.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:42:41.709491"], ["updated_at", "2017-11-24 10:42:41.709491"]]
  [1m[35m (45.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 10:42:41.764635"], ["updated_at", "2017-11-24 10:42:41.764635"]]
  [1m[35m (3.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (7.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.6ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.1ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (252.1ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:42:59.340409"], ["updated_at", "2017-11-24 10:42:59.340409"]]
  [1m[35m (38.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 10:42:59.388120"], ["updated_at", "2017-11-24 10:42:59.388120"]]
  [1m[35m (13.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Load (0.6ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (71.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.0ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.2ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (311.7ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:43:45.565272"], ["updated_at", "2017-11-24 10:43:45.565272"]]
  [1m[35m (44.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 10:43:45.618209"], ["updated_at", "2017-11-24 10:43:45.618209"]]
  [1m[35m (13.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (58.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.1ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.0ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (279.2ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:44:22.627233"], ["updated_at", "2017-11-24 10:44:22.627233"]]
  [1m[35m (46.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 10:44:22.681388"], ["updated_at", "2017-11-24 10:44:22.681388"]]
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (63.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.1ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.1ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (256.0ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:44:34.624041"], ["updated_at", "2017-11-24 10:44:34.624041"]]
  [1m[35m (17.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 10:44:34.649329"], ["updated_at", "2017-11-24 10:44:34.649329"]]
  [1m[35m (13.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (7.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.1ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.1ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (273.5ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:45:59.313859"], ["updated_at", "2017-11-24 10:45:59.313859"]]
  [1m[35m (13.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 10:45:59.340423"], ["updated_at", "2017-11-24 10:45:59.340423"]]
  [1m[35m (9.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Load (1.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (6214.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (63.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.6ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.4ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[36mService Load (0.7ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (3.7ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[36mPayment Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 1], ["id", 1], ["line_item_id", 3014], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 3014], ["updated_at", "2017-11-24 10:46:05.705922"], ["id", 1]]
  [1m[35m (18.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (278.5ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:46:33.339342"], ["updated_at", "2017-11-24 10:46:33.339342"]]
  [1m[35m (50.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 1], ["created_at", "2017-11-24 10:46:33.402233"], ["updated_at", "2017-11-24 10:46:33.402233"]]
  [1m[35m (10.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Load (2.5ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (4.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (15.7ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (68.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (1.0ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (5772.8ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (18.8ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[36mService Load (3.0ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (1001.5ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[36mPayment Exists (992.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 1], ["id", 1], ["line_item_id", 3014], ["LIMIT", 1]]
  [1m[35mSQL (114.7ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 3014], ["updated_at", "2017-11-24 10:46:42.432367"], ["id", 1]]
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:51:56.454590"], ["updated_at", "2017-11-24 10:51:56.454590"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 10:51:56.462053"], ["updated_at", "2017-11-24 10:51:56.462053"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 10:51:56.465403"], ["updated_at", "2017-11-24 10:51:56.465403"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:51:56.471501"], ["updated_at", "2017-11-24 10:51:56.471501"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 3], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 3], ["line_item_id", 1], ["created_at", "2017-11-24 10:51:56.474551"], ["updated_at", "2017-11-24 10:51:56.474551"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:51:56.476564"], ["updated_at", "2017-11-24 10:51:56.476564"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 4], ["line_item_id", 1], ["created_at", "2017-11-24 10:51:56.478231"], ["updated_at", "2017-11-24 10:51:56.478231"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:51:56.484475"], ["updated_at", "2017-11-24 10:51:56.484475"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 5], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 5], ["line_item_id", 1], ["created_at", "2017-11-24 10:51:56.487076"], ["updated_at", "2017-11-24 10:51:56.487076"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:51:56.489068"], ["updated_at", "2017-11-24 10:51:56.489068"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 6], ["created_at", "2017-11-24 10:51:56.490848"], ["updated_at", "2017-11-24 10:51:56.490848"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:51:56.498443"], ["updated_at", "2017-11-24 10:51:56.498443"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 7], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 7], ["line_item_id", 1], ["created_at", "2017-11-24 10:51:56.504295"], ["updated_at", "2017-11-24 10:51:56.504295"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 7], ["created_at", "2017-11-24 10:51:56.506561"], ["updated_at", "2017-11-24 10:51:56.506561"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:51:56.512837"], ["updated_at", "2017-11-24 10:51:56.512837"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 8], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 8], ["line_item_id", 1], ["created_at", "2017-11-24 10:51:56.515453"], ["updated_at", "2017-11-24 10:51:56.515453"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 8], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:51:56.535008"], ["updated_at", "2017-11-24 10:51:56.535008"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 9], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 9], ["line_item_id", 1], ["created_at", "2017-11-24 10:51:56.538018"], ["updated_at", "2017-11-24 10:51:56.538018"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:51:56.540021"], ["updated_at", "2017-11-24 10:51:56.540021"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 10], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:51:56.559313"], ["updated_at", "2017-11-24 10:51:56.559313"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (1.0ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 11], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 11], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 11], ["line_item_id", 1], ["created_at", "2017-11-24 10:51:56.567627"], ["updated_at", "2017-11-24 10:51:56.567627"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 11], ["id", 12], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 10:51:56.570351"], ["id", 12]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:51:56.578633"], ["updated_at", "2017-11-24 10:51:56.578633"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 12], ["created_at", "2017-11-24 10:51:56.581268"], ["updated_at", "2017-11-24 10:51:56.581268"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 12], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 12], ["id", 13], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 10:51:56.585816"], ["id", 13]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:51:56.612548"], ["updated_at", "2017-11-24 10:51:56.612548"]]
  [1m[35m (10.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 13], ["created_at", "2017-11-24 10:51:56.627473"], ["updated_at", "2017-11-24 10:51:56.627473"]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 13], ["id", 14], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 10:51:56.655185"], ["id", 14]]
  [1m[35m (11.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 13], ["created_at", "2017-11-24 10:51:56.686269"], ["updated_at", "2017-11-24 10:51:56.686269"]]
  [1m[35m (13.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 13], ["id", 15], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.0ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.3ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (283.9ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:52:10.746976"], ["updated_at", "2017-11-24 10:52:10.746976"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 10:52:10.754184"], ["updated_at", "2017-11-24 10:52:10.754184"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 10:52:10.757203"], ["updated_at", "2017-11-24 10:52:10.757203"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:52:10.762944"], ["updated_at", "2017-11-24 10:52:10.762944"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 10:52:10.765683"], ["updated_at", "2017-11-24 10:52:10.765683"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:52:10.767649"], ["updated_at", "2017-11-24 10:52:10.767649"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 3], ["line_item_id", 1], ["created_at", "2017-11-24 10:52:10.769165"], ["updated_at", "2017-11-24 10:52:10.769165"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:52:10.775255"], ["updated_at", "2017-11-24 10:52:10.775255"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 4], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 4], ["line_item_id", 1], ["created_at", "2017-11-24 10:52:10.777945"], ["updated_at", "2017-11-24 10:52:10.777945"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:52:10.779863"], ["updated_at", "2017-11-24 10:52:10.779863"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 5], ["created_at", "2017-11-24 10:52:10.781348"], ["updated_at", "2017-11-24 10:52:10.781348"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:52:10.788034"], ["updated_at", "2017-11-24 10:52:10.788034"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 6], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 6], ["line_item_id", 1], ["created_at", "2017-11-24 10:52:10.794484"], ["updated_at", "2017-11-24 10:52:10.794484"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 6], ["created_at", "2017-11-24 10:52:10.796767"], ["updated_at", "2017-11-24 10:52:10.796767"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:52:10.802859"], ["updated_at", "2017-11-24 10:52:10.802859"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 7], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 7], ["line_item_id", 1], ["created_at", "2017-11-24 10:52:10.805646"], ["updated_at", "2017-11-24 10:52:10.805646"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 7], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:52:10.824796"], ["updated_at", "2017-11-24 10:52:10.824796"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 8], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 8], ["line_item_id", 1], ["created_at", "2017-11-24 10:52:10.827704"], ["updated_at", "2017-11-24 10:52:10.827704"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:52:10.829818"], ["updated_at", "2017-11-24 10:52:10.829818"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 9], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:52:10.844654"], ["updated_at", "2017-11-24 10:52:10.844654"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 10], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 10], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 10], ["line_item_id", 1], ["created_at", "2017-11-24 10:52:10.849368"], ["updated_at", "2017-11-24 10:52:10.849368"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (1.7ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 10], ["id", 11], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:52:10.861621"], ["updated_at", "2017-11-24 10:52:10.861621"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 11], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 11], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 11], ["line_item_id", 1], ["created_at", "2017-11-24 10:52:10.866355"], ["updated_at", "2017-11-24 10:52:10.866355"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 11], ["id", 12], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 10:52:10.869224"], ["id", 12]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:52:10.877171"], ["updated_at", "2017-11-24 10:52:10.877171"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 12], ["created_at", "2017-11-24 10:52:10.879887"], ["updated_at", "2017-11-24 10:52:10.879887"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 12], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.9ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 12], ["id", 13], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 10:52:10.888854"], ["id", 13]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:52:10.920408"], ["updated_at", "2017-11-24 10:52:10.920408"]]
  [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 13], ["created_at", "2017-11-24 10:52:10.932841"], ["updated_at", "2017-11-24 10:52:10.932841"]]
  [1m[35m (7.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 13], ["id", 14], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 10:52:10.966561"], ["id", 14]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 13], ["created_at", "2017-11-24 10:52:10.995062"], ["updated_at", "2017-11-24 10:52:10.995062"]]
  [1m[35m (11.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 13], ["id", 15], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (7.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.0ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.1ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (273.1ms)[0m  [1m[35mTRUNCATE TABLE "public"."services", "public"."payments", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:53:54.775781"], ["updated_at", "2017-11-24 10:53:54.775781"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 1], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 10:53:54.784619"], ["updated_at", "2017-11-24 10:53:54.784619"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 1], ["line_item_id", 1], ["created_at", "2017-11-24 10:53:54.788948"], ["updated_at", "2017-11-24 10:53:54.788948"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:53:54.795167"], ["updated_at", "2017-11-24 10:53:54.795167"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 2], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 2], ["line_item_id", 1], ["created_at", "2017-11-24 10:53:54.798575"], ["updated_at", "2017-11-24 10:53:54.798575"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:53:54.800778"], ["updated_at", "2017-11-24 10:53:54.800778"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 3], ["line_item_id", 1], ["created_at", "2017-11-24 10:53:54.803079"], ["updated_at", "2017-11-24 10:53:54.803079"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:53:54.808983"], ["updated_at", "2017-11-24 10:53:54.808983"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 4], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 4], ["line_item_id", 1], ["created_at", "2017-11-24 10:53:54.812200"], ["updated_at", "2017-11-24 10:53:54.812200"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:53:54.814389"], ["updated_at", "2017-11-24 10:53:54.814389"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 5], ["created_at", "2017-11-24 10:53:54.816073"], ["updated_at", "2017-11-24 10:53:54.816073"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:53:54.825653"], ["updated_at", "2017-11-24 10:53:54.825653"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 6], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 6], ["line_item_id", 1], ["created_at", "2017-11-24 10:53:54.829535"], ["updated_at", "2017-11-24 10:53:54.829535"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 6], ["created_at", "2017-11-24 10:53:54.831732"], ["updated_at", "2017-11-24 10:53:54.831732"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:53:54.837784"], ["updated_at", "2017-11-24 10:53:54.837784"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 7], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 7], ["line_item_id", 1], ["created_at", "2017-11-24 10:53:54.840932"], ["updated_at", "2017-11-24 10:53:54.840932"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 7], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:53:54.861994"], ["updated_at", "2017-11-24 10:53:54.861994"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 8], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 8], ["line_item_id", 1], ["created_at", "2017-11-24 10:53:54.865434"], ["updated_at", "2017-11-24 10:53:54.865434"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:53:54.867448"], ["updated_at", "2017-11-24 10:53:54.867448"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 9], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:53:54.875920"], ["updated_at", "2017-11-24 10:53:54.875920"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 10], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 10], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 10], ["line_item_id", 1], ["created_at", "2017-11-24 10:53:54.880915"], ["updated_at", "2017-11-24 10:53:54.880915"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 10], ["id", 11], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 1], ["id", 11], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:53:54.894221"], ["updated_at", "2017-11-24 10:53:54.894221"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" = $1 AND "payments"."service_id" = $2 LIMIT $3[0m  [["line_item_id", 1], ["service_id", 11], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.2ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" = $2 LIMIT $3[0m  [["service_id", 11], ["line_item_id", 1], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 LIMIT $2[0m  [["line_item_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "line_item_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["service_id", 11], ["line_item_id", 1], ["created_at", "2017-11-24 10:53:54.899301"], ["updated_at", "2017-11-24 10:53:54.899301"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 11], ["id", 12], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 12], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 10:53:54.902532"], ["id", 12]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" ORDER BY "payments"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:53:54.910307"], ["updated_at", "2017-11-24 10:53:54.910307"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 12], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 12], ["created_at", "2017-11-24 10:53:54.913740"], ["updated_at", "2017-11-24 10:53:54.913740"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (1.6ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 12], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 12], ["id", 13], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 13], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 10:53:54.923894"], ["id", 13]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "services" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2017-11-24 10:53:54.949064"], ["updated_at", "2017-11-24 10:53:54.949064"]]
  [1m[35m (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 13], ["created_at", "2017-11-24 10:53:54.958180"], ["updated_at", "2017-11-24 10:53:54.958180"]]
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (1.0ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 13], ["id", 14], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 14], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "payments" SET "line_item_id" = $1, "updated_at" = $2 WHERE "payments"."id" = $3[0m  [["line_item_id", 100500], ["updated_at", "2017-11-24 10:53:54.995551"], ["id", 14]]
  [1m[35m (13.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT  "payments".* FROM "payments" WHERE "payments"."line_item_id" IS NULL AND "payments"."service_id" = $1 LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mService Load (0.3ms)[0m  [1m[34mSELECT  "services".* FROM "services" WHERE "services"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND "payments"."line_item_id" IS NULL LIMIT $2[0m  [["service_id", 13], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "payments" ("service_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["service_id", 13], ["created_at", "2017-11-24 10:53:55.032133"], ["updated_at", "2017-11-24 10:53:55.032133"]]
  [1m[35m (9.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."service_id" = $1 AND ("payments"."id" != $2) AND "payments"."line_item_id" = $3 LIMIT $4[0m  [["service_id", 13], ["id", 15], ["line_item_id", 100500], ["LIMIT", 1]]
  [1m[36mPayment Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "payments" WHERE "payments"."line_item_id" = $1 AND ("payments"."id" != $2) LIMIT $3[0m  [["line_item_id", 100500], ["id", 15], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "services" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.1ms)[0m  [1m[34m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE
            tablename !~ '_prt_' AND
            tablename <> 'schema_migrations' AND
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.3ms)[0m  [1m[34mselect table_name from information_schema.views where table_schema = 'payment_race_test_test'[0m
  [1m[35m (250.8ms)[0m  [1m[35mTRUNCATE TABLE "public"."payments", "public"."services", "public"."ar_internal_metadata" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "payments" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "services" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (8.2ms)[0m  [1m[35mCOMMIT[0m
